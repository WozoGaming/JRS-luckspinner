var DO;!function(a){!function(b){!function(c){function d(a,b,c){var d=setInterval(function(){a()&&(clearInterval(d),b())},c||250)}function e(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function f(a){var b,c,d;for(d=a.length;d;d-=1)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c;return a}function g(b){function c(){d.off(a.Core.Events.getTouchEvent(),b),d.off(a.Core.Events.getClickEvent(),b),$("#touch_to_skip").remove()}$("#touch_to_skip").remove();var d=$("body").add('<div id="touch_to_skip" style="position: absolute; left: 0; right: 0; width: 100%; height: 100%";></div>');return d.on(a.Core.Events.getTouchEvent(),b),d.on(a.Core.Events.getClickEvent(),b),c}function h(a){for(var b=a.split("."),c=window||this,d=0,e=b.length;d<e;d++)c=c[b[d]];if("function"!=typeof c)throw"[Utils.getReference] Cannot get reference to class : "+a;return c}function i(a){var b=decodeURI((RegExp(a+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);return"null"!=b&&0!=b.length||(b=null),b}function j(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){"true"==d&&(d=!0),"false"==d&&(d=!1),a[c]=d});return a}c.poll=d,c.debounce=e,c.shuffleArray=f;var k=function(){function b(b){this.wasSkipped=!1,this._tasks=[],this._juggler=b||a.Core.Time.juggler}return b.prototype.add=function(a,b){var c={func:a,canSkip:b};this._tasks.push(c)},b.prototype.start=function(a){this._onComplete=a,this._tasks.length?this.nextTask():this._onComplete&&this._onComplete()},b.prototype.nextTask=function(){this._currentTask=this._tasks.shift();var a=this;this._currentTask.func(function(){a._tasks.length?a.nextTask():(a._currentTask=null,a._onComplete&&a._onComplete())})},b.prototype.skip=function(){this._currentTask&&this._currentTask.canSkip&&this.nextTask()},b.prototype.skipToEnd=function(){this._onComplete()},b}();c.Queue=k,c.touchToSkip=g,c.getReference=h,c.getUrlVar=i,c.getUrlVars=j,c.formatTime=function(a){var c=Math.floor(a/60),d=b.Lang.getPhrase("settings_hour"),e=b.Lang.getPhrase("settings_hours"),f=b.Lang.getPhrase("settings_minute"),g=b.Lang.getPhrase("settings_minutes");if(c){var h=a%(60*c);return h?l(c,d,e)+", "+l(h,f,g):l(c,d,e)}return l(a,f,g)};var l=function(a,b,c){return a>1?a+" "+c:a+" "+b}}(b.Utils||(b.Utils={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){function c(){return null}function d(c){console.log("[Core] Initializing...");var d=new f.Queue;d.add(function(a){a()}),d.add(function(a){b.Events.init(),a()}),d.add(function(a){b.Time.init(),a()}),d.add(function(a){b.Environment.init(),a()}),d.add(function(a){b.SoundManager.globalSounds=new b.SoundManager,a()}),d.add(function(b){a.Core.Environment.NetworkStats.loadTestFile("./network",function(a){b()})}),d.start(function(){console.log("[Core] Initialization complete!"),c()}),e(),$(window).blur(function(c){g=(new Date).getTime(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_LOSE_FOCUS,c,g)}),$(window).focus(function(c){var d=(new Date).getTime()-g;b.Events.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,d,c)}),window.onerror=function(c,d,e,f,g){console.error("[Core] *** APP EXCEPTION ***",c,g.stack),b.Events.coreEvents.emit(a.Core.Events.ON_APP_EXCEPTION,c)},window.onresize=f.debounce(function(c){b.Events.coreEvents.emit(a.Core.Events.ON_APP_RESIZE,c,b.Environment.getOrientation())},100);var h,i=0,j=!1,k=$("body");k.on({touchmove:function(c){j=!0,h=$(this).scrollTop(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,c),i=h}}),k.on({touchend:function(c){console.log("Environment","end",j),j&&b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL_END,c),j=!1}}),window.onscroll=f.debounce(function(c){b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,c)},250)}function e(){var c,d;void 0!==document.hidden?("hidden",d="visibilitychange",c="visibilityState"):void 0!==document.mozHidden?("mozHidden",d="mozvisibilitychange",c="mozVisibilityState"):void 0!==document.msHidden?("msHidden",d="msvisibilitychange",c="msVisibilityState"):void 0!==document.webkitHidden&&("webkitHidden",d="webkitvisibilitychange",c="webkitVisibilityState"),document.addEventListener(d,function(){switch(document[c]){case"visible":var d=(new Date).getTime()-g;b.Events.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,d,null);break;case"hidden":g=(new Date).getTime(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_LOSE_FOCUS,g,null)}})}var f=a.Core.Utils,g=(new Date).getTime();b.isDebugMode=c,b.init=d}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(){t.currentStats=new t(0,0,999999),b.launchVariables=a.Core.Utils.getUrlVars(),b.launchVariables.branding=!0,b.launchVariables.music="1",b.launchVariables.sfx="1",screenfull.enabled&&screenfull.onchange(function(){a.Core.Events.coreEvents.emit(b.EVENT_FULL_SCREEN,screenfull.isFullscreen)}),"iOS"==b.getPlatformData().os.family&&(document.addEventListener("gesturestart touchmove",function(a){a=a.originalEvent||a,1!==a.scale&&"SELECT"!==a.target.tagName&&"INPUT"!==a.target.tagName&&(a.preventDefault(),document.body.style.transform="scale(1)",console.log(" document.body.style.transformv: ",document.body.style.transform))}),document.addEventListener("touchend",function(a){"SELECT"!=a.target.tagName&&"INPUT"!=a.target.tagName&&(a.preventDefault(),$(a.target).trigger("click"),console.log(" document.body.style.transformvip : ",document.body.style.transform))},!1))}function d(){document.addEventListener("touchstart",function(a){if("SELECT"!=a.target.tagName&&"INPUT"!=a.target.tagName){var b=a.timeStamp,c=a.currentTarget.dataset.lastTouch||b,d=b-c,e=a.touches.length;if(a.currentTarget.dataset.lastTouch=b,!d||d>200||e>1)return;a.preventDefault(),$(a.target).trigger("click")}})}function e(){return"16:9"}function f(){return this._lastHeight=this._lastHeight||window.innerHeight,window.innerHeight>=this._lastHeight?b.barsHeight=0:b.barsHeight=this._lastHeight-window.innerHeight,this._lastHeight=window.innerHeight,b.barsHeight>0}function g(){return screenfull.isFullscreen}function h(){return!b.isDesktop()&&screenfull.enabled}function i(){b.isDeviceMobile()&&screenfull.request()}function j(){return window.platform}function k(){return n()==b.ORIENTATION_LANDSCAPE}function l(){return n()==b.ORIENTATION_PORTRAIT}function m(a,c){if(c){if(!(a.indexOf(c)>=0))throw"[Environment] Variant type not found : "+b.variant+".  Allowed types for this application are : "+a;b.variant=c}else b.getDeviceType()==b.DEVICE_MOBILE?b.variant=b.DEVICE_MOBILE:b.variant=b.DEVICE_DESKTOP,b.launchVariables.variant=b.variant}function n(){return window.innerWidth>window.innerHeight?a.Core.Environment.ORIENTATION_LANDSCAPE:a.Core.Environment.ORIENTATION_PORTRAIT}function o(){return r()==b.DEVICE_MOBILE}function p(){return!o()}function q(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function r(){var a=b.launchVariables.device||b.launchVariables.variant;return a||q()&&(a=b.DEVICE_MOBILE),a}function s(){a.Core.Events.coreEvents.emit(a.Core.Events.ON_APP_EXIT)}b.EVENT_FULL_SCREEN="env_full_screen",b.DEVICE_MOBILE="mobile",b.DEVICE_DESKTOP="desktop",b.ORIENTATION_LANDSCAPE="landscape",b.ORIENTATION_PORTRAIT="portrait",b.force43aspectRatio=!1,b.variant="default",b.barsHeight=50;b.init=c,b.preventDoubleTab=d,b.getAspectRatio=e,b.isChromeVisible=f,b.isFullScreen=g,b.isFullScreenAvailable=h,b.goFullScreen=i,b.getPlatformData=j,b.isLandscape=k,b.isPortrait=l;var t=function(){function a(b,c,d){this.bitsPerSecond=0,this.kiloBytesPerSecond=0,this.megaBytesPerSecond=0,this.megaBitsPerSecond=0,this.bytesPerSecond=0,this.durationSeconds=0,this.rating=null,this.durationSeconds=(c-b)/1e3,this.bytesPerSecond=d/this.durationSeconds,this.bitsPerSecond=8*this.bytesPerSecond,this.kiloBytesPerSecond=this.bytesPerSecond/1024,this.megaBytesPerSecond=this.kiloBytesPerSecond/1024,this.megaBitsPerSecond=this.bitsPerSecond/1e6,this.megaBytesPerSecond>=2?this.rating=a.BANDWITH_RATING_HIGH:this.rating=a.BANDWITH_RATING_LOW}return a.loadTestFile=function(b,c){a.startTest(),$.ajax({type:"HEAD",url:b+"?v=1.0.0",success:function(b,d,e){var f=Number(e.getResponseHeader("Content-Length")),g=a.endTest(f);console.log("[NetworkStats] Test file loaded - file size (bytes) : "+f,g.getReport()),console.log("[NetworkStats] Download time for 1 KB byte file (seconds) : ",g.getDownloadTime(1e3)),console.log("[NetworkStats] Download time for 500 KB byte file (seconds) : ",g.getDownloadTime(5e4)),console.log("[NetworkStats] Download time for 1 MB byte file (seconds) : ",g.getDownloadTime(1e6)),console.log("[NetworkStats] Download time for 10 MB byte file (seconds) : ",g.getDownloadTime(1e7)),a.currentStats=g,c&&c(g)}.bind(this),error:function(a){console.warn("[NetworkStats] Unable to load network file :",b),c&&c(null)}})},a.startTest=function(){a.startTime=(new Date).getTime()},a.endTest=function(b){return new a(a.startTime,(new Date).getTime(),b)},a.prototype.getDownloadTime=function(a){return a/this.bytesPerSecond},a.prototype.getReport=function(){return{rating:this.rating,megaBytesPS:this.megaBytesPerSecond,kiloBytesPS:this.kiloBytesPerSecond,bytesPS:this.bytesPerSecond,megaBitsPS:this.megaBitsPerSecond,bitsPS:this.bitsPerSecond,duration:this.durationSeconds}},a.BANDWITH_RATING_HIGH="BANDWIDTH_HIGH",a.BANDWITH_RATING_LOW="BANDWIDTH_LOW",a}();b.NetworkStats=t,b.setVariant=m,b.getOrientation=n,b.isMobile=o,b.isDesktop=p,b.isDeviceMobile=q,b.getDeviceType=r,b.exit=s}(b.Environment||(b.Environment={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){c.juggler=new h(!0),f=a.Core.Events.createEmitter()}function e(){return"_dotime:"+ ++g}var f,g=0;c.init=d;var h=function(){function a(a){this._objects={},this.timeMultiplier=1,this.isActive=!0,this.currentTime=0,this._autoStart=a,a&&this.start(),this.id="_juggler:"+e(),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(a){}.bind(this))}return a.prototype.start=function(){this._lastTime=TweenLite.ticker.time,this._tickBind=this.update.bind(this),TweenLite.ticker.addEventListener("tick",this._tickBind)},a.prototype.stop=function(){TweenLite.ticker.removeEventListener("tick",this._tickBind)},a.prototype.update=function(){var a=1e3*(TweenLite.ticker.time-this._lastTime);if(this.currentTime+=a,this.isActive){for(var b in this._objects)this._objects[b].onUpdate(a*this.timeMultiplier);this._lastTime=TweenLite.ticker.time}},a.prototype.purge=function(){for(var a in this._objects)this.remove(this._objects[a])},a.prototype.add=function(a){var b=e();a._animateableId=b,this._objects[b]=a},a.prototype.remove=function(a){delete this._objects[a._animateableId]},a.prototype.setInterval=function(a,b){var c=this.delayCall(a,b,-1);return c.start(),c},a.prototype.setTimeout=function(a,b){var c=this.delayCall(a,b);return c.start(),c},a.prototype.clearTimeout=function(a){this.remove(a)},a.prototype.delayCall=function(a,b,c,d){return new i(a,b,this,c,d)},a}();c.Juggler=h;var i=function(){function a(a,b,c,d,e){this.iterations=0,this._isPaused=!1,this._juggler=c,this._originalDelay=b,this._delay=b,this._onTick=a,this._onComplete=e,this._repeatCount=d||1,this.iterations=0}return a.prototype.pause=function(){this._isPaused=!0},a.prototype.resume=function(){this._isPaused=!1},a.prototype.start=function(){this._juggler.add(this)},a.prototype.stop=function(){this._juggler.remove(this)},a.prototype.onUpdate=function(a){this._isPaused||(this._delay-=a,this._delay<=0&&(this._onTick(++this.iterations),0==--this._repeatCount?(this.stop(),this._onComplete&&this._onComplete()):this._delay=this._originalDelay))},a}();c.DelayCall=i}(b.Time||(b.Time={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(){a.coreEvents=new PIXI.utils.EventEmitter}function c(){return"touchend"}function d(){return"mouseup"}function e(){return"mousedown"}function f(){return new PIXI.utils.EventEmitter}a.ON_CREATE="on_create",a.ON_DESTROY="on_destroy",a.ON_SHOWN="on_shown",a.ON_HIDDEN="on_hidden",a.ON_INTERACTION="on_touch",a.ON_APP_EXIT="on_app_exit",a.ON_APP_READY="on_app_ready",a.ON_APP_LOSE_FOCUS="on_app_lose_focus",a.ON_APP_GET_FOCUS="on_app_get_focus",a.ON_APP_EXCEPTION="on_app_exception",a.ON_APP_RESIZE="on_app_resize",a.ON_APP_SCROLL="on_app_scroll_start",a.ON_APP_SCROLL_END="on_app_scroll_end",a.init=b,a.getTouchEvent=c,a.pressup=d,a.getClickEvent=e,a.createEmitter=f;var g=function(){function a(){this._events=f()}return a.prototype.getListenerCount=function(a){return this._events.listeners(a).length},a.prototype.subscribe=function(a,b,c){this._events.on(b,c,a),this.outputCount()},a.prototype.subscribeOnce=function(a,b,c){this._events.once(b,c,a),this.outputCount()},a.prototype.broadcast=function(a,b,c,d,e,f){this._events.emit(a,b,c,d,e,f)},a.prototype.outputCount=function(){console.log("[EventManager] Subscriber count :",this.getListenerCount())},a}();a.EventManager=g}(a.Events||(a.Events={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=a.Core.Environment.NetworkStats,d=function(){function d(){this.loadProgress=0,this._hasLoaded=!1,this._cachedMovieClips={},this.itemsPostLoad=[],this.preLoadNumber=0,Howler.iOSAutoEnable=!1}return d.prototype.purge=function(){this._PIXILoader.reset()},d.prototype.areAssetsAvailable=function(a){if(d._instances[a]){return d._instances[a].isLoaded()}return!1},d.get=function(a){var b;return d._instances[a]?b=d._instances[a]:(b=new d,d._instances[a]=b),b},d.prototype.isLoaded=function(){return this._hasLoaded},d.prototype.getMovieClipOld=function(b,c,d,e){var f=this;d=d||"PIXI.extras.MovieClip";var g=null;if(!e&&this._cachedMovieClips[b])for(var h=0;h<this._cachedMovieClips[b].length;h++)if(!this._cachedMovieClips[b][h].parent){g=this._cachedMovieClips[b][h],g.gotoAndStop(0);break}if(g||(this._manifest.items.forEach(function(c){if("atlas"==c.type&&c.movieclips){var e=c.movieclips[b];if(e){var h=[];e.textures.forEach(function(a){h.push(f.getPIXIAtlas(c.id)[a])});var i=a.Core.Utils.getReference(d);g=new i(h),g.animationSpeed=e.speed||1}}}.bind(this)),this._cachedMovieClips[b]=this._cachedMovieClips[b]||[],this._cachedMovieClips[b].push(g)),!g)throw"[AssetManager] Movieclip does not exist in assets (was it filtered by bandwidth?): "+b;return g.gotoAndStop(1),c&&(g.anchor.x=.5,g.anchor.y=.5),g},d.prototype.getMovieClip=function(b,c,d,e){var f=this;d=d||"PIXI.extras.MovieClip";var g=null;return this._manifest.items.forEach(function(c){if("multi_atlas"==c.type&&c.movieclips){var e=c.movieclips[b];if(e){var h=[];e.textures.forEach(function(a){h.push(PIXI.Texture.fromFrame(a))});var i=a.Core.Utils.getReference(d);g=new i(h),g.animationSpeed=e.speed||1}}if("atlas"==c.type&&c.movieclips){var e=c.movieclips[b];if(e){var j=[];e.textures.forEach(function(a){j.push(f.getPIXIAtlas(c.id)[a])});var i=a.Core.Utils.getReference(d);g=new i(j),g.animationSpeed=e.speed||1}}}.bind(this)),g.gotoAndStop(1),c&&(g.anchor.x=.5,g.anchor.y=.5),g},d.prototype.getSoundManager=function(){return this._soundManager},d.prototype.getPIXIAsset=function(a){return this._PIXILoader.resources[a]},d.prototype.getPIXIAtlas=function(a){if(this.getPIXIAsset(a))return this.getPIXIAsset(a).textures;throw"[AssetManager] Atlas does not exist in assets (was it filtered by bandwidth?) : "+a},d.prototype.getPIXISprite=function(a,b){if(!b){var c=this.getAtlasFromRef(a);a=c.ref,b=c.atlas}return new PIXI.Sprite(this.getPIXIAtlas(b)[a])},d.prototype.getPIXITexture=function(a,b){var c;if(!b){var d=this.getAtlasFromRef(a);a=d.ref,b=d.atlas}if(b)c=this.getPIXIAtlas(b)[a];else{if(!this.getPIXIAsset(a))throw"[AssetManager] Texture does not exist in assets (was it filtered by bandwidth?) : "+a;c=this.getPIXIAsset(a).texture}return c},d.prototype.load=function(e,f,g){function h(a){function e(a){var c;if("string"==typeof a.path)c=a.path;else if(!(c=a.path[b.Environment.variant]))return null;var e=c.split("|");return e.length>1?e:(c=e[1]&&window.devicePixelRatio>=2?e[1]:e[0],e[1]&&d.forceHD&&(c=e[1]),e[0]&&d.forceSD&&(c=e[0]),c)}function h(){}function j(){i.loadProgress=m/l,m++,g&&g(m/l),m==l&&(i._hasLoaded=!0,k(),setTimeout(f,500))}function k(){i._manifest.items.forEach(function(a){if("atlas"==a.type&&a.movieclips)for(var b in a.movieclips){var c=a.movieclips[b];if(c.pre_cache=0,c.pre_cache)for(var d=0;d<c.pre_cache;d++){i.getMovieClip(b,!1,null,!0)}}})}i._manifest=a;var l=0,m=0,n=0,o=[];a.items.forEach(function(a){var f=!0;if(d.optimizeLoading&&(a.bandwidth_filter&&(f=a.bandwidth_filter==c.currentStats.rating),f||o.push(a.id)),"cache!"==a.id)i._PIXILoader.add("cached_"+ ++n,e(a)),l++;else if(f){var g=e(a);if(g)switch(a.type){case d.ASSET_TYPE_IMAGE:i._PIXILoader.add(a.id,g),l++;break;case d.ASSET_TYPE_MUL_ATLAS:i._PIXILoader.add(g),l+=2*g.length;break;case d.ASSET_TYPE_AUDIO:var k=[];b.SoundManager.isFormatSupported("mp3")&&(k[0]=g+".mp3?v=1.0.0"),b.SoundManager.isFormatSupported("ogg")&&(k[0]=g+".ogg?v=1.0.0"),b.SoundManager.isFormatSupported("m4a")&&(k[0]=g+".m4a?v=1.0.0");var m=a.properties||{};m.src=k,m.onload=j,m.onloaderror=h;var p=void 0;try{p=new Howl(m),p.once("loaderror",j.bind(this))}catch(a){}l++,a.global&&!b.SoundManager.globalSounds.doesSoundExist(a.id)?b.SoundManager.globalSounds.addSound(a,p):i._soundManager.addSound(a,p);break;case d.ASSET_TYPE_JSON:i._PIXILoader.add(a.id,e(a)),l++;break;case d.ASSET_TYPE_ATLAS:l+=2,i._PIXILoader.add(a.id,g);break;case d.ASSET_TYPE_FONT:i._PIXILoader.add(a.id,g),l++}}}),i._PIXILoader.on("load",j),i._PIXILoader.load()}var i=this;if(this._hasLoaded)return this.preLoadNumber++,this.preLoadNumber++,this.loadProgress=1,g&&g(1),void f();this._PIXILoader=new PIXI.loaders.Loader,this._soundManager=new a.Core.SoundManager,this._PIXILoader.pre(function(a,b){d.antiCaching&&(a.url+="?v=1.0.0"),b()}),this.loadProgress=0,g&&g(0),e.indexOf(".json")?$.getJSON(e+"?v=1.0.0",function(a){h(a)}):h(e)},d.prototype.getAtlasFromRef=function(a){if(a.indexOf(":")>0){var b=a.split(":");return{atlas:b[0],ref:b[1]}}return{atlas:null,ref:a}},d.ASSET_TYPE_IMAGE="image",d.ASSET_TYPE_AUDIO="sound",d.ASSET_TYPE_JSON="json",d.ASSET_TYPE_ATLAS="atlas",d.ASSET_TYPE_FONT="font",d.ASSET_TYPE_MUL_ATLAS="multi_atlas",d.optimizeLoading=!1,d.forceSD=!1,d.forceHD=!1,d.antiCaching=!0,d._instances={},d}();b.AssetManager=d}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(c,d){$.ajax({dataType:"json",url:"assets/lang/"+c.toLowerCase()+".json?v=1.0.0",success:function(b){a.langCode=c,f=b,d()},error:function(){console.warn("[Lang] Language file not found for:"+c,"Defaulting to en"),b("eng",d)}})}function c(b,c){a.langCode=b,f=c}function d(a,b){if(!f)return a.toLowerCase();"@"==a.substr(0,1)&&(a=a.substring(1,9999));var c=f[a];if(c&&(g[a]=g[a]||0,g[a]++),c||(c=a),b)for(var d in b){var e=new RegExp("{"+d+"}","gi");c=c.replace(e,b[d])}return c}function e(){for(var a in f){var b=".lang\\:"+a;f[a];$(b).length&&$(b).html(d(a))}}var f,g={};a.loadDictionary=b,a.setDictionary=c,a.getPhrase=d,a.scanDOM=e}(a.Lang||(a.Lang={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a,b,c){var d=Math.random()*(b-a)+a;return c&&(d=Math.floor(d)),d}function c(a){return a*(Math.PI/180)}function d(a,b){return Math.round(a/b)*b}function e(a,b){return Math.ceil(a/b)*b}function f(a,b){return Math.floor(a/b)*b}function g(a){return Math.acos(a)*v}function h(a){return Math.asin(a)*v}function i(a){return Math.atan(a)*v}function j(a,b){return Math.atan2(a,b)*v}function k(a){return Math.cos(u*a)}function l(a){return Math.sin(u*a)}function m(a){return Math.tan(u*a)}function n(a,b,c,d){return Math.atan2(d-b,c-a)*v}function o(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}function p(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function q(a,b,c){return a<=b?0:a>=c?1:(a-b)/(c-b)}function r(a,b,c){return a+(b-a)*c}function s(a,b){if(a<0)for(;a<0;)a+=b;else if(a>b)for(;a>b;)a-=b;return a}function t(a){return s(a,360)}var u=.0174532925,v=57.2957795;a.getRandomRange=b,a.degToRad=c,a.roundToNearest=d,a.roundUpToNearest=e,a.roundDownToNearest=f,a.Dacos=g,a.Dasin=h,a.Datan=i,a.Datan2=j,a.Dcos=k,a.Dsin=l,a.Dtan=m,a.calcAngle=n,a.calcDistance2=o,a.calcDistance=p,a.getNormalizedByLimits=q,a.lerp=r,a.normalize=s,a.putIn360=t}(a.Maths||(a.Maths={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=function(){function c(){var d=this;this._sounds={},this._atlases={},this._volumeFx=1,this._volumeMusic=1,this._musicRestorePoints={},this._playingSounds={},this.getSpriteAtlas=function(a){return d._atlases&&d._atlases[a]?d._atlases[a]:null},b.Events.coreEvents.on(c.EVENT_SET_MUTE,function(b){a.Common.ApplicationBase.instance.emit(a.Common.Server.LEANDER_SOUND_STATUS,!b),b?this.mute():this.unMute()}.bind(this)),b.Events.coreEvents.on(c.EVENT_SET_MUSIC_VOLUME,function(a){this._volumeMusic=a,!0===this._volumeMusic?this._currentMusic&&this._currentMusic.mute(!1):this._currentMusic&&this._currentMusic.mute(!0)}.bind(this)),b.Events.coreEvents.on(c.EVENT_SET_FX_VOLUME,function(a){this._volumeFx=!0===a?1:0}.bind(this)),b.Events.coreEvents.on(c.EVENT_ON_FX_VOLUME,function(a){this._volumeFx=!0===a?1:0}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(){b.Environment.isMobile()&&b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!1)}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_EXCEPTION,function(){b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!0)}.bind(this)),Howler.mobileAudioEnable=!1}return c.prototype.getCurrentMusic=function(){return this._currentMusic},c.prototype.getatlas=function(){return this._atlases},c.prototype.getCurrentMusicId=function(){return this._currentMusicId},c.prototype.getVolumeFX=function(){return this._volumeFx},c.prototype.getVolumeMusic=function(){return this._volumeMusic},c.prototype.setVolumeMusic=function(a){this._volumeMusic=a},c.prototype.setVolumeFX=function(a){this._volumeFx=a},c.prototype.purge=function(){this._sounds=null},c.prototype.playCue=function(a,b,c,d){if(void 0===d&&(d=1),a){var e,f;"string"==typeof a?f=a:void 0==b?(f=a.shift(),a.push(f)):f=a[b];var g=this.getSpriteAtlas(f);return g?(g.volume(this._volumeFx*d),e=g.play(f),this._playingSounds[f]=e):(e=this.getSound(a))&&(e.volume(this._volumeFx),e.play()),e.loop=c,e}},c.prototype.stopCue=function(a){if(a){var b;"string"==typeof a?b=a:console.warn("[SoundManager] stopCue() invalid cue parameter:",a);var c=this.getSpriteAtlas(b);c&&this._playingSounds[b]&&c.stop(this._playingSounds[b])}},c.prototype.mute=function(){Howler.mute(!0),this.isMuted=!0},c.prototype.unMute=function(){Howler.mute(!1),this.isMuted=!1},c.prototype.addSound=function(a,b){if(this._sounds[a.id])throw"[SoundManager] Duplicate sound id : "+a.id;if(this._sounds[a.id]=b,a.properties.sprite)for(var c in a.properties.sprite)this._atlases[c]=b},c.prototype.doesSoundExist=function(a){return!!this._sounds[a]},c.prototype.getSound=function(a){if(this._sounds[a])return this._sounds[a];throw"[SoundManager] Sound id doesn't exist : "+a},c.prototype.setMusicRestorePoint=function(a,b){this._musicRestorePoints[a]=b},c.prototype.stopMusic=function(){this._currentMusic&&(this._musicRestorePoints[this._currentMusicId]=this._currentMusic.seek(),this._currentMusic.stop(),this._currentMusic=null)},c.prototype.fadeMusicOut=function(a,b){b=b||500,a=a||0,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),a*this._volumeMusic,b)},c.prototype.fadeMusicIn=function(a,b){b=b||500,a=a||1,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),this._volumeMusic*a,b)},c.prototype.startMusic=function(a,b,c,d){if(b=b||250,a!=this._currentMusicId)return this.stopMusic(),this._currentMusic=this.getSound(a),c&&this._currentMusic.seek(this._musicRestorePoints[a]||0),this._currentMusic.play(),this._currentMusic.loop(!d),this._currentMusicId=a,this._currentMusic.volume(0),this.fadeMusicIn(1,b),this._currentMusic},c.isFormatSupported=function(a){return c.getSupportedFormats().indexOf(a)>-1},c.getSupportedFormats=function(){var a=["ogg","mp3","m4a"],b=[],c=new Audio;return a.forEach(function(a){("probably"==c.canPlayType("audio/"+a)||"maybe"==c.canPlayType("audio/"+a))&&b.push(a)}),b},c.EVENT_SET_FX_VOLUME="sound_manager_set_fx_volume",c.EVENT_ON_FX_VOLUME="sound_manager_on_fx_volume",c.EVENT_SET_MUSIC_VOLUME="sound_manager_set_music_volume",c.EVENT_SET_MUTE="sound_manager_mute",c}();b.SoundManager=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(a,b){if(!h[a]){var c=new i("html_pages_container-"+a.toLowerCase(),b);h[a]=c}return h[a]}var e,f,g={},h={};c.getPageManager=d;var i=function(){function c(a,c){this._pageData={},c?this._$div=c:($("#game_wrapper").append("<div id='"+a+"'></div>"),this._$div=$("#"+a)),this._eventListener=b.Events.createEmitter(),b.Events.coreEvents.on(b.Events.ON_APP_RESIZE,function(){},this)}return c.prototype.getDiv=function(){return this._$div},c.prototype.setVisible=function(a){a?this._$div.show():this._$div.hide()},c.prototype.loadPages=function(d,e,f){function h(){var l=d.shift();k._pageData[l.id]=l,k._$div.append('<div id="'+l.id+'"></div>');var m=$("#"+l.id),n=l.html;"string"!=typeof n&&(n=b.Environment.variant==b.Environment.DEVICE_MOBILE?l.html.mobile:l.html.desktop),$(m).load(n+"?v=1.0.0",function(){var n=a.Core.Utils.getReference(l.module),o=new n(l.id,m);g[l.id]=o,o.emit(a.Core.Events.ON_CREATE),b.Events.coreEvents.emit(c.EVENT_ON_PAGE_LOADED,o),d.length>0?h():(k._$div.show(),k.processCSS(),f()),$(l.div).hide(),e(++j/i,l.id)})}this._$div.hide();var i=d.length,j=0;e(0);var k=this;h()},c.prototype.getPage=function(a){return g[a]},c.prototype.closeOverlay=function(){f&&(f.emit(a.Core.Events.ON_HIDDEN),f=null)},c.prototype.showOverlay=function(b,c){f&&f.id==b||(f&&f.emit(a.Core.Events.ON_HIDDEN),c=c||{},c.isOverlay=!0,f=g[b],f.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.toggleOverlay=function(a,b){f&&f.id==a?this.closeOverlay():this.showOverlay(a,b)},c.prototype.showPage=function(b,c){e&&e.id==b||(e&&e.emit(a.Core.Events.ON_HIDDEN),e=g[b],e.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.processCSS=function(){for(var a in this._pageData){var c=this._pageData[a];if($("head").append('<link id="'+a+'-default" rel="stylesheet" href="'+c.variants_css.default+'?v=1.0.0" type="text/css" />'),b.Environment.variant==b.Environment.DEVICE_MOBILE){var d=c.variants_css.mobile.landscape||c.variants_css.default,e=c.variants_css.mobile.portrait||c.variants_css.default;$("head").append('<link id="'+a+'-landscape" rel="stylesheet" media="all and (orientation:landscape)" href="'+d+'?v=1.0.0">'),$("head").append('<link  id="'+a+'-portrait"rel="stylesheet" media="all and (orientation:portrait)" href="'+e+'?v=1.0.0">')}else{var f=c.variants_css[b.Environment.variant]||c.variants_css.default;$("head").append('<link id="'+a+'" rel="stylesheet" href="'+f+'?v=1.0.0" type="text/css" />')}}},c.EVENT_ON_PAGE_LOADED="page_manager_on_page_loaded",c}();c.PageManager=i}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(c){function d(b,d){var e=c.call(this)||this;return e._$div=d,e.id=b,e._$div.hide(),e._$parent=e._$div.parent(),e._$div.addClass("HTML_page"),e.on(a.Core.Events.ON_HIDDEN,function(){this._$div.hide(),this._data&&this._data.isOverlay&&this._$parent.append(this._$div)}.bind(e)),e.on(a.Core.Events.ON_SHOWN,function(a){this._data=a||{},a&&a.isOverlay?$("body").append(this._$div):this._$parent.append(this._$div),this._$div.show()}.bind(e)),e}return __extends(d,c),d.prototype.getDiv=function(){return this._$div},d.prototype.changeParent=function(a){$("body").append(this._$div),this._$div.show()},d.prototype.hide=function(){this.emit(b.Events.ON_HIDDEN)},d.prototype.show=function(){this.emit(b.Events.ON_SHOWN)},d}(PIXI.utils.EventEmitter);c.Page=d}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){var c=function(){function b(b,c,d){this._onClick=d,this.$_div=$("#"+b),this.$_div.addClass(c),this.$_div.on(a.Core.Events.touchEventType,function(){this.setState(!this.state)}.bind(this))}return b.prototype.setState=function(a){this.state=a,this.$_div.removeClass("switch_on"),this.$_div.removeClass("switch_off"),this.$_div.addClass(a?"switch_on":"switch_off"),this._onClick(this.state)},b}();b.Switch=c}(b.Widgets||(b.Widgets={}))}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=function(){function a(){this.fps=30}return a}();b.StageSetup=c;var d=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(b){a.Core.Renderer.Stage.instance=this,this.setup=b;var d={view:document.getElementById(b.divId),transparent:b.isTransparent,antialias:!0,resolution:b.resolution||2};this._renderer=PIXI.autoDetectRenderer(b.width,b.height,d),a.Core.Time.juggler.add(this),this._update=1e3/this.setup.fps,c.isDebug&&(this._debugLayer=new PIXI.Container,this._debugLayer.name="_debug",this.addChild(this._debugLayer))},c.prototype.onUpdate=function(a){this._update-=a,this._update<=0&&(this._renderer.render(this),this._update=1e3/this.setup.fps,c.isDebug&&this.debug())},c.scaleStage=function(b,c,d){a.Core.Renderer.Stage.instance.x=c||0,a.Core.Renderer.Stage.instance.y=d||0,a.Core.Renderer.Stage.instance.scale.x=b,a.Core.Renderer.Stage.instance.scale.y=b},c.scaleStageBoth=function(b,c,d,e){a.Core.Renderer.Stage.instance.x=d||0,a.Core.Renderer.Stage.instance.y=e||0,a.Core.Renderer.Stage.instance.scale.x=b,a.Core.Renderer.Stage.instance.scale.y=c},c.prototype.debug=function(){function a(c){c.children.forEach(function(c){if("_debug"!=c.name)if(c.children.length>0)a(c);else{var d=new PIXI.Graphics;d.lineStyle(1,65280,1);var e=c.getBounds();d.drawRect(e.x,e.y,e.width,e.height);var f=new PIXI.Point(e.x+c.pivot.x,e.y+c.pivot.y);d.lineStyle(4,65280,1),d.drawCircle(f.x,f.y,10),d.lineStyle(1,65280,1),d.moveTo(f.x-20,f.y),d.lineTo(f.x+20,f.y),d.moveTo(f.x,f.y-20),d.lineTo(f.x,f.y+20),b._debugLayer.addChild(d)}})}this._debugLayer.removeChildren();var b=this;a(this),this.setChildIndex(this._debugLayer,this.children.length-1)},c.isDebug=!1,c}(PIXI.Container);b.Stage=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(c){function d(a){for(var b in a)o[b]=new p(b,a[b])}function e(a){return o[a]}function f(){return n.length?n[n.length-1]:m}function g(a,c,d,e,f){var g=o[a],h=g.getSceneClass(),i=new h(g,c,e,f);b.Stage.instance.addChild(i),n.push(i),d&&d.process(i)}function h(b){n.length&&n.pop().emit(a.Core.Events.ON_DESTROY)}function i(a){return o[a]}function j(){return m?m.getSceneProfile():null}function k(c,d,e,f,g){if(!o[c])throw"[SceneManager] Scene does not exist : "+c;var h=o[c];if(m&&h.class==m.getSceneProfile().class)e(m,!1);else{m&&m.emit(a.Core.Events.ON_DESTROY);var i=h.getSceneClass(),j=new i(h,d,function(a){b.Stage.instance.addChild(a),e(a,!0)},f);m=j}}
function l(c,d,e,f,g){if(!o[c])throw"[SceneManager] Scene does not exist : "+c;var h=o[c];if(m&&h.class==m.getSceneProfile().class)e(m,!1);else{var i=function(b){m&&m.emit(a.Core.Events.ON_DESTROY),m=b},j=h.getSceneClass();new j(h,d,function(a){b.Stage.instance.addChild(a),e(a,!0),g?(m&&(m.cacheAsBitmap=!0),g.process(a,m,function(){i(a)})):i(a)},f)}}var m,n=[],o={},p=function(){function b(a,b){this.id=a,this.class=b.module,this.layoutId=b.layout_id,this.manifestFilename=b.asset_manifest}return b.prototype.getSceneClass=function(){return a.Core.Utils.getReference(this.class)},b.prototype.getLayout=function(a){return a.getPIXIAsset(this.layoutId).data},b}();c.SceneData=p;var q=function(){function a(a,b,c){this.type=a,this.duration=b||.3,this.ease=c||Linear.easeNone}return a.prototype.process=function(b,c,d){switch(this.type){case a.FADE_IN:b.alpha=0,TweenLite.to(b,this.duration,{alpha:1,ease:this.ease,onComplete:d})}},a.FADE_IN="fade_in",a.FADE_OUT="fade_out",a}();c.SceneTransition=q,c.init=d,c.getSceneData=e,c.getCurrentScene=f,c.showSceneAsOverlay=g,c.closeOverlay=h,c.doesSceneExist=i,c.getCurrentSceneProfile=j,c.showScene=k,c.showSceneOLD=l}(b.SceneManager||(b.SceneManager={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i._sceneProfile=e,i._data=f,i.interactive=!0,i.interactiveChildren=!0,i._assets=b.AssetManager.get(e.manifestFilename),i._sounds=i._assets.getSoundManager();var j=new a.Core.Renderer.UI.BoundsFiller(c.Stage.instance.setup.width,c.Stage.instance.setup.height,0,.01);if(j.name="_bounds_",j.x=0,j.y=0,i.addChild(j),!i._sceneProfile.manifestFilename)throw"[Scene] No manifest specified for scene : "+e.class;return i._assets.load(i._sceneProfile.manifestFilename,function(){if(!this._assets.getPIXIAsset(e.layoutId))throw"[Scene] Layout id doesn't exist in assets : "+e.layoutId;this._layout=new c.SceneBuilder(this,this._assets,this._assets.getPIXIAsset(e.layoutId).data),this.emit(a.Core.Events.ON_CREATE),this.onCreate(),g&&g(this)}.bind(i)),i.on(a.Core.Events.ON_DESTROY,i.onDestroy),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,i.onResize,i),i}return __extends(e,d),e.prototype.getLayout=function(){return this._layout},e.prototype.scaleScene=function(b,c,d){this.scale.x=b,this.scale.y=b;var e=this.getBounds();this.x=+((e.width-a.Core.Renderer.Stage.instance.width*b)/2+(c||0)),this.y=+((e.height-a.Core.Renderer.Stage.instance.height)/2+(d||0))},e.prototype.scaleSceneTween=function(b,c,d,e,f){d=d||0,e=e||0;var g=this.getBounds();this.pivot.x=g.width/2,this.pivot.y=g.height/2,this.x=a.Core.Renderer.Stage.instance.width/2+d,this.y=a.Core.Renderer.Stage.instance.height/2+e;var h=this.x+d,i=this.y+e;(new TimelineLite).add([TweenLite.to(this.position,c,{x:h,y:i,ease:Cubic.easeOut}),TweenLite.to(this.scale,c,{x:b,y:b,ease:Cubic.easeOut})]),f&&a.Core.Time.juggler.setTimeout(1e3*c,f)},e.prototype.areAssetsReady=function(){return this._assets.isLoaded()},e.prototype.getAssets=function(){return this._assets},e.prototype.getSceneProfile=function(){return this._sceneProfile},e.prototype.onCreate=function(){},e.prototype.onResize=function(b,c){a.Common.SwipeForFullScreen.init()},e.prototype.onDestroy=function(){this.removeAllListeners(a.Core.Events.ON_DESTROY),a.Core.Events.coreEvents.off(a.Core.Events.ON_APP_RESIZE,this.onResize),this._layout.destroy(),this.parent.removeChild(this)},e}(PIXI.Container);c.Scene=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(DO){var Core;!function(Core){var Renderer;!function(Renderer){var SceneBuilder=function(){function SceneBuilder(a,b,c){var d=this;this._components={},this.fit=function(a){var b=a._config;if(b.fit){var c=d.getComponent(b.fit);if(c){var e=b.scale||{x:1,y:1};a.scale.set(e.x,e.y);for(var f=a.height;a.width>.8*c.width;)a.scale.x-=.05,a.scale.y-=.05;if(a.position.y=d.getCoords(b.position.y,"y")-.5*(f-a.height),!a.modifiedSetText){var g=d.fit,h=a.setText;a.setText=function(b,c){h(b,c),g(a)}.bind(a),a.modifiedSetText=!0}}}},this._layoutData=c,this._assets=b,this._parentScene=a,this.build(a,c),this.refresh(),Core.Events.coreEvents.on(Core.Events.ON_APP_RESIZE,function(){},this)}return SceneBuilder.prototype.getLayoutParams=function(){return this._layoutData.params},SceneBuilder.prototype.getLayoutName=function(){return this._layoutData.name||"Unnamed layout"},SceneBuilder.prototype.getAssets=function(){return this._assets},SceneBuilder.prototype.bringComponentToFront=function(a){var b=this.getComponent(a);this._parentScene.addChild(b)},SceneBuilder.prototype.deleteComponent=function(a){var b=this.getComponent(a);b&&(b.parent.removeChild(b),delete this._components[a])},SceneBuilder.prototype.getComponent=function(a){return this._components[a]},SceneBuilder.prototype.getComponentPlugin=function(a,b){var c;return this.applyToComponents(function(d){d.name==a.name&&(c=a._plugins[b])}),c},SceneBuilder.prototype.setComponentText=function(a,b){var c=this.getComponent(a);c&&c.setText&&c.setText(b)},SceneBuilder.prototype.applyToComponents=function(a){for(var b in this._components)a(this._components[b])},SceneBuilder.prototype.destroy=function(){this.applyToComponents(function(a){a.emit(DO.Core.Events.ON_DESTROY),this.destroyPlugins(a)}.bind(this))},SceneBuilder.prototype.refresh=function(){this.applyToComponents(this.updateComponent.bind(this))},SceneBuilder.prototype.triggerFX=function(a){this.applyToComponents(function(b){var c=b._config;if(c.fx&&c.fx[a]){[].concat(c.fx[a]).forEach(function(a){var c=Core.Utils.getReference(a.split("(")[0]),d=a.match(/\(([^)]+)\)/)[1].split(",");d.unshift(b),c(d[0],d[1],d[2],d[3],d[4],d[5])})}})},SceneBuilder.prototype.destroyPlugins=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.applyToComponents(function(b){b.name==a.name&&(a=b)});var d=a._plugins;if(d)for(var e in d){var f=d[e];f.destroy()}},SceneBuilder.prototype.build=function(container,layoutData){layoutData.bounds||(layoutData.bounds={x:0,y:0,width:container.getBounds().width,height:container.getBounds().height}),layoutData.components.forEach(function(componentData){var assets=this._assets;componentData.construct=componentData.construct||"PIXI.Container()";var component;if(0==componentData.construct.indexOf("assets")?component=eval(componentData.construct):"vie"!==Core.Environment.launchVariables.language.toLowerCase()&&"slo"!==Core.Environment.launchVariables.language.toLowerCase()&&"lit"!==Core.Environment.launchVariables.language.toLowerCase()||"button_splash_continue"!==componentData.id?component=eval("new "+componentData.construct):(componentData.construct=componentData.construct.replace("immortal","roboto"),component=eval("new "+componentData.construct)),componentData.components&&this.build(component,componentData),component.name=componentData.id,component._config=componentData,"win_manager"==component.name||"win_manager1"==component.name?container.addChildAt(component,1):container.addChild(component),this._components[componentData.id])throw"[SceneBuilder] Duplicate component name in layout: "+componentData.id;this._components[componentData.id]=component,componentData.plugins&&(component._plugins=ComponentPlugin.createPlugins(component,componentData.plugins,this._assets)),component.emit(DO.Core.Events.ON_CREATE,componentData,this);var plugins=component._plugins;if(plugins)for(var pluginId in plugins){var plugin=plugins[pluginId];plugin.init()}}.bind(this))},SceneBuilder.prototype.updateComponent=function(component){var componentData=component._config;if(componentData.pivot=componentData.pivot||"CENTRE",this.setPivot(componentData.pivot,component),componentData.position&&this.setPosition(componentData.position,component),componentData.scale&&this.setScale(componentData.scale,component),componentData.filters){var filterList_1=[];componentData.filters.forEach(function(filterConstuctor){var filter=eval("new "+filterConstuctor);filterList_1.push(filter)}),component.filters=filterList_1}componentData.blend_mode&&(component.blendMode=componentData.blend_mode),null!=componentData.alpha&&(component.alpha=componentData.alpha),component.visible=null==componentData.visible||1==componentData.visible,componentData.fit&&this.fit(component)},SceneBuilder.prototype.setInteraction=function(a,b){b.interactive=!0,b.on("touchstart",function(b){a.sound&&this._assets.getSound(a.sound).play(),this._parentScene.emit(DO.Core.Events.ON_INTERACTION,b)}.bind(this))},SceneBuilder.prototype.setPosition=function(a,b){a=a||{x:0,y:0},b.x=this.getCoords(a.x,"x"),b.y=this.getCoords(a.y,"y"),b.x+=this._layoutData.bounds.x||0,b.y+=this._layoutData.bounds.y||0},SceneBuilder.prototype.setPivot=function(a,b){var c=b.getBounds(),d=new PIXI.Point;switch(a){case"CENTRE":d.x=c.width/2,d.y=c.height/2;break;case"TOP_LEFT":d.x=0,d.y=0;break;case"TOP_RIGHT":d.x=c.width,d.y=0;break;case"BOTTOM_RIGHT":d.x=c.width,d.y=c.height;break;case"BOTTOM_LEFT":d.x=0,d.y=c.height;break;case"TOP":d.x=c.width/2,d.y=0;break;case"BOTTOM":d.x=c.width/2,d.y=c.height;break;case"LEFT":d.x=0,d.y=c.height/2;break;case"RIGHT":d.x=c.width,d.y=c.height/2}b.pivot=d},SceneBuilder.prototype.setScale=function(a,b){b.scale=new PIXI.Point(a.x||1,a.y||1)},SceneBuilder.prototype.getCoords=function(a,b){var c;if(isNaN(a)){var d=parseFloat(a.substr(a,a.indexOf("%")));c="x"==b?this._layoutData.bounds.width*(d/100):this._layoutData.bounds.height*(d/100)}else c=a;return c},SceneBuilder}();Renderer.SceneBuilder=SceneBuilder;var ComponentPlugin=function(a){function b(b,c,d){var e=a.call(this)||this;return e._validParentConstructors=[],e._params=c||{},e._parentComponent=b,e._assets=d,e.validate(),e}return __extends(b,a),b.createPlugins=function(a,b,c){var d={};for(var e in b){var f=b[e];if(!f.class)throw"[ComponentPlugin] No 'class' specified for plugin : "+e;var g=Core.Utils.getReference(f.class),h=new g(a,f.params,c);d[e]=h}return d},b.prototype.init=function(){},b.prototype.destroy=function(){},b.prototype.validate=function(){Core.isDebugMode()},b}(PIXI.utils.EventEmitter);Renderer.ComponentPlugin=ComponentPlugin}(Renderer=Core.Renderer||(Core.Renderer={}))}(Core=DO.Core||(DO.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(d){var e=a.Core.Events,f=function(a){function b(b,c){var d=a.call(this)||this;return d.beginFill(b||0),d.alpha=c||.5,d.drawRect(0,0,1e4,1e4),d}return __extends(b,a),b}(PIXI.Graphics);d.BackgroundDimmer=f;var g=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.beginFill(d,e),f.drawRect(0,0,b,c),f}return __extends(b,a),b}(PIXI.Graphics);d.BoundsFiller=g;var h=function(a){function b(b,c,d,e){var f=a.call(this)||this;return f.clip=b.getMovieClip(c),f.clip.loop=e,d&&f.clip.gotoAndPlay(0),f.addChild(f.clip),f}return __extends(b,a),b}(PIXI.Container);d.MovieClipWrapper=h;var i=function(a){function b(b,c){var d=a.call(this)||this;return d.texture=b.getPIXITexture(c),d}return __extends(b,a),b}(PIXI.Sprite);d.Image=i;var j=function(a){function b(b,c,d,f){var g=a.call(this)||this;return g._state=!0,g._spriteOn=new PIXI.Sprite(b.getPIXITexture(c)),g.addChild(g._spriteOn),g._spriteOff=new PIXI.Sprite(b.getPIXITexture(d)),g.addChild(g._spriteOff),g.setState(f),g.interactive=!0,g.buttonMode=!0,g.on(e.getTouchEvent(),g.onPress.bind(g)),g.on(e.getClickEvent(),g.onPress.bind(g)),g}return __extends(b,a),b.prototype.getState=function(){return this._state},b.prototype.onPress=function(){this.setState(!this._state)},b.prototype.setState=function(a){this._state=a,this._spriteOn.visible=a,this._spriteOff.visible=!a},b}(PIXI.Container);d.Toggle=j;var k=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.setText=function(a,b){e.text=a,e.updateText(),e.anchor.set(.5,.5),e.pivot.x=0},c=a.Core.Lang.getPhrase(c),e.once("added",function(){return e.setText(c)}),e}return __extends(c,b),c}(PIXI.Text);d.StandardText=k;var l=function(a){function b(b,c){var d=a.call(this)||this;return d._chars=[],d._assets=b,d.once(e.ON_CREATE,function(a){this.setup(a),c&&this.setText(c)}.bind(d)),d}return __extends(b,a),b.prototype.setText=function(a){this.cacheAsBitmap=!1,this.visible=!0;var b=0,c=0,d=0,e="";this._chars.forEach(function(f){var g=a.substr(b++,1);if(g){if(this._params.mappings[g]){if(f.texture=this._assets.getPIXITexture(this._params.mappings[g]),f.x=c,this._params.fixed_width){var h=this._params.fixed_width;"."!=g&&","!=g||(f.x-=25,h=40),c+=h,d+=h}else{var i=f.width+(this._params.kerning||0);c+=i,d+=i}this.addChild(f)}e=g}else this.removeChild(f)}.bind(this)),this.cacheAsBitmap=!0,this.pivot.x=d/2.5},b.prototype.setup=function(a){this._params=a.params;for(var b=0;b<this._params.max_chars;b++){var c=new PIXI.Sprite;c.anchor.x=.5,this._chars.push(c)}},b}(PIXI.Container);d.SpriteText=l;var m=function(b){function c(c,d){var e=this;return c=a.Core.Lang.getPhrase(c),e=b.call(this,c,d)||this,e.once(a.Core.Events.ON_CREATE,function(){this._position=this.position.clone(),this.setText(c)}.bind(e)),e}return __extends(c,b),c.prototype.setText=function(a){this.text=a,this.updateText(),this.x=this._position.x-this.textWidth/2,this.y=this._position.y-this.textHeight/2},c}(PIXI.extras.BitmapText);d.BitmapText=m;var n=function(d){function f(c,f,g,h,i,j){var k=d.call(this)||this;return k._assets=c,k._textureIdUp=f,k._textureIdDown=g,k._uses=i||9999999,k._buttonImage=c.getPIXISprite(f),k.addChild(k._buttonImage),k.buttonMode=!0,k.interactive=!0,k.on(e.pressup(),k.onPress.bind(k)),k.on(e.getTouchEvent(),k.onPress.bind(k)),h&&(j=j||{},j.align="center",k._label=new PIXI.Text(b.Lang.getPhrase(h),j),k.addChild(k._label),k._label.anchor.x=.5,k._label.anchor.y=.5,k._label.pivot.x=k._label.width/2,k._label.pivot.y=k._label.height/2,k._label.x=k.width/2,k._label.y=k.height/2),k.on(a.Core.Events.ON_DESTROY,function(){this.off(e.pressup(),this.onPress),this.off(e.getClickEvent(),this.onPress)}.bind(k)),k}return __extends(f,d),f.prototype.onPress=function(){this.interactive=!1;var b={x:this.scale.x,y:this.scale.y};this.scale.x=.9*b.x,this.scale.y=.9*b.y,this._textureIdDown&&(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdDown)),a.Core.Time.juggler.setTimeout(function(){this.scale=b,this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp),c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name),this._uses--,this._uses>0?this.interactive=!0:this.interactive=!1}.bind(this),150)},f}(PIXI.Container);d.SpriteButton=n}(c.UI||(c.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){!function(b){function c(b,c,d,e){c=Number(c)||0,d=Number(d)||.25,e=Number(e||5);var f=b.scale.x,g=b.scale.y;b.visible=!1,b.scale.x=.7*f,b.scale.y=.7*g,a.Core.Time.juggler.setTimeout(function(){b.visible=!0,TweenLite.to(b.scale,d,{x:f,y:g,ease:Back.easeOut.config(e)})},c)}function d(b,c,d,e){c=Number(c)||0,d=Number(d)||.4,e=Number(e)||1.3;var f=b.scale.x,g=b.scale.y;b.scale.x=e,b.scale.y=e,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b.scale,d,{x:f,y:g,ease:Cubic.easeOut})},c)}function e(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=0,b.visible=!0,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1})},c)}function f(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=1,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:0,onComplete:function(){b.visible=!1}})},c)}b.popOut=c,b.slam=d,b.fadeIn=e,b.fadeOut=f}(b.FX||(b.FX={}))}(b.UI||(b.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(c){var d=function(){function b(a){this.speed=100,this.totalLength=0,this._waypoints=[],this.id=a}return b.prototype.addWaypoint=function(a){var b={x:a.x,y:a.y};this._waypoints.push(b),this.calcPathLength(),b.distance=this.totalLength},b.prototype.getPosition=function(b){for(var c,d=a.Core.Maths.normalize(b/1e3*this.speed,this.totalLength),e=this._waypoints.length-2;e>=0;e--){var f=this._waypoints[e];if(d>f.distance){var g=this._waypoints[e+1],h=g.distance-f.distance,i=d-f.distance,j=i/h;c=new PIXI.Point(a.Core.Maths.lerp(f.x,g.x,j),a.Core.Maths.lerp(f.y,g.y,j));break}}return c},b.prototype.calcPathLength=function(){this.totalLength=0;for(var b=this._waypoints[0],c=0;c<this._waypoints.length;c++)this.totalLength+=a.Core.Maths.calcDistance(b,this._waypoints[c]),b=this._waypoints[c]},b}();c.ParticlePath=d;var e=function(){function c(a){this.emitDuration=-1,this.emitRate=2,this.lifetime={min:1e3,max:3e3},this.scale={min:1,max:1},this.rotation={min:0,max:360},this.gravity={x:0,y:8},this.speed={min:20,max:40},this.spin={min:0,max:0},this.shrinkFactor=0,this.drag=0,this.acceleration=0,this.direction={min:0,max:360},this.maxParticles=10,this.turbulence={min:0,max:0},this.blendMode=PIXI.BLEND_MODES.NORMAL,this.doRandomTextures=!1,this._textures=[],this._clips=[],this._paths={},a=a||{},this.emitDuration=a.emitDuration||1e3,this.emitRate=a.emitRate||1,this.lifetime=a.lifetime||{min:1e3,max:1e3},this.scale=a.scale||{min:1,max:1},this.rotation=a.rotation||{min:0,max:0},this.gravity=a.gravity||{x:0,y:0},this.speed=a.speed||{min:10,max:10},this.spin=a.spin||{min:0,max:0},this.shrinkFactor=a.shrinkFactor||0,this.drag=a.drag||0,this.direction=a.direction||{min:0,max:360},this.maxParticles=a.maxParticles||10,this.turbulence=a.turbulence||{min:0,max:0},this.blendMode=a.blendMode||PIXI.BLEND_MODES.NORMAL,this.autoStart=a.autoStart||!1,this.textures=a.textures,this.movieclips=a.movieclips,this.paths=a.paths,this.doRandomTextures=a.random_textures,this.touchCallback=a.touch_callback,this.acceleration=a.acceleration||0}return c.prototype.createPath=function(a){var b=new d(a);return this._paths[a]=b,b},c.prototype.setPath=function(a){this._currentPath=this._paths[a]},c.prototype.clearCurrentPath=function(){this._currentPath=null},c.prototype.getNextPosition=function(a){return this._currentPath?this._currentPath.getPosition(a):new PIXI.Point(0,0)},c.prototype.getNextTexture=function(){return this.doRandomTextures?this._textures[b.Maths.getRandomRange(0,this._textures.length-1,!0)]:(this._textures.unshift(this._textures.pop()),this._textures[0])},c.prototype.getNextMovieClip=function(){return this._clips.unshift(this._clips.pop()),this._clips[0]},c.prototype.addTexture=function(a){this._textures.push(a)},c.prototype.addMovieClip=function(b,c){for(var d=0;d<this.maxParticles;d++){var e=b.getMovieClip(c,!0,null,!0);e.loop=!0,this._clips.push(e)}this._clips=a.Core.Utils.shuffleArray(this._clips)},c}();c.ParticleSetup=e;var f=function(b){function c(a,c){var d=b.call(this)||this;return d.isActive=!1,d._dir={x:0,y:0},d._g={x:0,y:0},d._spin=0,d._shrink=0,d._container=a,d._juggler=c,d}return __extends(c,b),c.prototype.onUpdate=function(a){var b=.001*a;this.x+=this._speed*this._dir.x*b,this.y+=this._speed*this._dir.y*b,this._speed+=this._acceleration*b,this._speed-=this._drag*b,this._g.x+=this._gravity.x*b,this._g.y+=this._gravity.y*b,this.x+=this._g.x*b,this.y+=this._g.y*b,this.rotation+=this._spin*b,this._life-=a,this._life<=0&&this.kill(),this.scale.x-=this._shrink*b,this.scale.y-=this._shrink*b,this.scale.x<.01&&this.kill(),this.x+=Math.sin(this.rotation)*this._turbulence*b,this.y-=Math.cos(this.rotation)*this._turbulence*b},c.prototype.start=function(b,c){this._onDead=b,this.isActive=!0,this._container.addChild(this),this._juggler.add(this),this.blendMode=c.blendMode,this._clip&&(this.removeChild(this._clip),this._clip=null);var d=c.getNextTexture();this._clip=c.getNextMovieClip(),d?this.texture=d:(this.addChild(this._clip),this._clip.play()),this.anchor.x=.5,this.anchor.y=.5;var e=a.Core.Maths.getRandomRange;this._shrink=c.shrinkFactor;var f=e(c.scale.min,c.scale.max);this.scale.x=f,this.scale.y=f,this._spin=e(c.spin.min,c.spin.max),this._life=e(c.lifetime.min,c.lifetime.max),this._direction=e(c.direction.min,c.direction.max),this._rotation=e(c.rotation.min,c.rotation.max),this._speed=e(c.speed.min,c.speed.max),this._shrink=c.shrinkFactor,this._drag=c.drag,this._gravity=c.gravity,this._dir={x:a.Core.Maths.Dsin(this._direction),y:-a.Core.Maths.Dcos(this._direction)},this._g={x:0,y:0},this._turbulence=e(c.turbulence.min,c.turbulence.max),this._acceleration=c.acceleration},c.prototype.kill=function(){this.isActive=!1,this._container.removeChild(this),this._juggler.remove(this),this._onDead(this)},c}(PIXI.Sprite);c.Particle=f;var g=function(b){function c(){var c=b.call(this)||this;return c.isActive=!1,c._particles=[],c._activeCount=0,c.interactive=!1,c.interactiveChildren=!1,c.once(a.Core.Events.ON_DESTROY,function(){this.stop()}.bind(c)),c.once(a.Core.Events.ON_CREATE,function(a,b){if(a&&a.params){var c=new e(a.params);if(c.movieclips&&c.movieclips.forEach(function(a){c.addMovieClip(b.getAssets(),a)}.bind(this)),c.textures&&c.textures.forEach(function(a){var d=b.getAssets().getPIXITexture(a);c.addTexture(d)}.bind(this)),c.paths){for(var d in c.paths)!function(a){var b=c.createPath(a),d=c.paths[a];b.speed=d.speed||10,d.waypoints.forEach(function(a){b.addWaypoint(new PIXI.Point(a.x,a.y))}),c.setPath(a)}(d)}this.init(c)}}.bind(c)),c}return __extends(c,b),c.prototype.init=function(b,c){this._setup=b,this._juggler=c||a.Core.Time.juggler;for(var d=0;d<this._setup.maxParticles;d++){var e=new f(this,this._juggler);this._particles.push(e)}this._setup.autoStart&&this.start()},c.prototype.setInteraction=function(a){this._touchCallback=a,a?(this.interactive=!0,this.interactiveChildren=!0,this._particles.forEach(function(a){a.interactive=!0,a.on("mousedown",this._touchCallback)}.bind(this))):(this.interactive=!1,this.interactiveChildren=!1,this._particles.forEach(function(a){a.interactive=!1,a.off("mousedown",this._touchCallback)}.bind(this)))},c.prototype.start=function(){this.isActive||(this.isActive=!0,this._activeCount=0,this._time=0,this._juggler.add(this),this._emissionStopDelay=this._juggler.setTimeout(function(){this.stop()}.bind(this),this._setup.emitDuration),this._emissionDelay=this._juggler.setInterval(this.emitParticles.bind(this),1e3/this._setup.emitRate))},c.prototype.stop=function(){this.isActive&&(this._juggler.remove(this),this._emissionDelay.stop(),this._emissionStopDelay.stop(),this.isActive=!1)},c.prototype.onUpdate=function(a){this._time+=a},c.prototype.emitParticles=function(){var a=this.getParticle();a&&(a.position=this._setup.getNextPosition(this._time)||a.position,this._activeCount++,a.start(this.onParticleDied.bind(this),this._setup))},c.prototype.getParticle=function(){for(var a=null,b=0;b<this._particles.length;b++)if(!this._particles[b].isActive){a=this._particles[b];break}return a},c.prototype.onParticleDied=function(a){0==--this._activeCount&&this.stop()},c}(PIXI.Container);c.Particles=g}(c.FX||(c.FX={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(a,b,d){var f=e.getReference(a.platform);c.server=new f(a,b,d)}var e=a.Core.Utils,f=a.Core.Time;c.RESPONSE_ERROR="response_error",c.RESPONSE_ALERT="response_alert",c.RESPONSE_OPEN="response_open",c.BASE_GAME_BROKEN_RESPONSE_OPEN="base_broke_response_open",c.RESPONSE_AUTH="response_auth",c.RESPONSE_RESULTS="response_results_ready",c.RESPONSE_STATE="response_state",c.RESPONSE_USER="response_user_data",c.RESPIN_EVENT="respin_trigger",c.REQUEST_AUTH="request_auth",c.GAME_LAUNCH_REQUEST="request_game_launch",c.GAME_CONFIG_REQUEST="request_game_config",c.GAME_INITIALIZE_REQUEST="request_game_initializeAfterConfig",c.REQUEST_USER="request_user",c.REQUEST_TRANSACTIONS="request_transactions",c.REQUEST_OPEN="request_open",c.AUTOPLAY_ACTIVATE_REQUEST="autoplay_activation__request",c.ASSETS_LOAD_COMPLETE="assets_load__complete",c.ASSETS_LOAD_COMPLETES="assets_load__completes",c.END_GAME_REQUEST="end_game_request",c.SETTLE_GAME_REQUEST="settle_game_request",c.LEANDER_SOUND_STATUS="sound_status_leander",c.REQUEST_RESULTS="request_results",c.REQUEST_PRELOAD_STARTED="request_preload_started",c.REQUEST_PRELOAD_END="request_preload_end",c.LEANDER_REQUEST_PRELOAD_UPDATE="request_preload_update",c.REQUEST_PROGRESS_UPDATED="request_progress_updated",c.betLevel=1,c.unfinishedDataBool=!1,c.varForDisableSpinStop=!1,c.varForEnableSpinStop=!0,c.varBigWinAvailable=!1,c.varAutoBtnEnable=!1,c.TotalFreeSpinsAwarded=0,c.ActualFreeSpinsRemain=0,c.count=0,c.varTotalCount=!0;var g=function(){function a(){}return a.SET_BETTING_PARAMS="operator_set_betting_params",a}();c.OperatorEvents=g;var h=function(){function a(a,b,c){this._creationDate=(new Date).getTime(),this._connection=a,this._juggler=f.juggler,this._target=b}return a}();c.InterfaceBase=h;var i=function(){function a(b){var c=this;this._response=b,this.getCreditValues=function(){return c._response.betConfig.creditValues},this.getDefaultBetLevel=function(){return c._response.betConfig.defaultBetState.bet_level},this.getDefaultCoinLevel=function(){return c._response.betConfig.defaultBetState.coin_level},this.getMaxBetLevel=function(){return c._response.betConfig.maxBetLevel},this.getWaysCredits=function(){return c._response.betConfig.waysCredits},a.current=this}return a}();c.ResponseConfig=i;var j=function(){function a(b){this._response=b,a.current=this}return a.prototype.isFreeplay=function(){return this._response.is_freeplay},a.prototype.getLastGameState=function(){return this._response.last_state||{}},a.prototype.getLastGameId=function(){return this.getLastGameState().game},a.prototype.getLanguageData=function(){return this._response.lang},a.prototype.getGameProfile=function(){return this._response.profile},a.prototype.getSessionId=function(){return this._response.session},a.prototype.wasLastRoundAcknowledged=function(){return this._response.last_round_acknowledged},a.prototype.getPlayerNickname=function(){return this._response.player.nickname||"Player"},a.prototype.getPlayerId=function(){return this._response.player.id||-1},a.prototype.getPlayerCurrency=function(){return this._response.player.currency.toUpperCase()},a.prototype.getPrefixCurrency=function(){return this._response.player.prefixCurrency},a.prototype.getSuffixCurrency=function(){return this._response.player.suffixCurrency},a.prototype.getCurrencyDecimalPlaces=function(){return this._response.player.currencyDecimalPlaces},a.prototype.getPlayerLanguage=function(){return this._response.player.lang},a}();c.ResponseAuth=j;var k=function(){function a(b){this._response=b,a.current=this}return a.prototype.getGameId=function(){return this._response.game},a.prototype.getGameState=function(){return this._response.state||{}},a.prototype.getBetState=function(){return this._response.bet_state},a}();c.ResponseOpen=k;var l=function(){function a(b){this._response=b,a.current=this}return a.prototype.getRaw=function(){return this._response},a.prototype.getNextGameId=function(){return this._response.next_game},a.prototype.getLastCashBet=function(){return this._response.total_bet_cash||0},a.prototype.getLastCashWin=function(){return this._response.total_win_cash||0},a.prototype.getGameId=function(){return this._response.game},a.prototype.areGamesPending=function(){return this._response.games_pending},a.prototype.isNextGame=function(a){return!!this.getNextGameId()&&this.getNextGameId().indexOf(a)>-1},a.prototype.isGame=function(a){return!!this.getGameId()&&this.getGameId().indexOf(a)>-1},a.prototype.getEvaluatedResults=function(){return this._response.eval},a.prototype.getState=function(){return this._response.state||{}},a.prototype.isComplete=function(){return this._response.state.is_complete||!1},a.prototype.getRoundId=function(){return this._response.round_id},a}();c.ResponseResults=l;var m=function(){function a(b){this._response=b,a.current=this}return a.prototype.getRaw=function(){return this._response},a.prototype.getNextGameId=function(){return this._response.next_game},a.prototype.getLastCashBet=function(){return this._response.total_bet_cash||0},a.prototype.getLastCashWin=function(){return this._response.total_win_cash||0},a.prototype.getGameId=function(){return this._response.game},a.prototype.areGamesPending=function(){return this._response.games_pending},a.prototype.isNextGame=function(a){return!!this.getNextGameId()&&this.getNextGameId().indexOf(a)>-1},a.prototype.isGame=function(a){return!!this.getGameId()&&this.getGameId().indexOf(a)>-1},a.prototype.getEvaluatedResults=function(){return this._response.eval},a.prototype.getState=function(){return this._response.state||{}},a.prototype.isComplete=function(){return this._response.state.is_complete||!1},a.prototype.getRoundId=function(){return this._response.round_id},a}();c.ResponseState=m;var n=function(){function a(b){this._response=b,this._response.stats=this._response.stats||{},a.current=this}return a.prototype.getCashLoss=function(){return this._response.cash_loss},a.prototype.getBalance=function(){return this._response.balance},a.prototype.setBalance=function(a){return this._response.balance=a},a.prototype.getBalanceFormatted=function(){return b.Currency.format(this._response.balance)},a.prototype.getSessionDuration=function(){return this._response.stats.session_duration},a.prototype.getSessionBetCount=function(){return this._response.stats.bet_count},a.prototype.getSessionTotalBetCash=function(){return this._response.stats.total_bet_cash},a.prototype.getSessionTotalWinCash=function(){return this._response.stats.total_win_cash},a.prototype.getSessionRTP=function(){return this._response.stats.rtp||0},a}();c.ResponseUser=n;var o=function(){function a(b){this._response=b,a.current=this}return a.prototype.getResponseData=function(){return this._response},a}();c.ResponseTransactions=o;var p=function(){function b(a){this._response=a,b.current=this}return b.prototype.getPlayerMessage=function(){return this._response.lang?a.Core.Lang.getPhrase(this._response.lang):a.Core.Lang.getPhrase("err_server_generic")},b.prototype.isFatal=function(){return this._response.fatal},b.prototype.getErrorObject=function(){return this._response.err},b.prototype.getErrorMessage=function(){return this._response.err?this._response.err.msg||"no error msg available":"no error object available"},b}();c.ResponseAlert=p;var q=function(){function a(){}return a.setTime=function(b){a.time.setTime(b)},a.getFormattedTime=function(){var b=new Date;return a.timeFormat.format(b)},a.time=new Date,a.timeFormat=Intl?Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"}):{format:function(a){var b=a.toLocaleTimeString();return b.substring(0,b.lastIndexOf(":"))}},a}();c.ServerTime=q,c.createInstance=d}(b.Server||(b.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){
var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Common.Server,e=a.Core.Environment,f=function(f){function g(c,g,h){var i=f.call(this,c,g,h)||this;return i._queue=[],i.counter=0,i.symbol=["W1","H1","H2","H3","L1","L2","L3","M1","B1"],i.symbolMap={0:"W1",1:"H1",2:"H2",3:"H3",4:"L1",5:"L2",6:"L3",7:"M1",8:"B1"},i.freeSpinData={spins:0,total:0,remain:0,freeSpinWin:0},i.isBaseGameBroken=!1,i.Socket=new WebSocket("wss://staging.reach-dev.com:445/rgs/endpoint"),i.Socket.onopen=function(a){},i.Socket.onerror=function(a){console.log("WebSocket Error "+a)},setInterval(function(){this.Socket.send("h")}.bind(i),1e4),i.launchVariables=a.Core.Utils.getUrlVars(),a.Common.Server.UKGC=!0,a.Common.Server.varForDisableSpin=!1,a.Common.Server.StopCallonFreeSpin=!1,b.ApplicationBase.instance.on("force_result",function(a){this._forceResult=a}.bind(i),i),i._target.on(d.REQUEST_AUTH,function(a){this.sendInit("AUTH",{action:"init"})}.bind(i)),i._target.on(d.GAME_LAUNCH_REQUEST,function(a){this.sendGameLaunch("LAUNCH",{game_session:a})}.bind(i)),i._target.on(d.GAME_CONFIG_REQUEST,function(a){this.sendConfigRequest("CONFIG",{game_name:e.launchVariables.gameId})}.bind(i)),i._target.on(d.GAME_INITIALIZE_REQUEST,function(a){this.sendInitializeConfigRequest("INITIALIZE",{game_name:e.launchVariables.gameId})}.bind(i)),i._target.on(d.REQUEST_OPEN,function(c){c={USER:{balance:a.Common.Server.gameBalance},STATE:{},OPEN:{game:"$BASE",bet_state:{bet_level:1,coin_level:1},state:{game:"$BASE",is_complete:!0},persisted_progress:[]}},this.prevResponse&&(this.prevResponse.RESULTS.game!=this.prevResponse.RESULTS.next_game&&this.prevResponse.RESULTS.next_game_state?(c.OPEN.state=this.prevResponse.RESULTS.next_game_state,c.OPEN.game=this.prevResponse.RESULTS.next_game,c.OPEN.persisted_progress.push(this.prevResponse.RESULTS.state)):"$BASE"!=this.prevResponse.RESULTS.next_game?(c.OPEN.game=this.prevResponse.RESULTS.next_game,c.OPEN.state=this.prevResponse.RESULTS.state,"$FREE_SPINS"==this.prevResponse.RESULTS.next_game&&(c.OPEN.state.game="$FREE_SPINS")):this.prevResponse.RESULTS.next_game==this.prevResponse.RESULTS.game&&"$BASE"===this.prevResponse.RESULTS.game&&(c.OPEN.game=this.prevResponse.RESULTS.next_game,c.OPEN.state=this.prevResponse.RESULTS.state));a.Common.Server.freegameFlag;1==this.isBaseGameBroken?(a.Common.ApplicationBase.instance.once(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,function(){var a=this.prevResponse.RESULTS.next_game;this.emit(d.RESPONSE_USER,new d.ResponseUser(this.prevResponse.USER),a),a&&"$BASE"===a&&(console.log("settle broken"),this.parseMessage(void 0,"settle",g),b.ApplicationBase.instance.emit(d.END_GAME_REQUEST))}),this._target.emit(d.BASE_GAME_BROKEN_RESPONSE_OPEN,new d.ResponseOpen(c.OPEN),new d.ResponseResults(this.prevResponse.RESULTS)),this.isBaseGameBroken=!1):this._target.emit(d.RESPONSE_OPEN,new d.ResponseOpen(c.OPEN)),this._isPendingOpen=!1}.bind(i)),i._target.on(d.REQUEST_USER,function(b){var c=a.Common.Server.freegameFlag?"$FREE_SPINS":"$BASE";b={USER:{balance:a.Common.Server.gameBalance},time:0},this._target.emit(d.RESPONSE_USER,new d.ResponseUser(b.USER),c)}.bind(i)),i._target.on(d.END_GAME_REQUEST,function(a){var b={type:"end"};this.Socket.send(JSON.stringify(b)),this.Socket.onmessage=function(a){console.log("Server: "+a.data);var b=JSON.parse(a.data);this.endResponse(b)}.bind(this)}.bind(i)),i._target.on(d.REQUEST_RESULTS,function(b){b=b||{},b.force=this._forceResult,0==this._forceResult&&(b.force=void 0);var c=a.Slots.SettingsPages.BettingSetup.coinValues,d=(a.Slots.SettingsPages.BettingSetup.currentBetLevel,a.Slots.SettingsPages.BettingSetup.currentCoinLevel),e=a.Slots.SettingsPages.BettingSetup.wayCredits,f=1*c[d-1],g=c.indexOf(f);if(f/=100,void 0!==b.stake&&(b.stake.amount=f/20),a.Common.Server.completeGameBet=f,a.Common.Server.gameBetIndexValue=g,"ERROR"==this._forceResult)throw"An error has occurred";var h="spin";a.Common.Server.freegameFlag?(this._target.emit(a.Common.GameEvents.UPDATE_BALACE,a.Common.Server.gameBalanceForFreeSpins/100),h="freespin"):this._target.emit(a.Common.GameEvents.UPDATE_BALACE,a.Common.Server.gameBalance/100-a.Common.Server.completeGameBet*e);var i=setInterval(function(){this._isPendingOpen?console.log("PENDING!"):(clearInterval(i),this.sendSpin("RESULTS",{action:h,stake:f,sessionId:a.Common.Server.sessionId,cheat:b.force}))}.bind(this),50);this._forceResult=!1}.bind(i)),h(),i}return __extends(g,f),g.prototype.parseMessage=function(e,f,g){var h=this;switch(f){case"settle":e=this.parseSettleResponse(e);break;case"init":e=this.parseAuthResponse(e);break;case"spin":e=this.parseSpinResponse(e);break;case"freeSpin":e=this.parseFreeSpinResponse(e)}if(e.ALERT){var i=new d.ResponseAlert(e.ALERT);return void this._target.emit(d.RESPONSE_ALERT,i)}if(e.AUTH&&(this._auth=new d.ResponseAuth(e.AUTH),this._target.emit(d.RESPONSE_AUTH,this._auth)),e.CONFIG){var j=new d.ResponseConfig(e.CONFIG);b.ApplicationBase.instance.emit(c.OperatorEvents.SET_BETTING_PARAMS,j)}e.OPEN&&(this._target.emit(d.RESPONSE_OPEN,new d.ResponseOpen(e.OPEN)),this._isPendingOpen=!1),e.RESULTS&&(this.prevResponse=e,this._target.emit(d.RESPONSE_RESULTS,new d.ResponseResults(e.RESULTS))),e.USER&&(e.RESULTS?b.ApplicationBase.instance.once(a.Slots.WinManager.GAME_FINISHED,function(){h.previousResponse=e;var b=h.previousResponse.RESULTS.next_game;h._target.emit(d.RESPONSE_USER,new d.ResponseUser(e.USER),b),!0===a.Common.Server.forGameFinishedRequest&&(h._target.emit(d.END_GAME_REQUEST),a.Common.Server.forGameFinishedRequest=!1),console.log("winPresentationEnd")}):this._target.emit(d.RESPONSE_USER,new d.ResponseUser(e.USER))),e.STATE&&this._target.emit(d.RESPONSE_STATE,new d.ResponseState(e.STATE)),void 0!==e.gameSessionToken&&b.ApplicationBase.instance.emit(d.GAME_LAUNCH_REQUEST,e.gameSessionToken)},g.prototype.parseMessageForConfigRequest=function(a){setTimeout(function(){b.ApplicationBase.instance.emit(d.GAME_CONFIG_REQUEST)},3e3)},g.prototype.sendInit=function(a,b){var c=this,d=this.parseMessage.bind(this);"OPEN"==a&&(this._isPendingOpen=!0),this._auth&&(b.playerId=this._auth.getPlayerId());var e={type:"init",freeplay:"false",playToken:"testticket-testx6",vendor:"default",requestId:"",game:{code:"jrs_006_lks",version:"1.0.0"},userAgent:"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/76.0.3809.87 safari/537.36",launchParams:{playToken:"testticket-testx6",operator:"mock",vendor:"default",lang:"en",isFreeplay:"false",casinoId:"test",partnerid:"10"}};c.Socket.send(JSON.stringify(e)),c.Socket.onmessage=function(a){console.log("Server: "+a.data);var b=JSON.parse(a.data);b=[].concat(b),b[0].error?d(b[0],"alert"):b.forEach(function(a){d(a,"init")})}},g.prototype.showAlertMessage=function(a){return{ALERT:{lang:""+a.error.mes,err:{msg:"test"},fatal:0==a.error.sev}}},g.prototype.socketerror=function(){var b={lang:""+a.Core.Lang.getPhrase("connection_lost"),err:{msg:"test"},fatal:!0},c=new d.ResponseAlert(b);this._target.emit(d.RESPONSE_ALERT,c)},g.prototype.sendSpin=function(b,c){var d=this,e=this.parseMessage.bind(this);"OPEN"==b&&(this._isPendingOpen=!0),this._auth;var f;a.Common.Server.freegameFlag?(f={type:"update",subType:"hit"},d.Socket&&1==d.Socket.readyState?(d.Socket.send(JSON.stringify(f)),d.Socket.onmessage=function(a){console.log("Server: "+a.data);var b=JSON.parse(a.data);b=[].concat(b),b[0].error?e(b[0],"alert"):b.forEach(function(a){e(a,"freeSpin")})},d.Socket.onerror=function(a){console.log("surakk",a)}):this.socketerror()):(a.Common.Server.endResponseBoolean=void 0,f={type:"start",promotions:[],bet:{stake:{cv:a.Common.Server.gameBetIndexValue,cl:a.Common.Server.gameBetIndexValue}}},d.Socket&&1==d.Socket.readyState?(d.Socket.send(JSON.stringify(f)),d.Socket.onmessage=function(a){var b="spin";console.log("Server: "+a.data);var c=JSON.parse(a.data);c=[].concat(c),c[0].error&&(b="alert"),c.forEach(function(a){e(a,b)})},d.Socket.onerror=function(a){console.log("surakk",a)}):this.socketerror())},g.prototype.parseSettleResponse=function(b){a.Common.Server.server.freespins=0,a.Common.Server.gameBalance=100*b.cust.pbal,a.Common.Server.gameBalanceForFreeSpins=100*b.cust.bal,a.Common.Server.isAutoPlay||a.Common.Server.freegameFlag||(a.Common.Server.server.spinButtonBoolean=!1);var c=b[1],d=b[0];if(a.Common.Server.freegameFlag||this._target.emit(a.Common.GameEvents.UPDATE_BALACE,d),a.Common.Server.gameBalanceForFreeSpins=100*b.cust.bal,void 0!=c.freePlaysData&&void 0!=c.freePlaysData.promotionPlaysRemaining&&0===c.freePlaysData.promotionPlaysRemaining){if(a.Common.Server.promotionalFreePlaysBoolean=!1,0!=a.Common.Server.completeGameBet)for(var e=0;e<this.param.betPerLine.length;e++)a.Common.Server.completeGameBet===20*this.param.betPerLine[e]&&(a.Common.Server.betLevel=e+1);else a.Common.Server.betLevel=1;a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.PROMOTIONAL_BUTTON_ENABLE),a.Common.ApplicationBase.instance.emit(a.Slots.Aperture.PROMOTIONAL_PANEL_CHANGE),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{coinLevel:a.Common.Server.betLevel,betLevel:1})}return c},g.prototype.parseAuthResponse=function(b){var c="$BASE";"start"===b.game.view.next_request&&(c="$BASE"),a.Common.Server.free_game_name=void 0,a.Common.Server.varForDisableSpin=!0,a.Common.Server.realitySessionTimeAsPerServerBoolean=!0,a.Common.Server.autoPlayList=[10,25,50,75,100,"∞"],a.Common.Server.payTable=b.game.view.paytable,a.Common.Server.promotionalFreePlaysBoolean=!1;for(var d=0;d<b.game.view.stakes.length;d++)b.game.view.stakes[d]=100*b.game.view.stakes[d];var e={game:c,is_complete:"$BASE"===c,total_win_cash:0,spin_pending:"$BASE"!==c};a.Common.Server.betLevel=b.game.view.stakeIndex+1,this.Prefix=decodeURIComponent(b.cust.curr.maj);var f=b.game.view.stakes;a.Common.Server.gameBalance=100*b.cust.pbal,a.Common.Server.gameBalanceForFreeSpins=100*b.cust.bal;var g={AUTH:{player:{currency:b.cust.curr.code,prefixCurrency:this.Prefix,suffixCurrency:b.cust.curr.min,currencyDecimalPlaces:b.cust.curr.dp,localeId:"en",lang:"eng",nickname:"TestUser13",id:166},session:null,is_freeplay:a.Common.Server.promotionalFreePlaysBoolean},USER:{balance:100*b.cust.pbal},CONFIG:{betConfig:{maxBetLevel:1,waysCredits:1,creditValues:f,defaultBetState:{bet_level:1,coin_level:a.Common.Server.betLevel}},autoSpinOptions:a.Common.Server.autoPlayList},STATE:{game:c,bet_state:{bet_level:1,coin_level:a.Common.Server.betLevel},state:e}};return console.log("initialization data ",g),g},g.prototype.getSymbolGrid=function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=["H2"],f=0;f<a[d].length;f++)e.push(this.symbolMap[a[d][f][0]]);e.push("L3"),c.push(e)}return c},g.prototype.changeScatter=function(a){},g.prototype.endResponse=function(b){a.Common.Server.endResponseBoolean=!0,a.Common.Server.gameBalance=100*b.cust.pbal,a.Common.Server.freeSpinTotalBalance=100*b.game.view.win_amount,a.Common.Server.freegameFlag||void 0!=a.Common.Server.freeSpinPlaying||this._target.emit(a.Common.GameEvents.UPDATE_BALACE,a.Common.Server.gameBalance/100)},g.prototype.parseSpinResponse=function(b){if(a.Common.Server.winend=void 0,a.Common.Server.free_game_name=void 0,a.Common.Server.freeSpinPlaying=void 0,a.Common.Server.varForDisableSpin=!1,a.Common.Server.varAutoBtnEnable=!1,a.Common.Server.gameBalance=100*b.cust.pbal,a.Common.Server.gameResponse=b,b.game.view.update_level>0)switch(a.Common.Server.free_game_name=b.game.view.update_level,b.game.view.update_level){case 1:a.Common.Server.freeGameFeature="ontilt";break;case 2:a.Common.Server.freeGameFeature="multiplier";break;case 3:a.Common.Server.freeGameFeature="rapid"}this.setFreeSpinData(0,0,0);var c="$BASE";"update"===b.game.view.next_request&&(a.Common.Server.freegameFlag=!0,c="$FREE_SPINS");var d,e=[],f="",g=[];if(g=this.getMysteryOffsets(b.game.view.mystery),d=this.getReplacementSymbolId(b.game.view.reels),f=void 0!=b.game.view.ms_type?b.game.view.ms_type:"",g.sort(function(a,b){return a-b}),a.Common.Server.freegameFlag){var h=void 0;switch(b.game.view.update_level){case 3:h=8;break;case 1:h=12;break;case 2:h=10}this.setFreeSpinData(h,h,0)}return a.Common.Server.month="",b.game.view.win_amount>=0&&(e=this.getWinningDetails(b.game.view.winlines,b,"")),this.getResponseData(b,a.Common.Server.completeGameBet,"$BASE",c,f,g,e,"",d)},g.prototype.parseFreeSpinResponse=function(b){var d=[],e=[];b.game.view.freespin_count>1&&(a.Common.Server.varForDisableSpin=!1),a.Common.Server.freeSpinPlaying=!0,a.Common.Server.gameBalance=100*b.cust.pbal,this.freeSpinData.spins++,this.counter++,this.freeSpinData.total=b.game.view.freespin_count,this.freeSpinData.remain=b.game.view.freespin_count,a.Common.Server.remain=b.game.view.freespin_count,c.varTotalCount&&(a.Common.Server.TotalFreeSpinsAwarded=b.game.view.freespin_count+1,c.varTotalCount=!1),this.freeSpinData.remain!=a.Common.Server.TotalFreeSpinsAwarded-this.counter&&(a.Common.Server.ActualFreeSpinsRemain=a.Common.Server.TotalFreeSpinsAwarded-this.counter,a.Common.Server.retrigger=this.freeSpinData.remain-a.Common.Server.ActualFreeSpinsRemain,a.Common.Server.TotalFreeSpinsAwarded+=a.Common.Server.retrigger),this.setFreeSpinData(b.game.view.freespin_count,b.game.view.freespin_count,b.game.view.freespin_win_total);var f="$FREE_SPINS";return e=e.sort(),b.game.view.win_amount>=0&&(d=this.getWinningDetails(b.game.view.winlines,!1,void 0)),0===b.game.view.freespin_count&&(f="$BASE",a.Common.Server.freegameFlag=!1),e.sort(function(a,b){return a-b}),this.getResponseData(b,a.Common.Server.completeGameBet,"$FREE_SPINS",f,"",e,d,c.month)},g.prototype.getWinningDetails=function(b,c,d){var e=[],f=[];if(void 0!=b&&b.length>0&&void 0==a.Common.Server.free_game_name||1!=a.Common.Server.free_game_name)for(var g=0;g<b.length;g++){f=[];for(var h=0;h<b[g].winline.length;h++){var i=[],j=b[g].winline[h];i.push(3*h+j+1),f.push(i)}var k=f;console.log("Match",k),c&&"$SCATTER",e.push({symbol:this.symbol[b[g].symbol],credits:100*b[g].win,oak:b[g].symbol_count,positions:k,type:"$LINE",cash:100*b[g].win,line:b[g].index+1,feature:8==b[g].symbol?"$FREE_SPINS":null}),3==b[g].symbol_count&&(a.Common.Server.server.winlength=b[g].symbol_count)}else if(void 0!=b&&b.length>0&&1==a.Common.Server.free_game_name&&this.counter>0)for(var g=0;g<b.length;g++){f=[];for(var h=0;h<b[g].winline.length;h++){var i=[],j=b[g].winline[h];i.push(3*h+j+1),f.push(i)}var k=f;console.log("Match",k),c&&"$SCATTER",e.push({symbol:this.symbol[b[g].symbol],credits:100*b[g].win,oak:b[g].symbol_count,positions:k,type:"$LINE",cash:100*b[g].win,line:b[g].index+1,feature:8==b[g].symbol?"$FREE_SPINS":null}),3==b[g].symbol_count&&(a.Common.Server.server.winlength=b[g].symbol_count)}return e.length>0?e:null},g.prototype.getMysteryOffsets=function(a){var b=[],c=[];if(void 0!=a)for(var d=0;d<a.length;d++)c.push(a[d]),b.push(3*c[d][0]+c[d][1]);return b},g.prototype.getReplacementSymbolId=function(a){var b,c=[];if(void 0!=a)for(var d=0;d<a.length;d++)for(var e=0;e<a.length;e++)c.push(a[d][e]),7==a[d][e][0]&&(b=this.symbolMap[a[d][e][1]]);return b},g.prototype.getResponseData=function(b,c,d,e,f,g,h,i,j){return{RESULTS:{eval:{aperture:this.getSymbolGrid(b.game.view.reels,i),multiplier:1,freeSpinsCount:0,gameData:b.game.view.mystery,wins:{credits:100*b.game.view.win_amount,multiplier:1,wildMultiplier:1,cash:100*b.game.view.win_amount,detail:h}},gameID:a.Common.Server.sessionId,game:d,games_pending:!1,next_game:e,next_game_state:d!=e?this.getNextGameState(d,e,i):null,total_bet_cash:c,total_win_cash:100*b.game.view.win_amount,state:this.getGameState(d,e,b,f,g,i,j),balance_after_bet:100*b.cust.pbal,balance:100*b.cust.pbal,persisted_progress:null},USER:{balance:100*b.cust.pbal},TIME:null}},g.prototype.getNextGameState=function(a,b,c){var d={game:b,rounds:0,is_complete:!1,month:c,total_win_cash:"$FREE_SPINS"==b?this.freeSpinData.freeSpinWin:null,total:"$FREE_SPINS"==b?this.freeSpinData.total:null,remain:"$FREE_SPINS"==b?this.freeSpinData.remain:null,spins:this.freeSpinData.spins};return"$BASE"==b?null:d},g.prototype.getGameState=function(a,b,c,d,e,f,g){return{game:a,rounds:this.freeSpinData.spins,is_complete:"$BASE"==a||"$BASE"==b,featureName:d,featureOffset:e,replacemetSymbol:g,month:f,total_win_cash:"$BASE"==a?100*c.game.view.win_amount:100*this.freeSpinData.freeSpinWin,spins:this.freeSpinData.spins,total:this.freeSpinData.total,remain:this.freeSpinData.remain}},g.prototype.setFreeSpinData=function(a,b,c){this.freeSpinData={spins:0,total:a,remain:b,freeSpinWin:c}},g}(c.InterfaceBase);c.Interface_RGS=f}(b.Server||(b.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(c,e){if(b.prefixCurrency||b.suffixCurrency||(e=!0),b.formatAsCredits)return Math.floor(c/b.creditValue).toLocaleString(void 0,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:a.Common.Server.server.useGrouping});var f=c/100;if(e||!b.isoCode){for(var g="",h=f.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:a.Common.Server.server.useGrouping}),i=0;i<h.length;++i)160!==h.charCodeAt(i)&&(g+=h.charAt(i));return g}return b.prefixCurrency||b.suffixCurrency||b.localeId?(d(b.prefixCurrency)?"":b.prefixCurrency+" ")+f.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:b.currencyDecimalPlaces?b.currencyDecimalPlaces:2,maximumFractionDigits:b.currencyDecimalPlaces?b.currencyDecimalPlaces:2,useGrouping:a.Common.Server.server.useGrouping})+(d(b.suffixCurrency)?"":" "+b.suffixCurrency):f.toLocaleString(b.localeId,{currency:b.isoCode,style:"currency",minimumFractionDigits:2,maximumFractionDigits:2,useGrouping:a.Common.Server.server.useGrouping})}function d(a){return null==a||void 0==a||0===a.length}function e(a){var b=this.format(a);return"00"==b.split(".")[1]?b.split(".")[0]:b}b.creditValue=1;b.format=c,b.formatNoDp=e}(b.Currency||(b.Currency={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Events,d=a.Core.Utils.Queue,e=function(b){function e(){return null!==b&&b.apply(this,arguments)||this}return __extends(e,b),e.prototype.init=function(){e.instance=this;var b=new d;b.add(function(a){$.getJSON("./package.json?v=1.0.0",function(b){e.version=b.version,a()})}),b.add(function(b){a.Core.init(this.onAppInit.bind(this))}.bind(this)),b.start()},e.prototype.onAppInit=function(){a.Core.Events.coreEvents.on(c.ON_APP_RESIZE,this.onAppResize),a.Core.Events.coreEvents.on(c.ON_APP_LOSE_FOCUS,this.onAppLoseFocus),a.Core.Events.coreEvents.on(c.ON_APP_GET_FOCUS,this.onAppGetFocus),a.Core.Events.coreEvents.on(c.ON_APP_EXCEPTION,this.onAppException),a.Core.Events.coreEvents.on(c.ON_APP_EXIT,this.onAppExit)},e.prototype.onAppExit=function(){},e.prototype.onAppException=function(a){},e.prototype.onAppGetFocus=function(a,b){},e.prototype.onAppLoseFocus=function(a,b){},e.prototype.onAppResize=function(a,b){},e.saveAppValue=function(b,c){var d="reelfeel-gaming."+a.getConfig().server.game_id+"."+b;localStorage.setItem(d,c.toString())},e.getValues=function(b){var c="reelfeel-gaming."+a.getConfig().server.game_id+"."+b;return localStorage.getItem(c)},e.getAppValue=function(b,c){var d="reelfeel-gaming."+a.getConfig().server.game_id+"."+b,f=localStorage.getItem(d);return!f&&c&&(e.saveAppValue(b,c),f=localStorage.getItem(d)),"true"==f?f=!0:"false"==f&&(f=!1),f},e}(PIXI.utils.EventEmitter);b.ApplicationBase=e}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(c,g){f=g,e=c,e.code_mappings=e.code_mappings||{},e.target=e.target||window.parent,a.Core.Events.coreEvents.on(b.EVENT_IFRAME,d,this)}function d(a){if(f){var b=e.code_mappings[a]||a;console.log("iFrame -> ",e.target+", ",b,f),alert(a+"->"+b),e.target.postMessage(b,f)}}b.EVENT_IFRAME="iframe_event",b.IFRAME_USER_EXIT="IFRAME_USER_EXIT",b.IFRAME_INSUFFICIENT_FUNDS="IFRAME_INSUFFICIENT_FUNDS",b.IFRAME_SESSION_EXPIRED="IFRAME_SESSION_EXPIRED",b.IFRAME_ERROR="IFRAME_ERROR";var e,f;b.init=c}(b.IFrame||(b.IFrame={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a){d=a}function c(a){if(d.games[a])return new e(d.games[a]);throw"Game id doesn't exist in profile : "+a}var d;a.init=b,a.getSubGameProfile=c;var e=function(){function a(a){this._profile=a}return a.prototype.getGameId=function(){return this._profile.game_id},a.prototype.get=function(){return this._profile},a}();a.SubGameProfile=e}(a.GameProfile||(a.GameProfile={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(a){var b=function(){function a(){}return a.ON_GAME_INITIALIZED="on_game_initialized",a.ON_GET_GAME_RESULTS="on_player_results",a.ON_GET_CLEAR_ALL_SCREEN="on_clear_screen",a.ENABLE_ALL_BUTTONS="enable_all_buttons",a.ON_RESULTS_READY="on_results_ready",a.ON_STATE_READY="on_state_ready",a.ON_RESULTS_DISPLAYED="on_results_displayed",a.ON_PLAYER_PROMPT="on_player_prompt",a.ON_PLAYER_PROMPT_IDLE="on_player_prompt_idle",a.ON_PLAYER_PROMPT_IDLE_KILL="on_player_prompt_idle_kill",a.ON_PLAYER_PROMPT_WIN="on_player_prompt_win",a.ON_GAME_CHANGED="on_game_change",a.ON_GAME_SUMMARY_ACCEPTED="on_game_summary_accepted",a.ON_GAME_ACCEPTED="on_game_accepted",a.ON_GAME_READY="on_game_ready",a.ON_CONTINUE_GAME="on_continue_game",a.ON_FATAL_ERROR="on_game_fatal_error",a.ON_LOAD_PROGRESS="on_game_load_progress",a.ON_LOAD_PROGRESS_FREE="on_game_load_progress_free",a.UPDATE_BALACE="update_balace",a.PUSH_BALANCE="push_balance",a.PROMOTIONAL_ACTIVE="promotional_active",a}();a.GameEvents=b;var c=function(b){function c(c){var d=b.call(this)||this;return d._state=c,d._profile=a.GameProfile.getSubGameProfile(d.getGameId()),console.log("[Game] Creating game :",d.getGameId(),d._state),d}return __extends(c,b),c.prototype.end=function(){},c.prototype.getTotalWin=function(){return this._state.total_win_cash||0},c.prototype.getTotalQueueWin=function(){return this._state.queue_win_cash||0},c.prototype.getLastWin=function(){return this._state.last_win_cash||0},c.prototype.getRoundCount=function(){return this._state.rounds},c.prototype.getSpinRemainCount=function(){return this._state.remain},c.prototype.getTotalFreespins=function(){return this._state.total},c.prototype.isComplete=function(){return this._state.is_complete},c.prototype.getProfile=function(){return this._profile},c.prototype.getGameType=function(){return this._state.game.type},c.prototype.isBaseGame=function(){return"$BASE"==this.getGameId()},c.prototype.isRespin=function(){return"RE_SPIN"==this.getGameId()},c.prototype.getGameId=function(){return this._state.game},c.prototype.getState=function(){return this._state},c.prototype.isGame=function(a){return this.getGameId().indexOf(a)>-1},c.prototype.setState=function(a){this._state=a},c.prototype.getResults=function(b){a.ApplicationBase.instance.emit(a.Server.REQUEST_RESULTS,b)},c}(PIXI.utils.EventEmitter);a.SubGame=c}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Common.GameEvents,e=a.Common.Server,f=function(c){function f(a,b,d,e){var f=c.call(this,a,b,d,e)||this;return f._gameResultsIndex={},f._subGame=b.gameLogic,f}return __extends(f,c),f.prototype.onResultsRequested=function(){},f.prototype.onResultsReady=function(a,b){},f.prototype.onStateReady=function(a){},f.prototype.onGameReady=function(a){this._subGame=a,this.onResize(null,null)},f.prototype.onInteraction=function(a,b){},f.prototype.onSummaryAccepted=function(){b.ApplicationBase.instance.emit(d.ON_RESULTS_DISPLAYED)},f.prototype.onGameAccepted=function(){b.ApplicationBase.instance.emit(d.ON_GAME_ACCEPTED),this._announcer&&TweenLite.to(this._announcer,.5,{alpha:0,onComplete:function(){this._announcer.parent.removeChild(this._announcer)}.bind(this)}),setTimeout(function(){b.ApplicationBase.instance.emit(d.ON_GET_GAME_RESULTS)},1e3)},f.prototype.onContinueGame=function(a,b){},f.prototype.onCreate=function(){c.prototype.onCreate.call(this),b.ApplicationBase.instance.on(d.ON_RESULTS_READY,this.preResultsDelay,this),b.ApplicationBase.instance.on(d.ON_STATE_READY,this.onStateReady,this),b.ApplicationBase.instance.on(e.REQUEST_RESULTS,this.onResultsRequested,this),b.ApplicationBase.instance.on(d.ON_CONTINUE_GAME,this.onContinueGame,this),b.ApplicationBase.instance.on(d.ON_GAME_READY,this.onGameReady,this),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown,this),this.on(a.Core.Events.ON_INTERACTION,this.onInteraction)},f.prototype.onDestroy=function(){c.prototype.onDestroy.call(this),b.ApplicationBase.instance.off(d.ON_RESULTS_READY,this.preResultsDelay),b.ApplicationBase.instance.off(d.ON_GAME_READY,this.onGameReady),b.ApplicationBase.instance.off(d.ON_CONTINUE_GAME,this.onContinueGame),b.ApplicationBase.instance.off(e.REQUEST_RESULTS,this.onResultsRequested),b.ApplicationBase.instance.off(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),this.off(a.Core.Events.ON_INTERACTION,this.onInteraction)},f.prototype.showAnnouncer=function(a){this._layout.getComponent(a)&&(this.interactive=!0,this.interactiveChildren=!0,this._announcer=this._layout.getComponent(a),this._announcer.visible=!0,this._announceTimeout=setTimeout(function(){},1e4))},f.prototype.showSummary=function(a){if(this._layout.getComponent(a)){this.interactive=!0,this.interactiveChildren=!0;this._layout.getComponent(a).visible=!0,this._announceTimeout=setTimeout(function(){},1e4)}},f.prototype.setHTMLBackground=function(a){var b=$("html");b.css("background-image","url('"+a+"')"),b.css("background-size","100% 100%"),b.css("background-repeat","no-repeat"),b.css("background-position","center")},f.prototype.preResultsDelay=function(a,b,c){this._lastResults=b,this._gameResultsIndex[a.getGameId()]=b,setTimeout(function(){this.onResultsReady(b,c)}.bind(this),500)},f.prototype.getGameResults=function(a){var b;for(var c in this._gameResultsIndex)!b&&(c==a||c.indexOf(a)>-1)&&(b=this._gameResultsIndex[c]);return b},f.prototype.onWinsShown=function(){},f}(c);b.GameSceneBase=f}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){l(),b.ApplicationBase.instance.on(b.Server.RESPONSE_USER,function(a){c.user=a},this),b.ApplicationBase.instance.on(b.Server.RESPONSE_RESULTS,function(a){A+=a.getLastCashBet(),B+=a.getLastCashWin(),w=a.getLastCashBet(),"$FREE_SPINS"===a.getState().game&&y<a.getLastCashWin()&&(y=v),"$BASE"===a.getState().game&&(v=a.getLastCashWin())},this),b.ApplicationBase.instance.on(b.Server.REQUEST_RESULTS,function(){z++},this),b.ApplicationBase.instance.on(b.GameEvents.ON_RESULTS_DISPLAYED,function(){x.isBaseGame()&&0===x.getState().total&&b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS,x)}),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS_AT_FS,function(){b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS,x)}),b.ApplicationBase.instance.on(b.GameEvents.ON_GAME_CHANGED,function(a){x=a,!a.isBaseGame()&&t&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_FEATURE_STOP,a),l())},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_REALITY_CHECK_CHANGE,function(a){h(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,function(a){a=a||9999999999,i(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,j(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,k(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,function(a){a||l()},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,function(a){t=a},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,function(a){u=a},this),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS,function(d){console.log("[PlayerMonitoring] Total session duration :",c.user.getSessionDuration()),console.log("[PlayerMonitoring] Current session duration :",n()),console.log("[PlayerMonitoring] Bets :",o()),console.log("[PlayerMonitoring] Bet Cash :",p()),console.log("[PlayerMonitoring] Wins Cash :",q()),console.log("[PlayerMonitoring] RTP :",r()),console.log("[PlayerMonitoring] Cash Loss :",s()),s()>=D&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_CASH_LOSS,D),l()),v&&v>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),y&&y>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),B>=F&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_TOTAL_CASH_WIN,F),l()),v&&v>=E&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,E),l()),v&&u&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_STOP_ON_ANY_WIN,E),l());var e=(new Date).getTime();(e-H)/6e4>=G&&(a.Common.Server.server._autoSpinsPaused=!0,b.ApplicationBase.instance.emit(c.EVENT_ALARM_REALITY_CHECK,G),H=e)},this)}function e(){return G}function f(a){t=a}function g(a){u=a}function h(a){G=a,H=(new Date).getTime(),console.log("[PlayerMonitoring] Settings reality check limit:"+G)}function i(a){D=a}function j(a){E=a}function k(a){F=a}function l(){console.log("[PlayerMonitoring] Resetting limits"),z=0,A=0,B=0,y=0,D=9007199254740991,E=9007199254740991,F=9007199254740991,t=!1,u=!1,C=(new Date).getTime()}function m(){return v}function n(){return((new Date).getTime()-C)/1e3}function o(){return z}function p(){return A}function q(){return B}function r(){return B/A*100}function s(){return A-B}c.EVENT_ALARM_CASH_LOSS="monitoring_cash_loss_alarm",c.EVENT_ALARM_SINGLE_CASH_WIN="monitoring_single_cash_win_alarm",c.EVENT_ALARM_TOTAL_CASH_WIN="monitoring_total_cash_win_alarm",c.EVENT_ALARM_STOP_ON_ANY_WIN="monitoring_stop_on_any_win",c.EVENT_ALARM_REALITY_CHECK="monitoring_reality_check",c.EVENT_ALARM_FEATURE_STOP="monitoring_feature_stop",c.EVENT_CHECK_ALARMS="monitoring_check_alarms",c.EVENT_CHECK_ALARMS_AT_FS="monitoring_check_alarms_at_fs",c.INSUFFICIENT_FUND="insufficient_fund";var t,u,v,w,x,y,z=0,A=0,B=0,C=0,D=9999999,E=9999999,F=9999999,G=60,H=(new Date).getTime();c.init=d,c.getRealityCheckDuration=e,c.setFeatureStop=f,c.setWinStop=g,c.setLimitRealityCheck=h,c.setLimitCashLoss=i,c.setLimitSingleWin=j,c.setLimitTotalWin=k,c.reset=l,c.getCurrentLastCashWin=m,c.getCurrentDuration=n,c.getCurrentBetCount=o,c.getCurrentTotalBetCash=p,c.getCurrentTotalWin=q,c.getCurrentRTP=r,c.getCurrentLossCash=s}(b.PlayerMonitoring||(b.PlayerMonitoring={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(){d=$("body"),setTimeout(function(){c()},2e3)}function c(){$(window).height(),window.innerHeight}var d;a.init=b}(a.SwipeForFullScreen||(a.SwipeForFullScreen={}))
}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Time.Juggler,d=function(b){function d(d){var e=b.call(this)||this;return e._assets=d,e._juggler=new c(!0),e.once(a.Core.Events.ON_CREATE,function(){this.setImage(0)}.bind(e)),e}return __extends(d,b),d.prototype.setImage=function(a){var b=this._assets.getPIXISprite(this._config.params.sprites[a]);this.addChild(b)},d}(PIXI.Container);b.SpriteBanner=d}(b.FX||(b.FX={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Core.Lang,h=a.Common.ApplicationBase,i=a.Common.PlayerMonitoring,j=a.Core.HTML,k=a.Core.SoundManager,l=a.Common.GameEvents,m=a.Common.Server,n=a.Common.Currency,o=a.Common.GameProfile,p=a.Common.Server.OperatorEvents,q=a.Core.Utils.formatTime,r=function(){function a(){}return a.ON_REALITY_CHECK_CHANGE="settings_reality_check_change",a.ON_AUTO_SPIN_COUNT_CHANGE="settings_auto_spin_count_change",a.ON_LOSS_LIMIT_CHANGE="settings_loss_limit_change",a.ON_SINGLE_WIN_LIMIT_CHANGE="settings_single_win_limit_change",a.ON_TOTAL_WIN_LIMIT_CHANGE="settings_total_win_limit_change",a.ON_STOP_ON_FEATURE_WIN_CHANGE="settings_stop_on_feature",a.ON_STOP_ON_ANY_WIN="settings_stop_on_any_win",a.ON_SETTINGS_OPEN="settings_shown",a.ON_SETTINGS_CLOSED="settings_closed",a.ON_BET_CHANGE="settings_bet_change",a.ON_LEFT_HANDED_MODE="settings_left_handed",a.ON_QUICK_SPIN="settings_quick_spin",a.ON_DISPLAY_FORMAT_CHANGE="settings_coins_or_cash",a.ON_SOUND_EFFECTS="settings_sound_effects",a.ON_MUSIC="settings_music",a.ON_BET_EVENT_OUTER="on_bet_load_outer",a.ON_AUTOPLAY_EVENT_OUTER="on_autoplay_load_outer",a.PAYTABLE_STATUS_CHANGED="paytable_status_change",a.OPTION_STATUS_CHANGED="option_status_change",a.ABOUT_STATUS_CHANGED="About_status_change",a}();c.SettingsEvents=r;var s=function(){function a(){}return a.setMaxBetLevel=function(b){a.betLevels=[];for(var c=1;c<=b;c++)a.betLevels.push(c)},a.setCoinDenominations=function(b){a.coinValues=b},a.getCoinValue=function(){return a.coinValues[a.currentCoinLevel-1]},a.getTotalBetCash=function(){return a.getCoinValue()*a.currentBetLevel*a.wayCredits},a.getMaxBetLevel=function(){return a.betLevels.length},a.coinValues=[],a.betLevels=[],a.currentCoinLevel=1,a.currentBetLevel=1,a}();c.BettingSetup=s;var t=function(d){function t(c,m){var o=d.call(this,c,m)||this;o.prevID=void 0,o.firstLoad=0,o._$settingsHolder=$("#settings"),o._$menu=$("#settings_menu"),o._$pages=$("#settings_pages"),o._$header=$("#settings_header"),o._$footer=$("#settings_footer"),o._$buttonAudio=$("#button_settings_audio"),o._$buttonAudio.on("click",function(){e.coreEvents.emit(k.EVENT_SET_MUTE,!k.globalSounds.isMuted)}),o._$buttonHome=$("#button_settings_home"),o._$buttonHome.on("click",function(){$("#button_exit_settings").click(),window.vex.dialog.buttons.YES.text=g.getPhrase("yes_caps"),window.vex.dialog.buttons.NO.text=g.getPhrase("no_caps"),window.vex.dialog.confirm({message:g.getPhrase("confirm_exit"),callback:function(a){a&&h.instance.emit(b.ControlPanel.EVENT_QUIT_GAME)}})}),h.instance.once(l.ON_GAME_READY,function(){this._stopOnFeature.setValue(!1),this._stopOnAnyWin.setValue(!1),this._quickSpin.setValue(0==h.getAppValue("quickSpin",!1)),this._spaceBar.setValue(1==h.getAppValue("spaceToSpin",!0)),this._valuesInCoins.setValue(1==h.getAppValue("showWinsAsCoins",!1)),this._leftHanded.setValue(!1),this._sounds.setValue(this.stringtoBoolean(f.launchVariables.sfx)),this._music.setValue(this.stringtoBoolean(f.launchVariables.music))}.bind(o)),h.instance.on(p.SET_BETTING_PARAMS,function(b){s.coinValues=b.getCreditValues();for(var c=1;c<=b.getMaxBetLevel();c++)s.betLevels.push(c);new a.Slots.SettingsPages.StepperCoinValue("cp_stepper_coin_value"),new a.Slots.SettingsPages.StepperBetLevel("cp_stepper_bet_level"),s.setCoinDenominations(b.getCreditValues()),s.setMaxBetLevel(b.getMaxBetLevel()),s.wayCredits=b.getWaysCredits()||s.wayCredits,o._coinValue=new y("stepper_coin_value"),o._betLevel=new x("stepper_bet_level"),o._totalBet=new z("stepper_total_bet"),o._betLevel.setValue(b.getDefaultBetLevel()),o._coinValue.setValue(b.getDefaultCoinLevel()),h.instance.on(r.ON_BET_CHANGE,function(){return o.updatePays()}),h.instance.on(r.ON_BET_EVENT_OUTER,function(){return o.showBetPage()}),h.instance.on(r.ON_AUTOPLAY_EVENT_OUTER,function(){return o.showAutoplayPage()}),h.instance.emit(r.ON_BET_CHANGE,{betLevel:b.getDefaultBetLevel(),coinLevel:b.getDefaultCoinLevel()})}),e.coreEvents.on(k.EVENT_SET_MUTE,function(a){a?(this._$buttonAudio.removeClass("audio_on"),this._$buttonAudio.addClass("audio_off")):(this._$buttonAudio.removeClass("audio_off"),this._$buttonAudio.addClass("audio_on"))}.bind(o)),o._sessionLimitSlider=new B("slider_session_limit",1,120,q,2),o._sessionLimitSlider.setValue(i.getRealityCheckDuration()),o._sessionLimitSlider.onChange=function(a){h.instance.emit(r.ON_REALITY_CHECK_CHANGE,a)};a.Core.Utils.getUrlVar("regulation");return $("#session_time_limit").hide(),o._volumeSlider=new B("slider_volume",0,1,function(a){return(100*a).toFixed(0)},.01),o._volumeSlider.setValue(h.getAppValue("soundFxVolume",1)),o._volumeSlider.onChange=function(a){var b=+h.getAppValue("soundEffects",!0)*a;h.saveAppValue("soundFxVolume",b),e.coreEvents.emit(k.EVENT_SET_FX_VOLUME,b),b>0&&e.coreEvents.emit(k.EVENT_ON_FX_VOLUME,!0),e.coreEvents.emit(k.EVENT_SET_MUSIC_VOLUME,+h.getAppValue("music",!0)*a)},o._autoSpinsSlider=new B("slider_autospin_count",0,100,null,5),o._autoSpinsSlider.onChange=function(b){h.instance.emit(r.ON_AUTO_SPIN_COUNT_CHANGE,b),b&&a.Common.Server.UKGC?($("#settings_autospin_inputs").show(),this._$inputLossLimit.getValue()?(this._$inputLossLimit.getDiv().fadeIn(),this._$inputLossLimit.getDiv().removeClass("flash-item"),$("#button_exit_settings").removeClass("disabled_settings_item")):(this._$inputLossLimit.getDiv().addClass("flash-item"),$("#button_exit_settings").addClass("disabled_settings_item"))):($("#settings_autospin_inputs").hide(),$("#button_exit_settings").removeClass("disabled_settings_item"))}.bind(o),o._$inputLossLimit=new u("input_loss_limit",function(b){h.instance.emit(r.ON_LOSS_LIMIT_CHANGE,b/100),b>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()?(this._$inputLossLimit.getDiv().removeClass("flash-item"),$("#button_exit_settings").removeClass("disabled_settings_item")):this._$inputLossLimit&&(this._$inputLossLimit.getDiv().addClass("flash-item"),0!=a.Common.Server._autoSpinsInfinite&&$("#button_exit_settings").addClass("disabled_settings_item"))}.bind(o),"keypad"),o._$inputSingleWinLimit=new u("input_single_win_limit",function(a){h.instance.emit(r.ON_SINGLE_WIN_LIMIT_CHANGE,a/100)},"keypad"),o._$inputTotalWinLimit=new u("input_total_win_limit",function(a){h.instance.emit(r.ON_TOTAL_WIN_LIMIT_CHANGE,a/100)},"keypad"),o._stopOnFeature=new A("checkbox_stop_on_feature",function(a){h.instance.emit(r.ON_STOP_ON_FEATURE_WIN_CHANGE,a)}),o._stopOnAnyWin=new A("checkbox_stop_on_any",function(a){h.instance.emit(r.ON_STOP_ON_ANY_WIN,a)}),o._quickSpin=new A("checkbox_quickspin",function(a){h.instance.emit(r.ON_QUICK_SPIN,a),h.saveAppValue("quickSpin",a)}),o._spaceBar=new A("checkbox_spacebar",function(a){h.saveAppValue("spaceToSpin",a)}),o._valuesInCoins=new A("checkbox_coin_values",function(a){h.saveAppValue("showWinsAsCoins",a),n.formatAsCredits=a,h.instance.emit(r.ON_DISPLAY_FORMAT_CHANGE,a),h.instance.emit(r.ON_BET_CHANGE,{betLevel:this.betLevel,coinLevel:this.coinLevel})}),o._leftHanded=new A("checkbox_left_handed",function(a){h.saveAppValue("leftHandedMode",a),h.instance.emit(r.ON_LEFT_HANDED_MODE,a)}),o._sounds=new A("checkbox_soundeffects",function(a){h.saveAppValue("soundEffects",a),h.instance.emit(r.ON_SOUND_EFFECTS,a),e.coreEvents.emit(k.EVENT_SET_FX_VOLUME,a),e.coreEvents.emit(k.EVENT_ON_FX_VOLUME,a)}),o._music=new A("checkbox_music",function(a){h.saveAppValue("music",a),h.instance.emit(r.ON_MUSIC,a),e.coreEvents.emit(k.EVENT_SET_MUSIC_VOLUME,a)}),o._paysPager=new v("pay_page_pager",["page1","page2","page3","page4","page5","page6","page7"]),$(o._$div).find("#settings_autospins").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_pays").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_rules").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_history").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_bets").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#settings_general").on("click",o.onMenuClick.bind(o)),$(o._$div).find("#button_exit_settings").on("click",function(){a.Core.Environment.getPlatformData().os.family!==f.isMobile()&&navigator.vibrate([100]),this._$buttonSpin=$("#button_spin"),this._$buttonAuto=$("#button_auto_cp"),this._$btnautoplayouter=$("#Autoplay_btn"),this._$buttonSettings=$("#button_settings"),this._$buttonNext=$(this._$div.find(".button_next")),this._$buttonPrev=$(this._$div.find(".button_prev")),this._$buttonSpin.removeClass("disabled_settings_item"),k.globalSounds.playCue("GENERIC_CLICK"),$("#button_help").removeClass("disabled"),$("#button_auto_cp").removeClass("disabled_settings_item"),$("#button_settings").removeClass("disabled_settings_item"),a.Common.Server.server.isPaytableVisible=!1,this._$buttonSpin.css("pointer-events","all"),this._$buttonAuto.css("pointer-events","all"),this._$btnautoplayouter.css("pointer-events","all"),this._$buttonSettings.css("pointer-events","all"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),$("#control_panel").css("pointer-events","none"),$(document).find("#button_help").css("pointer-events","all"),this._$buttonSpin.fadeIn(),$("#bet_wrapper").removeClass("disabled"),j.getPageManager("MAIN").closeOverlay(),j.getPageManager("MAIN").showPage("main"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!1),h.instance.emit(r.OPTION_STATUS_CHANGED,!1)}.bind(o)),o.on(a.Core.Events.ON_HIDDEN,function(){return h.instance.emit(r.ON_SETTINGS_CLOSED,{autoSpins:o._autoSpinsSlider.getValue()})}),$("#settings_page_autospins").hide(),$("#settings_page_general").hide(),$("#settings_page_bets").hide(),$("#settings_page_rules").hide(),$("#settings_page_pays").hide(),$("#settings_page_history").hide(),o.on(a.Core.Events.ON_SHOWN,o.onShown,o),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,o.resize,o),o.resize(),o}return __extends(t,d),t.prototype.onbetClick=function(){$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob")},t.loadGameRules=function(a){var b=f.launchVariables.language.toLowerCase();b&&$("#"+b).css("display","block"),$.ajax({type:"GET",url:"assets/lang/rules_"+b+".html?v=1.0.0",success:function(b){$("#settings_page_rules").append(b.replace("{version}","<small><strong>"+h.version+"</strong></small>")),a()},error:function(){throw"Can't load game rules"}})},t.prototype.stringtoBoolean=function(a){return"1"===a||"true"===a||"0"!==a&&"false"!==a&&void 0},t.prototype.onShown=function(){this.resize(),this._autoSpinsSlider.setValue(0),this.updatePays(),this._$inputLossLimit.setValue(null),this._$inputTotalWinLimit.setValue(null),this._$inputSingleWinLimit.setValue(null),this._stopOnAnyWin.setValue(!1),this._stopOnFeature.setValue(!1),h.instance.emit(m.REQUEST_TRANSACTIONS,{from:"day",to:"day2"}),h.instance.emit(r.ON_SETTINGS_OPEN)},t.prototype.onMenuClick=function(b){var d=b.target;if(a.Core.Environment.getPlatformData().os.family!==f.isMobile()&&navigator.vibrate([100]),void 0!==this.prevID&&this.prevID===d.id||!f.isDesktop()){if(void 0===this.prevID||this.prevID!==d.id)switch(this.prevID=d.id,m.server&&(m.server.previousID=d.id),$(this._$div).find("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$("#settings_page_history_more").css("display","none"),$("#settings_autospins").hide(),$("#settings_general").show(),$("#settings_pays").show(),d.id){case"settings_general":$(this._$div).find("#settings_general").addClass("icon_selected"),this.showPage("settings_page_general","settings_general_mob"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_pays":this.updatePays(),$(this._$div).find("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!0);break;case"settings_rules":$(this._$div).find("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob")}}else switch(this.prevID=d.id,h.instance.emit(l.ON_PLAYER_PROMPT_IDLE_KILL),m.server&&(m.server.previousID=d.id),$("#button_exit_settings").removeClass("disabled_settings_item"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$(this._$div).find("#settings_rules").removeClass("icon_selected"),$(this._$div).find("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_history").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),d.id){case"settings_autospins":$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),this._autoSpinsSlider.setValue(0);break;case"settings_general":$(".pager-btn.pager-left").css("display","none"),$(".pager-btn.pager-right").css("display","none"),$(".paginatonIndexOver1").css("display","none"),$(".paginatonIndexOver2").css("display","none"),$(".paginatonIndexOver3").css("display","none"),$(".paginatonIndexOver4").css("display","none"),$(".paginatonIndexOver5").css("display","none"),$(".paginatonIndexOver6").css("display","none"),$(".paginatonIndexOver7").css("display","none"),$(".paginatonIndex1").css("display","none"),$(".paginatonIndex2").css("display","none"),$(".paginatonIndex3").css("display","none"),$(".paginatonIndex4").css("display","none"),$(".paginatonIndex5").css("display","none"),$(".paginatonIndex6").css("display","none"),$(".paginatonIndex7").css("display","none"),0!=Object.keys(k.globalSounds.getatlas()).length&&k.globalSounds.playCue("GENERIC_CLICK"),$("#bet_wrapper").addClass("disabled"),$(this._$div).find("#settings_general").addClass("icon_selected"),this.showPage("settings_page_general","settings_general_mob"),h.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!0),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_bets":$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob");break;case"settings_pays":$(".pager-btn.pager-left").css("display","block"),$(".pager-btn.pager-right").css("display","block"),$(".paginatonIndexOver1").css("display","block"),$(".paginatonIndex1").css("display","block"),$(".paginatonIndex2").css("display","block"),$(".paginatonIndex3").css("display","block"),$(".paginatonIndex4").css("display","block"),$(".paginatonIndex5").css("display","block"),$(".paginatonIndex6").css("display","block"),$(".paginatonIndex7").css("display","block"),0!=Object.keys(k.globalSounds.getatlas()).length&&k.globalSounds.playCue("GENERIC_CLICK"),this.updatePays(),$("#bet_wrapper").removeClass("disabled"),$(this._$div).find("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),h.instance.emit(r.PAYTABLE_STATUS_CHANGED,!0),h.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!1);break;case"settings_rules":$(".pager-btn.pager-left").css("display","none"),$(".pager-btn.pager-right").css("display","none"),$(".paginatonIndexOver1").css("display","none"),$(".paginatonIndexOver2").css("display","none"),$(".paginatonIndexOver3").css("display","none"),$(".paginatonIndexOver4").css("display","none"),$(".paginatonIndexOver5").css("display","none"),$(".paginatonIndexOver6").css("display","none"),$(".paginatonIndexOver7").css("display","none"),$(".paginatonIndex1").css("display","none"),$(".paginatonIndex2").css("display","none"),$(".paginatonIndex3").css("display","none"),$(".paginatonIndex4").css("display","none"),$(".paginatonIndex5").css("display","none"),$(".paginatonIndex6").css("display","none"),$(".paginatonIndex7").css("display","none"),$(this._$div).find("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob");break;case"settings_history":$(this._$div).find("#settings_history").addClass("icon_selected"),this.showPage("settings_page_history","settings_history_mob"),f.isMobile()&&$("#settings_page_history_more").css("display","block")}},t.prototype.showPage=function(a,b){$(this._$header).find("#settings_page_title").text(g.getPhrase(b)),this._$currentPage&&this._$currentPage.fadeOut(100),setTimeout(function(){var b=$(this._$div).find("#"+a);b.show(),this._$currentPage=b,this._$currentPage.fadeIn()}.bind(this),250)},t.prototype.updatePays=function(){var a=o.getSubGameProfile("$BASE");for(var c in a.get().paytable){var d=a.get().paytable[c];if(d.oak)for(var e in d.oak){var f=d.oak[e].multiplier;f&&("SCATTER"!=d.name?$("#symbol-pays_"+c+e).text(n.format(s.getCoinValue()*s.currentBetLevel*f)):$("#symbol-pays_"+c+e).text(n.format(s.getCoinValue()*s.currentBetLevel*f*s.wayCredits)))}}2==this.firstLoad?h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0):this.firstLoad++},t.prototype.showBetPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected")},t.prototype.showAutoplayPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$("#settings_page_rules").hide(),$("#settings_general").hide(),$("#settings_pays").hide(),f.isMobile()&&(this.prevID="settings_autospins"),$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),$(this._$div).find("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),this._autoSpinsSlider.setValue(0)},t.prototype.resize=function(){var a=0,b=0,c=0;f.isDesktop()?$("body").append(this._$settingsHolder):(this._$settingsHolder.css("z-index",99999),$("body").append(this._$settingsHolder),a=$(window).width(),b=$(window).height(),c=$(document).height(),this._$settingsHolder.css("width",a+"px"),"Android"==f.getPlatformData().os.family&&f.isPortrait()?this._$settingsHolder.css("height",c+"px"):this._$settingsHolder.css("height",b+"px"),f.isLandscape()?(this._$header.css("width",a-80+"px"),this._$pages.css("width",a-100+8+"px"),this._$footer.css("width",a-80+"px"),this._$pages.css("left","90px"),this._$pages.css("height",b-124+"px"),this._$menu.css("height",b+"px"),this._$menu.css("width","80px")):(this._$header.css("width","100%"),this._$footer.css("width","100%"),this._$pages.css("left","10px"),this._$pages.css("width",a-20+8+"px"),this._$pages.css("height",b-204+"px"),this._$menu.css("width",a-10),this._$menu.css("height","80px")))},t}(d);c.Settings=t;var u=function(){function a(b,c,d){this._value=0,this._currentKeypadValue="",this._clickCount=0,this._$div=$("#"+b),this._$keypadDiv=$("#"+d),this._$keypadDisplay=this._$keypadDiv.find(".keypad_display"),this._onChange=c,this._value=0,a.isKeypadInitialized||this.initKeypad(),this._$div.on("click",function(){a.currentInput=this,this.clearKeypad(),this._$keypadDiv.show()}.bind(this)),this.setValue()}return a.prototype.getDiv=function(){return this._$div},a.prototype.getValue=function(){return 100*this._value},a.prototype.setValue=function(a){if(a!=this._value&&this._onChange(this._value=a?100*a:a),a){var b=n.formatAsCredits;n.formatAsCredits=!1,this._$div.text(n.format(100*a||0)),n.formatAsCredits=b}else this._$div.text("0")},a.prototype.clearKeypad=function(){this._clickCount=0,this._currentKeypadValue="0",this._$keypadDisplay.text(this._currentKeypadValue)},a.prototype.addCharacter=function(a){0==this._clickCount&&(this._currentKeypadValue=""),this._currentKeypadValue.length+1<7&&(this._clickCount++,this._currentKeypadValue+=a,this._$keypadDisplay.text(this._currentKeypadValue))},a.prototype.initKeypad=function(){this._$keypadDiv.find(".keypad_1").on("click",function(){this.addCharacter("1")}.bind(this)),this._$keypadDiv.find(".keypad_2").on("click",function(){this.addCharacter("2")}.bind(this)),this._$keypadDiv.find(".keypad_3").on("click",function(){this.addCharacter("3")}.bind(this)),this._$keypadDiv.find(".keypad_4").on("click",function(){this.addCharacter("4")}.bind(this)),this._$keypadDiv.find(".keypad_5").on("click",function(){this.addCharacter("5")}.bind(this)),this._$keypadDiv.find(".keypad_6").on("click",function(){this.addCharacter("6")}.bind(this)),this._$keypadDiv.find(".keypad_7").on("click",function(){this.addCharacter("7")}.bind(this)),this._$keypadDiv.find(".keypad_8").on("click",function(){this.addCharacter("8")}.bind(this)),this._$keypadDiv.find(".keypad_9").on("click",function(){this.addCharacter("9")}.bind(this)),this._$keypadDiv.find(".keypad_0").on("click",function(){this.addCharacter("0")}.bind(this)),this._$keypadDiv.find(".keypad_cancel").on("click",function(){this.clearKeypad(),this._$keypadDiv.hide()}.bind(this)),this._$keypadDiv.find(".keypad_ok").on("click",function(){this._$keypadDiv.hide(),0==this._currentKeypadValue.length?a.currentInput.setValue(null):a.currentInput.setValue(parseInt(this._currentKeypadValue)),this.clearKeypad()}.bind(this)),a.isKeypadInitialized=!0},a.isKeypadInitialized=!1,a}();c.NumericInput=u;var v=function(){function a(a,b){var c=this;this._idx=0,this.hideAll=function(){return c._$pages.forEach(function(a){return a.hide()})},this.updatePage=this.updatePage.bind(this),this._$div=$("#"+a),this._$nextBtn=this._$div.find(".pager-right"),this._$prevBtn=this._$div.find(".pager-left"),this._$text=this._$div.find(".pager-text"),this._$pages=b.map(function(a){return $("#"+a)}),this._$nextBtn.on("click",function(a){return c.updatePage(c._idx+1)},this.paginationNum()),this._$prevBtn.on("click",function(a){return c.updatePage(c._idx-1)},this.paginationNum()),this.hideAll(),this.updatePage(this._idx)}return a.prototype.updatePage=function(a){0!==a&&k.globalSounds.playCue("GENERIC_CLICK"),this._$pages[this._idx].hide(),this._idx=a,this._idx<0?this._idx=this._$pages.length-1:this._idx>=this._$pages.length&&(this._idx=0),this._$pages[this._idx].show(),this._$text.text(this._idx+1+"/"+this._$pages.length)},a.prototype.paginationNum=function(){function a(){$("#index"+c).removeClass("paginatonIndexOver"+c),$("#index"+c).addClass("paginatonIndex"+c),c--,0===c&&(c=7),$("#index"+c).addClass("paginatonIndexOver"+c)}function b(){$("#index"+c).removeClass("paginatonIndexOver"+c),$("#index"+c).addClass("paginatonIndex"+c),c%=7,c++,$("#index"+c).addClass("paginatonIndexOver"+c)}var c=1;$(".pager-left").on("click",a),$(".pager-right").on("click",b)},a}();c.PagerWidget=v;var w=function(){function b(b){this._currentIndex=0,this._$div=$("#"+b),this._$value=$(this._$div.find(".value")),this._$buttonNext=$(this._$div.find(".button_next")),this._$buttonPrev=$(this._$div.find(".button_prev")),this._$buttonPrev.on("click",function(){this._currentIndex>0&&("iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),k.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex-1]),f.isMobile()&&(this._$buttonPrev.css("visibility","hidden"),setTimeout(function(){this._$buttonPrev.css("visibility","visible")}.bind(this),100))),0==this._currentIndex&&this._$buttonPrev.css("pointer-events","none"),this._$buttonNext.css("pointer-events","all")}.bind(this)),this._$buttonNext.on("click",function(){this._currentIndex<this._values.length-1&&("iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),k.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex+1]),f.isMobile()&&(this._$buttonNext.css("visibility","hidden"),setTimeout(function(){this._$buttonNext.css("visibility","visible")}.bind(this),100)),this._$buttonPrev.css("pointer-events","all")),this._currentIndex==this._values.length-1&&this._$buttonNext.css("pointer-events","none")}.bind(this))}return b.prototype.getValue=function(){return this._values[this._currentIndex]},b.prototype.setMax=function(){this.setValue(this._values[this._values.length-1])},b.prototype.setValue=function(a,b){var c=a!=this.getValue();this._currentIndex=this._values.indexOf(a),this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},b.prototype.setIndex=function(a,b){this._currentIndex=a,this.showValue(),!b&&this.onChange&&this.onChange()},b.prototype.setValues=function(a,b){this._values=a,this._valueLabels=b,this._currentIndex=0,this.setValue(this._values[0])},b.prototype.setText=function(a){this._$value.text(a)},b.prototype.showValue=function(){this._$value.text(this._valueLabels[this._currentIndex]),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),this._currentIndex===this._values.length-1?this._$buttonNext.addClass("disabled"):0===this._currentIndex&&this._$buttonPrev.addClass("disabled")},b}();c.StepperWidget=w;var x=function(a){function b(b){var c=a.call(this,b)||this;return c.setValues(s.betLevels,s.betLevels),c.onChange=function(a){s.currentBetLevel=a,h.instance.emit(r.ON_BET_CHANGE,{betLevel:a})},h.instance.on(r.ON_BET_CHANGE,function(a){a.betLevel&&this.setValue(a.betLevel,!0)}.bind(c)),c.setValue(1),c}return __extends(b,a),b}(w);c.StepperBetLevel=x;var y=function(a){function b(b){for(var c=a.call(this,b)||this,d=[],e=1;e<=s.coinValues.length;)d.push(e++);return c.setValues(d,function(a,b){var c=[];return a.forEach(function(a){c.push(b(a))}),c}(s.coinValues,n.format)),c.onChange=function(a){s.currentCoinLevel=a,h.instance.emit(r.ON_BET_CHANGE,{coinLevel:a})},h.instance.on(r.ON_BET_CHANGE,function(a){a.coinLevel&&(s.currentCoinLevel=a.coinLevel,this.setValue(a.coinLevel,!0)),n.creditValue=s.getCoinValue()}.bind(c)),c}return __extends(b,a),b}(w);c.StepperCoinValue=y;var z=function(a){function b(b){var c=a.call(this,b)||this;return c.calculateValues=function(){var a=c.calculateTotalBetCombos(s.coinValues,s.getMaxBetLevel()),b=[];a.forEach(function(a){b.push(n.format(a.total))}),c.setValues(a,b)},c.calculateValues(),c.onChange=function(a){s.currentCoinLevel=a.coinLevel,s.currentBetLevel=a.betLevel,h.instance.emit(r.ON_BET_CHANGE,{coinLevel:s.currentCoinLevel,betLevel:s.currentBetLevel=a.betLevel})},h.instance.on(r.ON_BET_CHANGE,function(a){var b=s.getTotalBetCash();this.setValue(b,!0)}.bind(c)),c}return __extends(b,a),b.prototype.showValue=function(){a.prototype.showValue.call(this),this._$value.text(n.format(this._values[this._currentIndex].total))},b.prototype.setValue=function(a,b){for(var c=a!=this.getValue(),d=0;d<this._values.length;d++)if(this._values[d].total==a){this._currentIndex=d;break}this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},b.prototype.calculateTotalBetCombos=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=1;e<=b;e++)c.push({coinLevel:d+1,betLevel:e,total:a[d]*e*s.wayCredits});c.sort(function(a,b){return a.total>b.total?1:a.total<b.total?-1:0});var f=0,g=[];return c.forEach(function(a){a.total!=f&&g.push(a),f=a.total}),JSON.parse(JSON.stringify(g))},b}(w);c.StepperTotalBet=z;var A=function(){function a(a,b){this._$div=$("#"+a),this._onChange=b,this._$div.addClass("checkbox"),this._$div.append("<div class='checkbox_handle'></div>"),this._$handle=this._$div.find(".checkbox_handle"),this._$div.on("click",function(a){k.globalSounds.playCue("GENERIC_CLICK"),this.setValue(!this._value)}.bind(this))}return a.prototype.setValue=function(a){this._value=a,this._value?(this._$handle.animate({left:"35px"},200),this._$div.removeClass("checkbox_off"),this._$div.addClass("checkbox_on")):(this._$handle.animate({left:"4px"},200),this._$div.removeClass("checkbox_on"),this._$div.addClass("checkbox_off")),this._onChange(this._value)},a.prototype.getValue=function(){return this._value},a}();c.CheckboxWidget=A;var B=function(){function b(a,c,d,e,g){this._minValue=0,this._maxValue=1,this._isMouseDown=!1,this._$div=$("#"+a),this._$div.addClass("slider"),this._$div.append('\n            <div class="value_label">Label</div>\n            <div class="groove-container">\n                <div class="min_label">0</div>\n                <div class="groove">\n                    <div class="lit"></div>\n                    <div class="handle"></div>\n                </div>\n                <div class="max_label">1</div>\n            </div>'),this._onDisplay=e||function(a){return a},this._clamp=g||1,this._minValue=c,this._maxValue=d,this._$handle=$(this._$div.find(".handle")),this._$litBar=$(this._$div.find(".lit")),this._$groove=$(this._$div.find(".groove")),this._$labelMin=$(this._$div.find(".min_label")),this._$labelMax=$(this._$div.find(".max_label")),this._$labelValue=$(this._$div.find(".value_label")),this._$labelMin.text(this._onDisplay(c)),this._$labelMax.text(this._onDisplay(d)),this._$div.on("mouseup",function(a){this._isMouseDown=!1}.bind(this)),this._$div.on("mousedown",function(a){this._isMouseDown=!0;var c=this._$groove.offset();f.isDesktop()?this.calcValue((a.clientX-c.left)*(1/b.scaleFactor)):this.calcValue(a.clientX-c.left)}.bind(this)),this._$div.on("touchmove",function(a){var b=this._$groove.offset();this.calcValue(a.originalEvent.touches[0].clientX-b.left)}.bind(this)),f.isDesktop()&&this._$div.on("mousemove",function(a){if(this._isMouseDown){var c=this._$groove.offset();this.calcValue((a.originalEvent.clientX-c.left)*(1/b.scaleFactor))}}.bind(this)),this.setValue(0)}return b.prototype.getValue=function(){return this._value},b.prototype.setValue=function(a){this._value=a,this._$labelValue.text(this._onDisplay(a));var b=(a-this._minValue+1)/(this._maxValue-this._minValue+1)*100;this._$litBar.css("width",b+"%"),this._$handle.css("left",b+"%"),this.onChange&&this.onChange(a)},b.prototype.enable=function(a){a?this._$div.removeClass("disabled"):this._$div.addClass("disabled")},b.prototype.calcValue=function(b){var c=b/this._$groove.outerWidth()*(this._maxValue-this._minValue)+this._minValue,d=this._clamp;c<this._minValue+d?c=this._minValue:c>this._maxValue-d&&(c=this._maxValue),this.setValue(a.Core.Maths.roundToNearest(c,d))},b.scaleFactor=1,b}();c.SliderWidget=B}(b.SettingsPages||(b.SettingsPages={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Time.Juggler,d=a.Common.ApplicationBase,e=a.Common.GameEvents,f=a.Common.GameProfile,g=a.Core.Renderer.Stage,h=a.Core.Lang,i=a.Common.Currency,j=a.Core.Environment,k=a.Common.Server.ResponseResults,l=PIXI.Graphics,m=function(h){function i(g,j){var k=h.call(this)||this;if(k._reels=[],k.oakB1=0,k.oakB2=0,k.oakB3=!1,k.oakB4=!1,k._allSymbols=[],k._wasSpinInterrupted=!1,k._symbolProfiles={},k._reelsSpinning=0,k.showResults=function(a,b){
function c(){if(j+=f._setup.animation.drop.delay_adjust||0,i.isQuickSpin&&(j=0),f._wasSpinInterrupted){j=0;for(var b=0;b<f._reels.length;b++)h=b,e();d.instance.emit(i.EVENT_REEL_DROPPED,f._reels,f._wasSpinInterrupted)}else++h<a.aperture.getReelCount()&&(f._juggler.setTimeout(e,j),i.isQuickSpin||(j*=0))}function e(e){var k,l=f._reels[h];if(g=f.getSymbolCounts(),1===h&&g.W1>=2&&(f.oakB3=!0),1===h&&g.H1>=2&&(f.oakB4=!0),f._wasSpinInterrupted&&d.instance.emit(i.EVENT_REELS_DROPPED,a),!f._wasSpinInterrupted)for(var m in g){var n=g[m],o=f.getSymbolProfile(m);2===h&&g.W1&&(f.oakB1=g.W1),2===h&&g.H1&&(f.oakB2=g.H1),("H2"===m&&n>=4||"H1"===m&&f.oakB4&&f.oakB2>=4||"W1"===m&&f.oakB3&&f.oakB1>=4)&&(k=o,j=0,f._juggler.timeMultiplier=1,d.instance.emit(i.EVENT_TEASE_REEL,l,k))}l.dropSymbols(f._setup.animation,k,a.aperture.getStrip(h+1),function(e){f._allSymbols=f._allSymbols.concat(l.getVisibleSymbols()),d.instance.emit(i.EVENT_REEL_DROPPED,e,f._wasSpinInterrupted),--f._reelsSpinning>0?c():f._juggler.setTimeout(function(){d.instance.emit(i.EVENT_REELS_DROPPED,a),b&&b()},k?750:200)})}var f=k;k._allSymbols=[];var g,h=0,j=f._setup.animation.drop.delay;k._reelsSpinning=k._reels.length,e()},k._assets=g,k._juggler=new c(!0),!j)throw"[Aperture] Required parameter 'gameId' missing in Aperture constructor in layout.  Valid constructor is : Aperture(assets, gameId)";return k._gameProfile=f.getSubGameProfile(j),k.once(a.Core.Events.ON_DESTROY,k.onDestroy),k.once(a.Core.Events.ON_CREATE,k.onCreate),d.instance.on(b.ControlPanel.EVENT_INTERRUPT_SPIN,k.onInterruptSpin,k),d.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,k.onWinsShown,k),d.instance.on(e.ON_GET_GAME_RESULTS,k.onGameResults,k),d.instance.on(e.ON_GET_CLEAR_ALL_SCREEN,k.onGameResults,k),d.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_START,function(){i._AutoPlay=!0},k),d.instance.on(i.STOP_REEL_SPINNING,k.onStopReelSpinning),d.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,function(){i._AutoPlay=!1},k),d.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_QUICK_SPIN,function(a){i.isQuickSpin=a}.bind(k)),d.instance.on(b.WinManager.EVENT_MODIFY_APERTURE_START,k.hideReel,k),k}return __extends(i,h),i.prototype.onWinsShown=function(a){this._juggler.timeMultiplier=1,this.stopSymbolAnimations()},i.prototype.onGameResults=function(){this.stopSymbolAnimations()},i.prototype.getBackContainer=function(){return this._behindReels},i.prototype.getAnimationLayer=function(){return this._animationLayer},i.prototype.stopSymbolAnimations=function(){this.applyToSymbols(function(a){a.stopAnimation()})},i.prototype.startSpin=function(a,b){if(this.oakB1=0,this.oakB2=0,this.oakB3=!1,this.oakB4=!1,this._spinTime=(new Date).getTime(),this._wasSpinInterrupted=!1,this.applyToSymbols(function(a){a.fadeIn()}),i.isQuickSpin?this._juggler.timeMultiplier=3:this._juggler.timeMultiplier=1,a)this._reels.forEach(function(a){a.startSpin({start:{}}),a.alpha=1});else{var c=0;this._reels.forEach(function(a){a.alpha=1,this._juggler.setTimeout(function(){a.startSpin(this._setup.animation)}.bind(this),c),i.isQuickSpin?c+=0*this._setup.animation.start.delay:c+=this._setup.animation.start.delay}.bind(this))}d.instance.emit(i.EVENT_REELS_SPIN_START)},i.prototype.dropSymbols=function(b,c){this.alpha=1;var d=(this._setup.animation.min_spin_time||1e3)-((new Date).getTime()-this._spinTime);j.launchVariables.rm&&"dk"===j.launchVariables.rm.toLowerCase()?i.isQuickSpin?a.Core.Time.juggler.setTimeout(function(){this.showResults(b,c)}.bind(this),d+500):a.Core.Time.juggler.setTimeout(function(){this.showResults(b,c)}.bind(this),d):i.isQuickSpin?this.showResults(b,c):this._wasSpinInterrupted?this.showResults(b,c):a.Core.Time.juggler.setTimeout(function(){this.showResults(b,c)}.bind(this),d)},i.prototype.getSymbolProfile=function(a){if(this._symbolProfiles[a])return this._symbolProfiles[a];throw"[Aperture] Symbol id does not exist in aperture symbols setup : "+a},i.prototype.getSymbolCounts=function(){var a={};return this.applyToSymbols(function(b){a[b.symbolId]=a[b.symbolId]||0,a[b.symbolId]++}),a},i.prototype.getReel=function(a){return this._reels[a]},i.prototype.getAllSymbols=function(){return this._allSymbols},i.prototype.getSpinningReelsCount=function(){var a=0;return this.applyToReels(function(b){b.isSpinning()&&a++}),a},i.prototype.getSymbols=function(a){var b=[];return a.forEach(function(a){b.push(this.getSymbolAtPosition(a))}.bind(this)),b},i.prototype.getSymbol=function(a,b){return this._reels[a-1].getSymbol(b)},i.prototype.getAbsolutePositionCentre=function(a){var b=Math.floor((a-1)/this._setup.symbols_per_reel),c=a-1-b*this._setup.symbols_per_reel+1,d=this._setup.reel_spacing,e=this._reels[0].getSymbol(1).height;return new PIXI.Point(d/2+d*b,-e/2+c*e)},i.prototype.convertIntoReel=function(a,b){var c=Math.ceil(b/3);return a.match("BUNNY")?this.getAbsolutePositionCentre(3*c):a.match("PUMPKIN")?this.getAbsolutePositionCentre(3*b-1):void 0},i.prototype.getAbsolutePosition=function(a){var b=a%3,c=(a-b)/3,d=this._setup.reel_spacing,e=this._reels[0].getSymbol(1).height;return new PIXI.Point(d*b+222,e*c+e+28)},i.prototype.getSymbolAtPosition=function(a){var b=Math.floor((a-1)/this._setup.symbols_per_reel),c=a-1-b*this._setup.symbols_per_reel+1;return this._reels[b].getSymbol(c)},i.prototype.getPositionCentre=function(a,b){return b=b||g.instance,this.getSymbolAtPosition(a).getLocalCoords(b)},i.prototype.getPositionCentreList=function(a,b){b=b||g.instance;var c=[];return a.forEach(function(a){c.push(this.getPositionCentre(a,b))}.bind(this)),c},i.prototype.restoreAperture=function(a){var b=0;a.forEach(function(a){this._reels[b++].setSymbols(a)}.bind(this))},i.prototype.onInterruptSpin=function(){this._wasSpinInterrupted=!0,this._juggler.timeMultiplier=5},i.prototype.onStopReelSpinning=function(){this._wasSpinInterrupted=!0,this._reels.forEach(function(a){a.animateReelStop()})},i.prototype.onDestroy=function(){d.instance.off(b.ControlPanel.EVENT_INTERRUPT_SPIN,this.onInterruptSpin),d.instance.off(e.ON_GET_GAME_RESULTS,this.onGameResults),d.instance.off(e.ON_RESULTS_DISPLAYED,this.onWinsShown),d.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),d.instance.off(b.WinManager.EVENT_MODIFY_APERTURE_START,this.hideReel),this._reels.forEach(function(a){a.destroy(),a=null})},i.prototype.onCreate=function(b){if(this._setup=b.params,!this._setup.symbols)throw"[Aperture] Missing 'symbols' property in Aperture setup";this._setup.mask_size&&(this.mask=new l,this.mask.beginFill(16777215),this.mask.drawRect(this._setup.mask_size.x,this._setup.mask_size.y,this._setup.mask_size.width,this._setup.mask_size.height),this.mask.endFill(),this.addChild(this.mask));for(var c in this._gameProfile.get().paytable)this._symbolProfiles[c]=new t(c,this._setup.symbols[c],this._gameProfile.get().paytable[c]);this._behindReels=new PIXI.Container,this.addChild(this._behindReels);var d=(this._setup.reel_spacing||150)/2,e=0;this._allSymbols=[],this._setup.strips.forEach(function(b){var c=b.split(","),f=new a.Slots.Reel(this,this._assets,this._setup,c,this._juggler);this._reels.push(f),f.x=d,f.y=this._setup.top_margin||0,d+=this._setup.reel_spacing||0,this.addChild(f),this._allSymbols=this._allSymbols.concat(f.getVisibleSymbols()),f.reelIndex=e++}.bind(this)),this._animationLayer=new PIXI.Container,this.addChild(this._animationLayer)},i.prototype.applyToSymbols=function(a){this._allSymbols.forEach(a)},i.prototype.applyToReels=function(a){this._reels.forEach(a)},i.prototype.hideReel=function(a){this._reels[a-1].alpha=0},Object.defineProperty(i.prototype,"isSpinning",{get:function(){return this._reelsSpinning>0},enumerable:!0,configurable:!0}),i.EVENT_REEL_DROPPED="aperture_reel_dropped",i.EVENT_SYMBOL_DROPPED="aperture_symbol_dropped",i.EVENT_TEASE_REEL="aperture_tease_reel",i.EVENT_TEASE_REEL_END="aperture_tease_reel_end",i.EVENT_REELS_DROPPED="aperture_all_reels_dropped",i.EVENT_REELS_SPIN_START="aperture_reels_start",i.PROMOTIONAL_PANEL_CHANGE="promotional_panel_change",i.STOP_REEL_SPINNING="stop_reel_spinning",i._AutoPlay=!1,i}(PIXI.Container);b.Aperture=m;var n=function(b){function c(a,c,d){var e=b.call(this)||this;return e._setup=d,e._assets=c,e._aperture=a,e._static=new PIXI.Sprite,e.addChild(e._static),e.scale.set(e._setup.default_symbol_scale||1),e._originalPosition=e.position,e}return __extends(c,b),c.prototype.getSymbolProfile=function(){return this._symbolProfile},c.prototype.fadeOut=function(){this.alpha=.4},c.prototype.fadeIn=function(){this.alpha=1},c.prototype.onDropped=function(){},c.prototype.setSymbol=function(a){this.symbolId=a,this._symbolProfile=this._aperture.getSymbolProfile(this.symbolId),this._static.texture=this._assets.getPIXITexture(this._symbolProfile.getTextureId()),this._static.anchor.x=.5,this._static.anchor.y=.5,this._symbolProfile.isInFront()&&this.parent.addChild(this)},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.stopAnimation=function(){this.alpha=1,this.visible=!0,this._originalPosition&&(this.position=this._originalPosition)},c.prototype.animate=function(a,b){var c,d;if(this.stopAnimation(),b=b||this._symbolProfile.getMovieClipId(),this._symbolProfile.getFrameClipId()&&(c=this._assets.getMovieClip(this._symbolProfile.getFrameClipId(),!0),c.scale.set(this._setup.default_symbol_scale||1)),b)d=this._assets.getMovieClip(b,!0),d.scale.set(this._setup.default_symbol_scale||1),this.visible=!1;else var e=!1,f=5,g=setInterval(function(){this.alpha=e?1:.1,e=!e,0==f--&&clearInterval(g)}.bind(this),250);return{animationClip:d,frameClip:c}},c}(PIXI.Container);b.Symbol=n;var o=function(b){function c(c,d,e,f,g){var h=b.call(this)||this;h.rowIndex=0,h._symbols=[],h._speedM=1,h._section=0,h._isSpinning=!1,h._wasInterrupted=!1,h._assets=d,h._setup=e,h._strip=f,h._juggler=g,h._aperture=c,h._container=new PIXI.Container,h.addChild(h._container),h._symbolHeight=e.size.height/e.symbols_per_reel;for(var i=-1;i<=e.symbols_per_reel;i++){var j=new a.Slots.Symbol(c,h._assets,e);h._container.addChild(j),j.y=(i+1.5)*h._symbolHeight+(e.top_margin||0),h._symbols.push(j),j.setSymbol(f[i+1])}return h._section=0,h.changeSection(),h}return __extends(c,b),c.prototype.destroy=function(){this._juggler.remove(this)},c.prototype.dropInstant=function(a){if(this._isSpinning){this._juggler.remove(this),this.filters=null;for(var b=0;b<this._symbols.length;b++)this._symbols[b].setSymbol(a[b]);this._container.y=1*-this._symbolHeight,TweenLite.to(this._container,0,{y:-this._symbolHeight,ease:Linear.easeIn})}},c.prototype.isSpinning=function(){return this._isSpinning},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.getCentroid=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,this._setup.size.height/2)))},c.prototype.getVisibleSymbols=function(){return this._symbols.slice(1,this._symbols.length-1)},c.prototype.getSymbolIds=function(){var a=[];return this._symbols.forEach(function(b){a.push(b.symbolId)}),a},c.prototype.startSpin=function(a){this._isSpinning||(this._wasInterrupted=!1,this._finalSymbols=null,this._container.y=-this._symbolHeight,this.position.y=0,this._isSpinning=!0,TweenLite.to(this,a.start.ramp_time||0,{y:this.y-a.start.ramp_distance||0,ease:Power1.easeInOut,onComplete:function(){this._setup.motion_blur&&(this.filters=[new PIXI.filters.BlurYFilter(this._setup.motion_blur,0)]),this._juggler.add(this),TweenLite.to(this,a.accel_time||0,{_speedM:m.isQuickSpin?1:a.accel_speed||1}),TweenLite.to(this,a.start.back_delay||.5,{y:0})}.bind(this)}))},c.prototype.getSymbolCount=function(a){var b=0;return this.applyToSymbols(function(c){c.symbolId.indexOf(a)>-1&&b++}),b},c.prototype.setSymbols=function(a){var b=0;this._symbols.forEach(function(c){c.setSymbol(a[b++])})},c.prototype.getSymbol=function(a){return this._symbols[a]},c.prototype.dropSymbols=function(b,c,d,e){this._stopAnimData=b,this._onStopped=e,this._teaseSymbolProfile=c,c?(a.Core.Time.juggler.setTimeout(function(){this._finalSymbols=d.slice()}.bind(this),(4==this.reelIndex?2:1)*c.getTeaseDuration()),c.mimicNearMiss()&&(TweenLite.to(this,1,{y:this.y+this._symbolHeight*(this._setup.animation.tease_peek||.5),ease:Linear.easeIn}),d[0]=c.getId())):this._finalSymbols=d.slice()},c.prototype.applyToSymbols=function(a){this.rowIndex=0,this.getVisibleSymbols().forEach(a)},c.prototype.onUpdate=function(a){this._container.y+=this._setup.animation.spin_speed*a*this._speedM,this._container.y>0&&(this._container.y=0),this._container.y>=0&&this.changeSection()},c.prototype.changeSection=function(){this._container.y-=this._symbolHeight,--this._section<0&&(this._section=this._strip.length-1);for(var a,b,c=this._symbols.length-1;c>0;c--)a=this._symbols[c-1],b=this._symbols[c],a&&b.setSymbol(a.symbolId);this._finalSymbols?(this._symbols[0].setSymbol(this._finalSymbols.pop()),this._finalSymbols.length||this.animateReelStop()):this._symbols[0].setSymbol(this._strip[this._section])},c.prototype.animateReelStop=function(){function a(){c.applyToSymbols(function(a){a.onDropped(),d.instance.emit(m.EVENT_SYMBOL_DROPPED,a,c),c.rowIndex++})}var b=this,c=this;this._isSpinning=!1,this._juggler.remove(this),this.filters=null,this._stopAnimData&&(this._container.y=-c._symbolHeight+this._stopAnimData.drop.bounce_distance,TweenLite.to(this._container,this._stopAnimData.drop.bounce_time,{y:-c._symbolHeight,ease:Power2.easeIn,onComplete:function(){a(),c._onStopped(c),b._teaseSymbolProfile&&d.instance.emit(m.EVENT_TEASE_REEL_END,b)}}))},c.blurDistance=0,c}(PIXI.Container);b.Reel=o;var p=function(){function a(a){this._aperture=a}return a.prototype.getStrip=function(a){return this._aperture[a-1]},a.prototype.getReelCount=function(){return this._aperture.length},a.prototype.getVisibleStrip=function(a){var b=this._aperture[a-1];return b=b.slice(1,b.length-1)},a.prototype.getAperture=function(){return this._aperture},a.prototype.getVisibleAperture=function(){var b=[];return this._aperture.forEach(function(a){b.push(a.slice(1,a.length-1))}),new a(b)},a.prototype.isSymbolVisible=function(a,b){return this.getVisibleStrip(b).indexOf(a)>-1},a.prototype.getOccurrences=function(a,b){var c=[];b=b||this._aperture.length;for(var d=0;d<b;d++)this.isSymbolVisible(a,d+1)&&c.push(d+1);return c},a}();b.ApertureResponse=p;var q=function(a){function b(b){var c=a.call(this,b)||this;return c.totalWinCash=0,c.totalWinCredits=0,c._wins=[],c.winMultiplier=b.eval.multiplier||1,c.aperture=new p(b.eval.aperture),b.eval.wins&&b.eval.wins.detail&&b.eval.wins.detail.length>0&&(c.totalWinCash=b.eval.wins.cash,c.totalWinCredits=b.eval.wins.credits,b.eval.wins.detail.sort(function(a,b){return b.credits-a.credits}),b.eval.wins.detail.forEach(function(a){var b=new r(a);this._wins.push(b)}.bind(c))),c}return __extends(b,a),b.prototype.getFeatureWin=function(){var a;return this.applyToAllWins(function(b){b.getFeatureId()&&(a=b)}),a},b.prototype.getCashWinFormatted=function(){return i.format(this.totalWinCash)},b.prototype.applyToAllWins=function(a){this.getWins().forEach(a)},b.prototype.getWins=function(){return this._wins.slice()},b.prototype.getSingleWin=function(){return this._wins[0]},b.prototype.getWinCount=function(){return this._wins.length},b}(k);b.SpinResults=q;var r=function(){function a(a){this._data=a}return a.prototype.getWinFormatted=function(){return i.format(this.getWinCash())},a.prototype.getSubCount=function(){return this._data.sub_count},a.prototype.getMultiplier=function(){return this._data.multiplier},a.prototype.getFeatureId=function(){return this._data.feature},a.prototype.getPositions=function(){return this._data.positions},a.prototype.getLine=function(){return this._data.line||0},a.prototype.getType=function(){return this._data.type},a.prototype.getWinCredits=function(){return this._data.credits},a.prototype.getWinCash=function(){return this._data.cash||0},a.prototype.getSymbolId=function(){return this._data.symbol},a.prototype.getOAK=function(){return this._data.oak},a.prototype.getDescription=function(){var b;switch(this.getType()){case a.TYPE_LINE:b=h.getPhrase("line_x_wins",{line:this.getLine()}),b+=i.format(this.getWinCash()),this.getWinCash()>0&&d.instance.emit(e.ON_PLAYER_PROMPT_WIN,i.format(this.getWinCash()));break;case a.TYPE_SCATTER:b=h.getPhrase("scatter_wins",{win:i.format(this.getWinCash())}),this.getWinCash()>0&&d.instance.emit(e.ON_PLAYER_PROMPT_WIN,i.format(this.getWinCash()));break;case a.TYPE_WAY:}return b},a.TYPE_LINE="$LINE",a.TYPE_WAY="$WAY",a.TYPE_SCATTER="$SCATTER",a}();b.SlotWin=r;var s=function(){function a(a){this.rule=a.rule,this._oak=a.oak}return a.prototype.getOAKMultiplier=function(a){return this._oak?this._oak["x"+a]:0},a.RULE_LINE_LEFT="$LINE_LEFT",a.RULE_LINE_RIGHT="$LINE_RIGHT",a.RULE_LINE_BOTH="$LINE_BOTH",a.RULE_SCATTER="$SCATTER",a.RULE_WAY_LEFT="$WAY_LEFT",a.RULE_WAY_RIGHT="$WAY_RIGHT",a.RULE_WAY_BOTH="$WAY_BOTH",a}();b.SymbolPays=s;var t=function(){function a(a,b,c){this._data=b,this._data.id=a,this._data.pays=c}return a.prototype.isInFront=function(){return this._data.bring_to_front},a.prototype.getAnimationDuration=function(){return this._data.animation.duration},a.prototype.getId=function(){return this._data.id},a.prototype.getTextureId=function(){return this._data.texture},a.prototype.getMovieClipId=function(){return this._data.animation.clip?this._data.animation.clip.id:null},a.prototype.getMovieClipOffsets=function(){return this._data.animation.clip.offsets||{x:0,y:0}},a.prototype.getDropClipId=function(){return this._data.animation.drop},a.prototype.getActiveClipId=function(){return this._data.animation.active},a.prototype.getFrameClipId=function(){return this._data.animation.frame},a.prototype.getAudioDropId=function(){return this._data.audio.drop},a.prototype.getAudioWinId=function(){return this._data.audio.win},a.prototype.getPays=function(){return new s(this._data.pays)},a.prototype.mimicNearMiss=function(){return!!this._data.tease&&Math.random()<=(this._data.tease.near_miss||0)},a.prototype.getTeaseDuration=function(){return this._data.tease.duration||1},a.prototype.getTeaseAudioId=function(a){return this._data.tease&&this._data.tease.audio?this._data.tease.audio[a]?this._data.tease.audio[a]:this._data.tease.audio[0]:null},a.prototype.doTease=function(a){return this.getPays().getOAKMultiplier(a)&&this._data.tease},a}();b.SymbolProfile=t}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Utils.Queue,d=a.Common.GameProfile,e=a.Common.ApplicationBase,f=a.Core.Utils,g=a.Common.GameEvents,h=a.Core.Lang,i=a.Common.Currency,j=a.Common.Server,k=a.Core.Time.Juggler,l=function(l){function m(c,f){var h=l.call(this)||this;if(h._isSkip=!1,h._idleCycling=!1,h._currentWinMultiplier=1,h._assets=c,h._juggler=new k(!0),!f)throw"[WinManager] Required parameter 'gameId' missing in WinManager constructor in layout.  Valid constructor is : WinManager(assets, gameId)";return h._gameProfile=d.getSubGameProfile(f),h.once(a.Core.Events.ON_DESTROY,h.onDestroy,h),h.once(a.Core.Events.ON_CREATE,h.onCreate,h),e.instance.on(g.ON_GAME_CHANGED,h.onGameChanged,h),e.instance.on(g.ON_GET_GAME_RESULTS,h.onPlayerBet,h),e.instance.on(j.RESPONSE_RESULTS,h.onResultsReady,h),e.instance.on(m.STOP_SYMBOLS_ANIMATION,h.buttonClicked,h),e.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_START,h.onAutoStart,h),e.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,h.onAutoEnd,h),e.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,h.onAutoEnd,h),e.instance.on(g.ON_GET_CLEAR_ALL_SCREEN,h.onPlayerBet,h),e.instance.on(m.EVENT_FREE_SPINS_END,h.onAutoStart,h),m.setBigWinTypes({BIG_WIN:20,MEGA_WIN:50,SUPER_MEGA_WIN:100}),h}return __extends(m,l),m.setBigWinTypes=function(a){this._winBandSetup=a},m.getWinBand=function(b){var c=null;for(var d in this._winBandSetup){b>=this._winBandSetup[d]*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100&&(c=d)}return c},m.prototype.onResultsReady=function(a){},m.prototype.onDestroy=function(){this.removeAllListeners(a.Core.Events.ON_CREATE),this.removeAllListeners(a.Core.Events.ON_DESTROY),e.instance.off(g.ON_GAME_CHANGED,this.onGameChanged),e.instance.off(g.ON_GET_GAME_RESULTS,this.onPlayerBet),e.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_START,this.onAutoStart),e.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_END,this.onAutoEnd),e.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,this.onAutoEnd),e.instance.off(j.RESPONSE_RESULTS,this.onResultsReady),e.instance.off(m.STOP_SYMBOLS_ANIMATION,this.buttonClicked),e.instance.off(g.ON_GET_CLEAR_ALL_SCREEN,this.onPlayerBet)},m.prototype.onAutoEnd=function(){this._idleCycling=!0,this._isAutoPlay=!1},m.prototype.onAutoStart=function(){this._idleCycling=!1,this._isAutoPlay=!0},m.prototype.onGameChanged=function(a){this.stopWinDisplay(),this._idleCycling=a.isBaseGame()||a.isRespin()},m.prototype.onPlayerBet=function(){this.stopWinDisplay()},m.prototype.onCreate=function(b,c){if(this._layout=c,this._setup=b.params,void 0==a.Common.Server.free_game_name||1==a.Common.Server.free_game_name?this._aperture=c.getComponent("aperture"):void 0!=a.Common.Server.free_game_name&&1!=a.Common.Server.free_game_name&&0!=a.Common.Server.remain?this._aperture=c.getComponent("aperture1"):this._aperture=c.getComponent(this._setup.aperture_id),!this._layout.getComponentPlugin(this,"payline_renderer"))throw"[WinManager] Missing essential plugin : payline_renderer";if(!this._layout.getComponentPlugin(this,"symbol_animator"))throw"[WinManager] Missing essential plugin : symbol_animator";a.Core.Utils.touchToSkip(function(){this._isSkip}.bind(this))},m.prototype.getAperture=function(){return this._aperture},m.prototype.displaySpinResults=function(d,j){var k=new f.Queue(this._juggler);this.visible=!0;var l=d.getFeatureWin();k.add(function(b){"$BASE"===d.getNextGameId()&&void 0==a.Common.Server.winend&&(a.Common.Server.forGameFinishedRequest=!0,e.instance.emit(m.GAME_FINISHED)),b()}.bind(this)),0!==d.totalWinCash||"$FREE_SPINS"===d.getState().game||this._isAutoPlay||(e.instance.emit(g.ON_PLAYER_PROMPT_IDLE),a.Common.Server.varForDisableSpin=!0);var n=f.touchToSkip(function(){k.skip(),this.winSummaryEnd&&!this._isAutoPlay&&(this.winSummaryEnd=!1)}.bind(this));a.Core.Environment.isDesktop()&&$(document).on("keyup",function(c){32!=c.keyCode||a.Common.Server.server.isPaytableVisible||(k.skip(),e.instance.emit(b.ControlPanel.EVENT_SPACE_BAR))}.bind(this));var o=d.totalWinCash,p=d.getWins();l&&(p=p.filter(function(a){return!a.getFeatureId()}),p.push(l));var q=m.getWinBand(d.totalWinCash/100),r=m._winBandSetup.BIG_WIN*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),s=m._winBandSetup.SUPER_MEGA_WIN*a.Slots.SettingsPages.BettingSetup.getTotalBetCash();switch(q){case"BIG_WIN":k.add(function(b){a.Core.Time.juggler.setTimeout(function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3]),a.Core.Renderer.SceneManager.showSceneAsOverlay(q,{win:d.totalWinCash,celebrationEnd:!0,callback:b,OnComplete:function(){}})},250)});break;case"MEGA_WIN":k.add(function(b){a.Core.Time.juggler.setTimeout(function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3]),a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:r,celebrationEnd:!1,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3])}})},250)}),k.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(q,{win:d.totalWinCash,celebrationEnd:!0,tickupStart:r,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3])}})});break;case"SUPER_MEGA_WIN":k.add(function(b){a.Core.Time.juggler.setTimeout(function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3]),a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:r,celebrationEnd:!1,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3])}})},250)}),k.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("MEGA_WIN",{win:s,celebrationEnd:!1,tickupStart:r,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3])}})}),k.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(q,{win:d.totalWinCash,celebrationEnd:!0,tickupStart:s,callback:b,OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&navigator.vibrate([1e3])}})})}k.add(function(a){d.winMultiplier!=this._currentWinMultiplier&&e.instance.emit(m.EVENT_WIN_MULTIPLIER_CHANGE,this._currentWinMultiplier,d.winMultiplier),a()}.bind(this)),p.length?(this.visible=!0,k.add(function(b){""!=d.getState().featureName?a.Core.Time.juggler.setTimeout(function(){e.instance.emit(m.EVENT_WIN_PRESENTATION_START,d),e.instance.emit(m.EVENT_SHOW_WIN_SUMMARY,d)}.bind(this),250):(e.instance.emit(m.EVENT_WIN_PRESENTATION_START,d),e.instance.emit(m.EVENT_SHOW_WIN_SUMMARY,d)),e.instance.emit(g.ON_PLAYER_PROMPT_IDLE_KILL),this._juggler.setTimeout(b,this._setup.win_summary_duration||1e3),o&&(p.length>1?e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase("player_wins_x_caps",{win:i.format(o)}),1500):(l?e.instance.emit(g.ON_PLAYER_PROMPT,l.getDescription(),1500):e.instance.emit(g.ON_PLAYER_PROMPT,p[0].getDescription(),1500),this.winSummaryEnd=!0))}.bind(this))):!d.isNextGame("$BASE")&&!d.isGame("$BASE")||this._isAutoPlay||d.isGame("$FREE_SPINS")?this.visible=!1:(e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase("@START_GAME",1500)),d.isNextGame("$BASE")&&e.instance.emit(g.ON_PLAYER_PROMPT_IDLE));var t;p.length>1&&!this._isAutoPlay&&!d.isGame("$FREE_SPINS")&&k.add(function(a){var b=new c(this._juggler);p.forEach(function(a){b.add(function(b){e.instance.emit(m.EVENT_SHOW_WIN,a,!0,this._aperture.getSymbolProfile(a.getSymbolId()),!1),"$FREE_SPINS"!==d.getRaw().next_game&&(this.winSummaryEnd=!0),e.instance.emit(g.ON_PLAYER_PROMPT,a.getDescription(),1500),t=this._juggler.setTimeout(b,this._aperture.getSymbolProfile(a.getSymbolId()).getAnimationDuration()||this._setup.win_display_duration)}.bind(this))}.bind(this)),b.start(a)}.bind(this),!0),k.add(function(a){t&&t.stop(),d.getWinCount()>0&&d.isNextGame("$BASE")&&e.instance.emit(g.ON_PLAYER_PROMPT,h.getPhrase(" ",500)),a()}),k.add(function(a){e.instance.emit(m.EVENT_WIN_PRESENTATION_END,d),a()}),this._idleCycling&&k.add(function(b){l||(this._isSkip=!0,d.getWinCount()>0&&!1===a.Common.Server.server.stopWinTogglingInPopUp&&(this.idolCycle(p,d),this._cycleDelay=this._juggler.setInterval(function(){this.idolCycle(p,d)}.bind(this),this._setup.win_cycle_delay))),b()}.bind(this)),k.start(function(){n(),k.wasSkipped&&this.stopWinDisplay(),j()}.bind(this))},m.prototype.getPaylinePositions=function(a){return this._gameProfile.get().paylines[a-1]},m.prototype.stopWinDisplay=function(){this._aperture.stopSymbolAnimations(),this._cycleDelay&&this._cycleDelay.stop(),this.visible=!1,this._juggler.purge(),this._isSkip=!1},m.prototype.buttonClicked=function(){this._idleCycling=!1,this.stopWinDisplay()},m.prototype.idolCycle=function(a,b){this.visible=!0;var c=a.shift();e.instance.emit(g.ON_PLAYER_PROMPT,c.getDescription(),1500),a.push(c)},m.EVENT_SHOW_WIN="win_manager_show_win",m.EVENT_SHOW_WIN_SUMMARY="win_manager_show_win_summary",m.EVENT_SHOW_WIN_TEXT_ANIMATION="win_manager_show_win_text_animation",m.EVENT_WIN_PRESENTATION_END="win_manager_presentation_complete",m.SHOW_WIN_MARKER="show_win_marker",m.EVENT_MODIFY_APERTURE_START="win_manager_modifier_start",m.EVENT_MODIFY_APERTURE_START_FOR_STICKY_SYMBOLS="win_manager_modifier_start_sticky_sumbols",m.EVENT_MODIFY_APERTURE_END="win_manager_modifier_end",m.EVENT_MODIFY_APERTURE_START5="win_manager_modifier_start5",m.EVENT_MODIFY_APERTURE_START_AFTER="win_manager_modifier_start2",m.EVENT_MODIFY_APERTURE_START5_AFTER="win_manager_modifier_start52",m.GAME_FINISHED="game_finished",m.STOP_FRAME_ANIM="stop_frame_anim",m.EVENT_WIN_PRESENTATION_START="win_manager_display_win",m.EVENT_WIN_MULTIPLIER_CHANGE="win_manager_multiplier_change",m.EVENT_BIG_WIN_START="win_manager_big_win_start",m.EVENT_BIG_WIN_END="win_manager_big_win_end",m.EVENT_FREE_SPINS_END="free_spins_feature_end",m.MOBILE_WIN_VALUE_HIDE="mobile_win_value_hide",m.MOBILE_WIN_VALUE_UPDATE="mobile_win_value_update",m.EVENT_FREE_GAME_INTRO="free_game_intro",m.STOP_SYMBOLS_ANIMATION="stop_symbols_animation",m.EVENT_HIDE_LOGO="logo_hide_display",m.bigwin=0,m.megawin=0,m.intialwin=0,m}(PIXI.Container);b.WinManager=l}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Common.Server.ResponseUser,h=a.Common.ApplicationBase,i=a.Common.Server,j=a.Common.GameEvents,k=a.Core.Lang,l=a.Core.SoundManager,m=a.Common.Currency,n=a.Common.Server.ServerTime,o=a.Common.PlayerMonitoring,p=a.Common.Server.ResponseResults,q=a.Common.Server.ResponseAuth,r=a.Slots.SettingsPages.BettingSetup,s=a.Core.Time.Juggler,t=a.Core.Utils.formatTime,u=a.Core.Renderer.SceneManager;c.EVENT_HIDE="panel_hide",c.EVENT_SHOW="panel_show",c.EVENT_SHOW_WIN="panel_show_win",c.EVENT_UPDATE_FEATURE_DISPLAY="panel_update_feature_display",c.EVENT_DISABLE="panel_disable",c.EVENT_NO_TOUCHES="panel_no_touches",c.EVENT_INTERRUPT_SPIN="panel_interrupt_spin",c.EVENT_STOP_SPIN="panel_stop_spin",c.EVENT_AUTO_SPIN="panel_auto_spin",c.EVENT_AUTO_SPIN_STOP="auto_spin_stop",c.EVENT_AUTO_SPINS_START="panel_auto_spins_start",c.EVENT_STOP_LOGO_ANIM="logo_anim_stop",c.EVENT_START_LOGO_ANIM="logo_anim_start",c.EVENT_SCATTER_LOGO_ANIM="logo_scatter_anim_start",c.EVENT_AUTO_SPINS_END="panel_auto_spins_end",c.EVENT_AUTO_SPINS_ENDS="panel_auto_spins_ends",c.EVENT_QUIT_GAME="panel_quit_game",c.EVENT_SPACE_BAR="panel_space_bar",c.EVENT_RE_SPIN_BUTTON_HIDE="re_spin_button_disable",c.PROMOTIONAL_BUTTON_ENABLE="promotional_button_enable",c.HIDE_PANEL_IN_BROKEN="hide_panel_in_broken",c.SHOW_PANEL_IN_BROKEN="show_panel_in_broken",c.AUTO_SPINS_BUTTON_ENABLE="auto_spins_button_enable";var v=function(d){function v(g,n){var q=d.call(this,g,n)||this;return q._autoSpins=0,q.firstLoad=!0,q._currentIndex=0,q._juggler=new s(!0),q._isLeftHanded=1==h.getAppValue("leftHandedMode"),e.coreEvents.on(e.ON_APP_RESIZE,q.onResize,q),q.onResize(),h.instance.on(j.ON_GAME_INITIALIZED,function(){this._$textWin.hide(),this.autoSettingsPanel=new w("cp_auto_settings_panel");var b=a.Common.Server.autoPlayList;this._$autoSpinsSlider=new a.Slots.SettingsPages.SliderWidget("cp_slider_autospin_count",b[0],b[b.length],null,5),this._$autoSpinsSlider.onChange=function(b){h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,b)},setInterval(this.updateTimeDisplay.bind(this),15e3),this.updateTimeDisplay()}.bind(q)),h.instance.on(o.EVENT_ALARM_CASH_LOSS,q.onCashLossAlarm,q),h.instance.on(o.EVENT_ALARM_SINGLE_CASH_WIN,q.onSingleWinAlarm,q),h.instance.on(o.EVENT_ALARM_TOTAL_CASH_WIN,q.onTotalWinAlarm,q),h.instance.on(o.EVENT_ALARM_FEATURE_STOP,q.onFeatureStopAlarm,q),h.instance.on(o.EVENT_ALARM_STOP_ON_ANY_WIN,q.onAnyWinAlarm,q),
h.instance.on(o.EVENT_ALARM_REALITY_CHECK,q.onRealityCheck,q),h.instance.on(o.INSUFFICIENT_FUND,q.oninsufficientFund,q),h.instance.on(c.EVENT_HIDE,q.hidePanel,q),h.instance.on(c.EVENT_SHOW,q.showPanel,q),h.instance.on(c.EVENT_UPDATE_FEATURE_DISPLAY,q.onUpdateFeatureDisplay,q),h.instance.on(j.ON_GET_GAME_RESULTS,q.onGetGameResults,q),h.instance.on(j.ON_GET_CLEAR_ALL_SCREEN,q.onGetGameResults,q),h.instance.on(j.ON_RESULTS_READY,q.onResultsReady,q),h.instance.on(b.Aperture.EVENT_REELS_DROPPED,q.onReelsDropped,q),h.instance.on(b.Aperture.EVENT_TEASE_REEL,q.onReelTease,q),h.instance.on(b.WinManager.EVENT_BIG_WIN_START,q.onBigWinStart,q),h.instance.on(b.WinManager.EVENT_BIG_WIN_END,q.onBigWinEnd,q),h.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,q.onWinSummaryEnd,q),h.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,q.onWinSummary,q),h.instance.on(c.EVENT_AUTO_SPIN_STOP,q.stopAutoSpinsukgc,q),h.instance.on(c.EVENT_RE_SPIN_BUTTON_HIDE,q.disable,q),h.instance.on(c.PROMOTIONAL_BUTTON_ENABLE,q.enable,q),h.instance.on(c.HIDE_PANEL_IN_BROKEN,q.hidePanelInBrokenPopUp,q),h.instance.on(c.SHOW_PANEL_IN_BROKEN,q.showPanelInBrokenPopUp,q),h.instance.on(c.AUTO_SPINS_BUTTON_ENABLE,q.enableButtonAutoSpins,q),h.instance.on(j.ON_PLAYER_PROMPT,q.onPlayerPrompt,q),h.instance.on(j.UPDATE_BALACE,q.updateBalance,q),h.instance.on(j.PUSH_BALANCE,q.pushBalance,q),h.instance.on(j.ON_CONTINUE_GAME,q.onContinueGame,q),h.instance.on(c.EVENT_DISABLE,function(a){a?this.disable():this.enable()}.bind(q)),h.instance.on(c.EVENT_SHOW_WIN,function(a){a?(this._$textWin.text(m.format(a)),this._$textWin.show(),this._$textWin.addClass("win_update_throb")):(this._$textWin.fadeOut(),h.instance.emit(b.WinManager.MOBILE_WIN_VALUE_HIDE))}.bind(q)),h.instance.on(c.EVENT_QUIT_GAME,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.lobbyURL);b?"close"===b?window.close():window.open(b,"_parent"):window.close()}),h.instance.on(c.EVENT_NO_TOUCHES,q.onNoTouches,q),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,q.onSettingsClosed,q),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_OPEN,q.onSettingsOpen,q),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_DISPLAY_FORMAT_CHANGE,function(b){this._$textBalance.text(m.format(a.Common.Server.gameBalance)),p.current&&this._$textWin.text(m.format(p.current.getLastCashWin())),this._$textBet.text(m.format(a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))}.bind(q)),h.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_START,function(b){var c=0;b.totalWinCash<3*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()&&(c=500),c=!this.hasValue(b,"_response")&&this._autoSpins?250:2250,!a.Common.Server.interruptSpinBool||this._autoSpins||"$FREE_SPINS"==this.spinResponse.getRaw().game||"$FREE_SPINS"==this.spinResponse.getRaw().next_game||this.spinResponse.getRaw().state.featureName||(c=0),setTimeout(function(){this.onDisplayWin(b)}.bind(this),c)}.bind(q)),h.instance.on(j.ON_GAME_CHANGED,q.onGameChanged,q),h.instance.on(j.ON_GAME_READY,q.onGameReady,q),h.instance.on(j.ON_GET_GAME_RESULTS,function(){this.disable()}.bind(q)),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,function(b){var c=this;this._$textWin.text(" "),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase("@START_GAME")),setTimeout(function(){f.isDesktop()&&c._$autoSettingsPanel.hide(),c._$textBet.text(m.format(a.Slots.SettingsPages.BettingSetup.getTotalBetCash())),a.Common.Server.gameBalance&&c._$textBalance.text(m.format(a.Common.Server.gameBalance))},0)}.bind(q)),e.coreEvents.on(l.EVENT_SET_MUTE,function(a){a?(this.soundON=!1,$(document).find("#button_audio").removeClass("audio_on"),$(document).find("#button_audio").addClass("audio_off")):(this.soundON=!0,$(document).find("#button_audio").removeClass("audio_off"),$(document).find("#button_audio").addClass("audio_on"))}.bind(q)),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LEFT_HANDED_MODE,function(a){this._isLeftHanded=a,this.onResize()}.bind(q)),a.Core.Environment.isDesktop()&&$(document).on("keyup",function(b){var d=0;32!=b.keyCode||a.Common.Server.server.isPaytableVisible||(a.Common.Server.server.FreeSpinsEnd&&(d=500),setTimeout(function(){h.instance.emit(c.EVENT_SPACE_BAR),a.Common.Server.server.FreeSpinsEnd=!1},d))}.bind(q)),h.instance.on(c.EVENT_SPACE_BAR,function(){h.getAppValue("spaceToSpin")&&("none"==this._$buttonSpin.css("display")||this._$buttonSpin.hasClass("disabled")?"none"==this._$buttonStopSpin.css("display")||this._$buttonStopSpin.hasClass("disabled")||(h.instance.emit(c.EVENT_INTERRUPT_SPIN),this._$buttonStopSpin.hide()):this.onButtonSpin())}.bind(q)),h.instance.on(i.RESPONSE_OPEN,q.onOpenResponse,q),h.instance.on(i.RESPONSE_USER,q.onUserResponse,q),h.instance.on(i.RESPONSE_AUTH,function(a){return $("#info_bar .game_title").text(k.getPhrase("game_title"))}),$(document).on("click","#button_help",function(b){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.server.isPaytableVisible=!0,q._$buttonAuto.css("pointer-events","none"),q._$btnautoplayouter.css("pointer-events","none"),q._$buttonSettings.css("pointer-events","none"),$(document).find("#button_help").css("pointer-events","none"),q._$buttonNext.addClass("disabled"),q._$buttonPrev.addClass("disabled"),f.isDesktop()&&!f.isMobile()&&(q._$buttonNext.css("pointer-events","none"),q._$buttonPrev.css("pointer-events","none")),a.Core.HTML.getPageManager("MAIN").showOverlay("settings"),$("#settings_rules").trigger("click"),$(document).find("#button_help").addClass("disabled"),$("#bet_wrapper").addClass("disabled"),q._$buttonSpin.addClass("disabled_settings_item"),q._$buttonSpin.css("pointer-events","none"),q._$buttonAuto.addClass("disabled_settings_item"),q._$maxBetButton.addClass("disabled"),$("#button_settings").addClass("disabled_settings_item"),$("#settings_rules").show(),$("#settings_general").hide(),$("#settings_pays").hide(),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL)}),$.getJSON("./package.json?v=1.0.0",function(a){$("#info_bar .version").text("V "+a.version)}),q._$buttonSettings=$("#button_settings"),q._$buttonNext=$(q._$div.find(".button_next")),q._$buttonPrev=$(q._$div.find(".button_prev")),q._$buttonSettings.on("click",q.onButtonSettings.bind(q)),q._$buttonSpin=$("#button_spin"),q._$betMobile=$("#dot"),q._$buttonSpin.on("click",q.onButtonSpin.bind(q)),q._$buttonbet=$("#settings_bets1"),q._$buttonbet.on("click",q.onButtonBet.bind(q)),q._$btnautoplayouter=$("#Autoplay_btn"),q._$btnautoplayouter.on("click",q.onAutoplay.bind(q)),q._$gameWrapper=$("#game_wrapper"),q._$footer=$("#footer"),q._$info_bar=$("#info_bar"),f.isDesktop()&&q._$gameWrapper.append($("#control_panel")),q._$buttonStopAutoSpin=$("#button_stop_autospin"),q._$buttonStopAutoSpin.on("click",function(){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),h.instance.emit(c.EVENT_INTERRUPT_SPIN),this.onPlayerPrompt(k.getPhrase("START_GAME")),this.stopAutoSpins()}.bind(q)),q._$buttonStopSpin=$("#button_stop_spin"),q._$buttonStopSpin.on("click",function(){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),h.instance.emit(c.EVENT_INTERRUPT_SPIN),this._$buttonStopSpin.css("pointer-events","none"),this._autoSpins?f.isMobile()?this._$buttonStopSpin.hide():this._$buttonStopSpin.addClass("disabled"):this._$buttonStopSpin.hide()}.bind(q)),q._$buttonWrapper=$("#main_button_wrapper"),q._$betbtnWrapper=$("#bet_button_wrapper"),q._$autoWrapper=$("#Autoplay_button_wrapper"),q._$featurePanel=$("#feature_panel"),q._$panelBackground=$("#panel_background"),q._$panelBackground2=$("#panel_background2"),q._$panelBgShape=$("#panel_bg_shape"),$(document).on("click","#button_audio",function(){e.coreEvents.emit(l.EVENT_SET_MUTE,!l.globalSounds.isMuted),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK")}),q._$buttonAuto=$("#button_auto_cp"),q._$buttonAuto.on("click",function(){this._$textWin.text(" "),a.Common.Server._autoSpinsInfinite=!1,h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),l.globalSounds.isMuted||l.globalSounds.playCue("AUTOPLAY_CLICK"),"none"==this._$autoSettingsPanel.css("display")?(this.closeAllPanels(),this.autoSettingsPanel.reset(),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),this._$autoSettingsPanel.show()):this.closeAllPanels(),h.instance.emit(c.EVENT_STOP_LOGO_ANIM)}.bind(q)),q._$buttonCPStepperTotalBet=$("#cp_stepper_total_bet"),q._$buttonBetSettings=$("#cp_bet_settings"),q._$buttonBetSettings.on("click",function(){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),"none"==this._$betSettingsPanel.css("display")?(this.closeAllPanels(),this._$betSettingsPanel.show(),this._$buttonBetSettings.addClass("contract_icon")):(this._$buttonBetSettings.removeClass("contract_icon"),this.closeAllPanels())}.bind(q)),q._$maxBetButton=$("#cp_max_bet"),q._$maxBetButton.on("click",function(){var b=a.Slots.SettingsPages.BettingSetup.coinValues.length,c=a.Slots.SettingsPages.BettingSetup.getMaxBetLevel();a.Slots.SettingsPages.BettingSetup.currentCoinLevel=b,a.Slots.SettingsPages.BettingSetup.currentBetLevel=c,h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{coinLevel:b,betLevel:c})}),h.instance.on(a.Common.Server.OperatorEvents.SET_BETTING_PARAMS,function(){return new a.Slots.SettingsPages.StepperTotalBet("cp_stepper_total_bet")}),q._$betSettingsPanel=$("#cp_bet_settings_panel"),q._$autoSettingsPanel=$("#cp_auto_settings_panel"),q._$spinBackground=$("#spin_background"),q._$featureSpinsWrapper=$("#feature_spins_wrapper"),q._$scatterWrapper=$("#scatter_wrapper"),q._$extraSpinWrapper=$("#extraSpin_wrapper"),q._$freeSpinWrapper=$("#freespin_wrapper"),q._$betWrapper=$("#bet_wrapper"),q._$balanceWrapper=$("#balance_wrapper"),q._$uiButtons=$("#ui_buttons"),q._$textBalance=$("#cp_balance"),q._$textWin=$("#cp_win"),q._$textBet=$("#cp_bet"),q._$textAutoSpins=$("#cp_autocount_label"),q._$featureSpins=$("#cp_feature_spins"),q._$extraSpin=$("#extraSpin_collect"),q._$fscollect=$("#freespin_collect"),q._$featureWin=$("#cp_feature_win"),q.onNoTouches(!0),q}return __extends(v,d),v.prototype.onResultsReady=function(b,c){this._currentGame=b,this.spinResponse=c,!b.isBaseGame()||this._autoSpins&&!f.isDesktop()||1!=a.Common.Server.varForDisableSpinStop?this._autoSpins&&f.isDesktop()&&1==a.Common.Server.varForDisableSpinStop?(this._$buttonStopSpin.show(),this._$buttonStopSpin.addClass("disabled"),a.Common.Server.varForDisableSpinStop=!1):this._autoSpins&&f.isMobile()&&1==a.Common.Server.varForDisableSpinStop?(this._$buttonStopSpin.addClass("disabled"),a.Common.Server.varForDisableSpinStop=!1):(this._$buttonStopSpin.fadeOut(),this._$betMobile.fadeOut(),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL)):(this._$buttonStopSpin.show(),this._$buttonStopSpin.removeClass("disabled"),a.Common.Server.varForDisableSpinStop=!1)},v.prototype.onBigWinStart=function(){h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL)},v.prototype.onWinSummary=function(){},v.prototype.onWinSummaryEnd=function(){p.current.getNextGameId()},v.prototype.onBigWinEnd=function(){this.disable(),this._$buttonWrapper.hide()},v.prototype.onReelTease=function(){this._$buttonStopSpin.hide()},v.prototype.onGetGameResults=function(){this._$textWin.fadeOut(),h.instance.emit(b.WinManager.MOBILE_WIN_VALUE_HIDE),this.closeAllPanels()},v.prototype.closeAllPanels=function(){this._$betSettingsPanel.hide(),this._$autoSettingsPanel.hide(),this._$buttonBetSettings.removeClass("contract_icon")},v.prototype.onUpdateFeatureDisplay=function(a){"NONE"==a.label?($("#feature_spins_wrapper").hide(),$("#cp_feature_win").hide()):($("#feature_spins_wrapper").show(),$("#cp_feature_win").show(),a.label&&(this._$featureSpinsWrapper.find(".meter_title").text(a.label),this._$scatterWrapper.find(".meter_title").text(a.label),this._$extraSpinWrapper.find(".meter_title").text(a.label),this._$freeSpinWrapper.find(".meter_title").text(a.label))),(a.spins||0==a.spins)&&(this._$featureSpins.text(a.spins),this._$fscollect.text(a.spins)),(a.extraSpin||0==a.extraSpin)&&this._$extraSpin.text(a.extraSpin),(a.win||0==a.win)&&this._$featureWin.text(m.format(a.win))},v.prototype.onNoTouches=function(a,b){a?(this._$div.css("pointer-events","none"),this.disable(),$(document).find("#button_audio").css("pointer-events","all")):(this._$div.css("pointer-events","none"),this.enable())},v.prototype.onGameReady=function(a,b){a.isBaseGame()&&(this._$featureSpins.text(""),this._$extraSpin.text(""),this._$fscollect.text(""),this._$featureWin.text(""))},v.prototype.onGameChanged=function(a,b){this.onResize(),a.isBaseGame()||a.isRespin()?(this._$footer.hide(),this.enable(),this.onNoTouches(!1),this._$featurePanel.fadeOut(),this._$buttonWrapper.fadeIn(),this._$betWrapper.fadeIn(),this._$info_bar.removeClass("bright"),f.isDesktop()&&(this._$balanceWrapper.css("right",""),this._$panelBackground.show(),this._autoSpins?(this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$buttonStopAutoSpin.css("pointer-events","all"),this._$textAutoSpins.show(),this._$panelBgShape.css("width","104%")):(this._$buttonAuto.fadeIn(),this._$buttonStopAutoSpin.hide(),this._$buttonStopAutoSpin.css("pointer-events","none"),this._$textAutoSpins.hide(),this._$panelBgShape.css("width","100%")))):(h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),this._$textWin.text(" "),this._$textWin.hide(),this._$footer.show(),this._$buttonAuto.fadeOut(),this._$buttonAuto.hide(),this.onNoTouches(!0),this._$featurePanel.fadeIn(),this._$featureSpinsWrapper.fadeIn(),this._$scatterWrapper.fadeIn(),this._$extraSpinWrapper.fadeIn(),this._$freeSpinWrapper.fadeIn(),this._$info_bar.addClass("bright"),f.isDesktop()?(this._$buttonSpin.hide(),this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$featureSpinsWrapper.hide(),this._$panelBgShape.css("width","100%")):(this._$buttonSpin.fadeOut(),this._$betbtnWrapper.hide(),this._$autoWrapper.hide())),e.coreEvents.emit(l.EVENT_SET_MUTE,l.globalSounds.isMuted)},v.prototype.onReelsDropped=function(a){this._autoSpins>1?this._$buttonStopSpin.addClass("disabled"):this._$buttonStopSpin.hide()},v.prototype.onSettingsOpen=function(a){f.isDesktop()&&(this._$info_bar.addClass("bright"),$("div#settings").prepend($("#control_panel")),this._$autoSettingsPanel.hide(),this.onResize())},v.prototype.onSettingsClosed=function(b){this.showPanel(),f.isDesktop()?($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),!1===a.Common.Server.promotionalFreePlaysBoolean&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$info_bar.removeClass("bright"),$("div#game_wrapper").append($("#control_panel")),this.onResize()):($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),!1===a.Common.Server.promotionalFreePlaysBoolean&&this._$btnautoplayouter.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),a.Common.Server._autoSpinsInfinite?this._$textAutoSpins.text("∞"):this._$textAutoSpins.text(b.autoSpins.toString()),this._$textAutoSpins.show()),this._autoSpins=b.autoSpins,this._autoSpins?(h.instance.emit(c.EVENT_AUTO_SPINS_START),this.onButtonSpin()):this._$textAutoSpins.hide()},v.prototype.onContinueGame=function(b,d){b.isBaseGame()&&(a.Common.Server._autoSpinsInfinite?(h.instance.emit(c.EVENT_AUTO_SPIN,this._autoSpins),this.onButtonSpin(),this.onPlayerPrompt(k.getPhrase("n_autospins_remaining",{spins:this._autoSpins})),this._$textAutoSpins.text("∞")):this._autoSpins>0&&!a.Common.Server.server._autoSpinsPaused?--this._autoSpins?(this._$textAutoSpins.text(this._autoSpins),setTimeout(function(){h.instance.emit(c.EVENT_AUTO_SPIN,this._autoSpins),0!=this._autoSpins&&a.Core.Time.juggler.setTimeout(function(){this.onButtonSpin()}.bind(this),100),this.onPlayerPrompt(k.getPhrase("n_autospins_remaining",{spins:this._autoSpins})),0==this._autoSpins&&(this.enable(),this._$buttonSpin.css("pointer-events","all"),this._$buttonStopAutoSpin.css("pointer-events","none"),this._$buttonSpin.fadeIn(),this.stopAutoSpins(),this._$buttonStopSpin.removeClass("disabled"),h.instance.emit(c.EVENT_AUTO_SPINS_END))}.bind(this),100)):(a.Common.Server.isAutoPlay=!1,this._$buttonSpin.fadeIn(),this.stopAutoSpins(),b.isBaseGame()&&this.enable(),this._$buttonSpin.css("pointer-events","all"),h.instance.emit(c.EVENT_AUTO_SPINS_END)):(a.Common.Server.varForEnableSpinStop&&this._$buttonStopSpin.hide(),this.enable()))},v.prototype.stopAutoSpinsukgc=function(){this.stopAutoSpins()},v.prototype.stopAutoSpins=function(){h.instance.emit(c.EVENT_AUTO_SPINS_END),this._autoSpins=0,o.reset(),this._$textAutoSpins.hide(),this._$buttonStopAutoSpin.hide(),this._$buttonStopAutoSpin.css("pointer-events","none"),o.reset(),a.Common.Server._autoSpinsInfinite=!1,f.isDesktop()&&(this._$buttonStopSpin.hide(),this._$buttonAuto.show(),void 0==a.Common.Server.free_game_name&&1==a.Common.Server.varBigWinAvailable&&this._$buttonAuto.addClass("disabled"),a.Common.Server.varAutoBtnEnable=!0,this._$buttonStopAutoSpin.hide(),this._$panelBgShape.css("width","100%"))},v.prototype.onButtonSpin=function(c){l.globalSounds.stopCue("WIN_COUNT"),this._$buttonStopSpin.css("pointer-events","all"),a.Common.Server.varForDisableSpinStop=!0,a.Common.Server.varForEnableSpinStop=!1,this.closeAllPanels(),this._$textWin.fadeOut(),h.instance.emit(b.WinManager.MOBILE_WIN_VALUE_HIDE),this._juggler.purge(),l.globalSounds.playCue("SPIN_BUTTON"),this._autoSpins||o.reset(),this._$buttonSpin.css("pointer-events","none"),f.isMobile()?setTimeout(this.startSpin.bind(this),250):this.startSpin()},v.prototype.onButtonBet=function(b){l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_EVENT_OUTER)},v.prototype.onAutoplay=function(b){"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),this._$textWin.text(" "),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTOPLAY_EVENT_OUTER)},v.prototype.startSpin=function(){g.current&&(g.current.getBalance()>=r.getTotalBetCash()?h.instance.emit(j.ON_GET_GAME_RESULTS):h.instance.emit(o.INSUFFICIENT_FUND)),this._autoSpins?(a.Common.Server._autoSpinsInfinite?this._$textAutoSpins.text("∞"):this._$textAutoSpins.text(this._autoSpins-1),this._$textAutoSpins.show(),f.isDesktop()?(this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$buttonStopAutoSpin.css("pointer-events","all"),this._$panelBgShape.css("width","104%")):(this._$buttonStopAutoSpin.fadeIn(),this._$btnautoplayouter.css("pointer-events","none"),this._$buttonStopAutoSpin.css("pointer-events","all"),a.Common.Server.isAutoPlay=!0)):(f.isDesktop()?(this._$buttonAuto.show(),this._$buttonStopAutoSpin.hide(),this._$buttonStopAutoSpin.css("pointer-events","none"),this._$panelBgShape.css("width","100%")):this._$buttonStopAutoSpin.fadeOut(),a.Common.Server.isAutoPlay=!1)},v.prototype.updateBalance=function(a){this._$textBalance.text(m.format(100*a.toFixed(2)))},v.prototype.pushBalance=function(a){var b=100*(Number(a.data.balance)+Number(a.data.free_balance));this._$textBalance.text(m.format(b))},v.prototype.updateTimeDisplay=function(){var a=n.getFormattedTime(),b=$(this._$div).find(".local_time");if(f.isMobile()&&f.isLandscape()){q.current,k.getPhrase("game_title");b.html('<span id="local-time-land">'+a+"</span>")}else b.text(a)},v.prototype.onButtonSettings=function(){h.instance.emit(c.EVENT_STOP_LOGO_ANIM),this._$buttonAuto.css("pointer-events","none"),this._$btnautoplayouter.css("pointer-events","none"),this._$buttonSettings.css("pointer-events","none"),$(document).find("#button_help").css("pointer-events","none"),"iOS"!==a.Core.Environment.getPlatformData().os.family&&f.isMobile()&&navigator.vibrate([100]),l.globalSounds.isMuted||l.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.server.isPaytableVisible=!0,$("#bet_wrapper").addClass("disabled"),a.Common.Server.server.previousID,$("#settings_general").trigger("click"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,"settings_general"===a.Common.Server.server.previousID),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,"settings_general"!==a.Common.Server.server.previousID),$("#settings_general").show(),$("#settings_pays").show(),$("#settings_rules").hide(),$(document).find("#button_help").addClass("disabled"),this._$maxBetButton.addClass("disabled"),this._$buttonAuto.addClass("disabled"),this._$btnautoplayouter.addClass("disabled"),this._$buttonSpin.addClass("disabled"),this._$buttonSettings.addClass("disabled"),this._$buttonSpin.css("pointer-events","none"),h.instance.emit(j.ON_PLAYER_PROMPT_IDLE_KILL),h.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase(" ")),this._$textWin.text(" "),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings")},v.prototype.onDisplayWin=function(b){var c=1;if(!this.hasValue(b,"_response")&&this._autoSpins&&(c=.25),b.totalWinCash){this._$textWin.text(""),this._$textWin.show(),this._$textWin.addClass("win_update_throb");var d={win:0};TweenLite.to(d,c,{win:b.totalWinCash,onUpdate:function(){this._$textWin.text(m.format(d.win))}.bind(this),onComplete:function(){this._$textWin.removeClass("win_update_throb"),(!a.Common.Server.varForDisableSpin&&void 0==a.Common.Server.free_game_name||void 0==a.Common.Server.free_game_name&&a.Common.Server.varAutoBtnEnable)&&(this.enable(),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonSpin.fadeIn(),0==this._autoSpins&&(this._$buttonSettings.removeClass("disabled"),this._$buttonAuto.css("pointer-events","all"),this._$btnautoplayouter.css("pointer-events","all"),this._$buttonSettings.css("pointer-events","all"),$(document).find("#button_help").css("pointer-events","all"),$(document).find("#button_help").removeClass("disabled")),a.Common.Server.isAutoPlay||(this._$buttonAuto.removeClass("disabled"),this._$btnautoplayouter.removeClass("disabled"),this._$buttonCPStepperTotalBet.removeClass("disabled")),a.Slots.SettingsPages.BettingSetup.currentCoinLevel!=a.Slots.SettingsPages.BettingSetup.coinValues.length&&this._$buttonNext.removeClass("disabled"))}.bind(this)})}},v.prototype.hasValue=function(a,b){return a.hasOwnProperty(b)},v.prototype.onPlayerPrompt=function(a,b){var c=$(this._$div).find(".prompt");c.html(a),c.show()},v.prototype.disable=function(){this._$buttonSettings.addClass("disabled"),this._$buttonSettings.css("pointer-events","none"),$(document).find("#button_help").addClass("disabled"),$(document).find("#button_help").css("pointer-events","none"),this._$buttonNext.addClass("disabled"),this._$buttonPrev.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","none"),$(document).find("#button_home").addClass("disabled"),this._$buttonAuto.addClass("disabled"),this._$buttonAuto.css("pointer-events","none"),this._$buttonSpin.addClass("disabled"),this._$buttonSpin.css("pointer-events","none"),this._$buttonBetSettings.addClass("disabled"),this._$buttonCPStepperTotalBet.addClass("disabled"),this._$btnautoplayouter.addClass("disabled"),this._$btnautoplayouter.css("pointer-events","none")},v.prototype.enableButtonAutoSpins=function(){$("#main_button_wrapper").show(),this._$buttonAuto.removeClass("disabled")},v.prototype.enable=function(b){a.Common.Server.varForDisableSpin&&(this._$buttonSettings.removeClass("disabled"),$(document).find("#button_help").removeClass("disabled")),a.Slots.SettingsPages.BettingSetup.currentCoinLevel===a.Slots.SettingsPages.BettingSetup.coinValues.length?(this._$buttonPrev.removeClass("disabled"),this._$buttonNext.addClass("disabled")):100*a.Slots.SettingsPages.BettingSetup.currentCoinLevel===a.Slots.SettingsPages.BettingSetup.coinValues[0]?a.Common.Server.varForDisableSpin&&(this._$buttonPrev.addClass("disabled"),this._$buttonNext.removeClass("disabled")):(this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled")),a.Common.Server.freespinsContinue||(a.Common.Server.isAutoPlay?1==a.Common.Server.varAutoBtnEnable&&(this._$buttonAuto.removeClass("disabled"),this._$btnautoplayouter.removeClass("disabled"),a.Common.Server.varBigWinAvailable=!1):a.Common.Server.varForDisableSpin&&(this._$buttonAuto.removeClass("disabled"),this._$btnautoplayouter.removeClass("disabled"),this._$buttonCPStepperTotalBet.removeClass("disabled"))),f.isMobile()&&this._$btnautoplayouter.removeClass("disabled"),1==a.Slots.SettingsPages.BettingSetup.currentCoinLevel&&(this._$buttonPrev.css("pointer-events","none"),this._$buttonNext.css("pointer-events","all")),a.Slots.SettingsPages.BettingSetup.currentCoinLevel==a.Slots.SettingsPages.BettingSetup.coinValues.length?(this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","all")):a.Slots.SettingsPages.BettingSetup.currentCoinLevel>1&&a.Slots.SettingsPages.BettingSetup.currentCoinLevel<a.Slots.SettingsPages.BettingSetup.coinValues.length&&(this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all")),a.Common.Server.varForDisableSpin&&(this._$buttonCPStepperTotalBet.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonAuto.css("pointer-events","all"),this._$btnautoplayouter.css("pointer-events","all"),this._$buttonSettings.css("pointer-events","all"),$(document).find("#button_help").css("pointer-events","all"),this._$buttonBetSettings.removeClass("disabled"),this._$buttonSpin.fadeIn())},v.prototype.hidePanelInBrokenPopUp=function(){this._$panelBackground.hide()},v.prototype.showPanelInBrokenPopUp=function(){this._$panelBackground.show()},v.prototype.hidePanel=function(){this._$div.hide()},v.prototype.showPanel=function(){this._$div.fadeIn()},v.prototype.onAnyWinAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_any_win")),this.stopAutoSpins()},v.prototype.onFeatureStopAlarm=function(a){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_feature_stop")),this.stopAutoSpins(),f.isDesktop&&this._$buttonAuto.hide()},v.prototype.onSingleWinAlarm=function(b){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_single_win")),this.stopAutoSpins(),a.Common.Server.varForDisableSpin=!0},v.prototype.onTotalWinAlarm=function(b){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_total_win")),this.stopAutoSpins(),a.Common.Server.varForDisableSpin=!0},v.prototype.onCashLossAlarm=function(b){window.vex.dialog.buttons.YES.text=k.getPhrase("ok_caps"),window.vex.dialog.alert(k.getPhrase("auto_play_limit_loss")),this.stopAutoSpins(),a.Common.Server.varForDisableSpin=!0},v.prototype.onRealityCheck=function(b){var c=this;a.Common.Server.server._autoSpinsPaused=!0,window.vex.dialog.buttons.YES.text=k.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=k.getPhrase("quit"),window.vex.dialog.confirm({message:k.getPhrase("reality_check_msg",{minutes:t(b)}),callback:function(b){b?a.Common.Server.server._autoSpinsPaused&&(a.Common.Server.server._autoSpinsPaused=!1,c.onContinueGame(c._currentGame,!1)):f.exit()}})},v.prototype.oninsufficientFund=function(){var b=this;window.vex.dialog.buttons.YES.text=k.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=k.getPhrase("quit"),this.stopAutoSpins(),this._$buttonStopSpin.hide(),window.vex.dialog.confirm({message:k.getPhrase("err_insufficient_funds"),callback:function(c){if(1==c){var d=(new Date).getTime();e.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,null,d),h.instance.emit(j.ON_PLAYER_PROMPT,k.getPhrase("click_spin_to_start")),h.instance.emit(j.ON_PLAYER_PROMPT_WIN,""),b._$buttonStopSpin.hide(),b.enable()}else f.exit()}})},v.prototype.onResize=function(){if(this._$gameWrapper)if(f.isFullScreenAvailable()&&f.isMobile()&&f.goFullScreen(),this.updateTimeDisplay(),f.isDesktop()||(f.isLandscape()?this._$gameWrapper.append($("#control_panel")):$("body").append($("#control_panel"))),this._$div=$("#control_panel"),f.isMobile()&&this._$spinBackground)f.isPortrait()?(this._$panelBackground.css("top",this._$gameWrapper.height()),this._$panelBackground.css("width",this._$gameWrapper.width()),this._$spinBackground.css("top",this._$panelBackground.position().top),this._$spinBackground.css("height",this._$footer.position().top-this._$spinBackground.position().top+65+"px"),this._$buttonWrapper.css("left",this._$spinBackground.width()/1.83+"px"),this._$buttonWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/2+10+"px"),this._$betbtnWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this._$autoWrapper.css("top",this._$panelBackground.position().top+this._$spinBackground.height()/1.9+50+"px"),this._isLeftHanded&&(this._$betbtnWrapper.css("left",""),this._$autoWrapper.css("left","72.1%")),this._$footer.append(this._$uiButtons)):(this._$panelBackground.css("bottom",""),this._$panelBackground.css("top",0),this._$buttonSettings.css("bottom",""),this._$panelBackground.css("width",this._$gameWrapper.width()),this._$panelBackground.append(this._$uiButtons),this._$buttonWrapper.css("top","54%"),this._$betbtnWrapper.css("top","38%"),this._$autoWrapper.css("top","79%"),this._isLeftHanded?(this._$buttonWrapper.css("right",""),this._$buttonWrapper.css("left","6%"),this._$betbtnWrapper.css("right",""),this._$betbtnWrapper.css("left","5%"),this._$autoWrapper.css("right",""),this._$autoWrapper.css("left","5.1%")):(this._$buttonWrapper.css("left","74%"),this._$buttonWrapper.css("right",""),this._$betbtnWrapper.css("left",""),this._$autoWrapper.css("left",""),this._$autoWrapper.css("right","")));else if(f.isDesktop()){var b=this._$gameWrapper.height()/720,c={transform:"scale("+b+")","transform-origin":"top left",width:"1280px",height:"720px"};a.Slots.SettingsPages.SliderWidget.scaleFactor=b;var d=$("div#settings");d&&"block"==d.css("display")?(this._$div.attr("style",""),this._$div.css({width:c.width,height:c.height}),d.css(__assign({},this._$gameWrapper.css(["height","width","margin-left","position","left","top","margin-top"]),c))):this._$div.css(c)}},v.prototype.onUserResponse=function(b,c){b.getBalance();(!u.getCurrentScene()||"$BASE"===u.getCurrentScene().getSceneProfile().id)&&this._$textBalance.text(m.format(a.Common.Server.gameBalance))},v.prototype.onOpenResponse=function(b,c){void 0===c&&(c="$BASE"),"$BASE"===b.getGameId()&&void 0!=g.current&&this._$textBalance.text(m.format(a.Common.Server.gameBalance))},v.isCheck=!1,v}(d);c.ControlPanel_HTML5=v;var w=function(){function b(c){var d=this;this.AUTO_SPIN_VALUES=[],this._state=x.COLLAPSED,this.changeAutoPlayButtonState=function(b){d._spinMultiselect.value()>0&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):!(d._spinMultiselect.value()+"").localeCompare("∞")&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):d._$startButton.addClass("disabled"),d._noOfAutoPlaySpin=d._spinMultiselect.value().toString()},this.updateToggleButton=function(a){if(f.isDesktop()){var b=d._$toggleContainer.html(),c=k.getPhrase(d.isChecked?"settings_autoplay_advanced":"settings_autoplay_basic"),e=k.getPhrase(d.isChecked?"settings_autoplay_basic":"settings_autoplay_advanced")
;d._$toggleContainer.html(b.replace(e,c)+(a?c:"")),d.isChecked?$("#cp_auto_toggle_button").removeClass("down"):$("#cp_auto_toggle_button").addClass("down")}},this._$div=$(c),this.AUTO_SPIN_VALUES=a.Common.Server.autoPlayList,a.Common.Server._autoSpinsInfinite=!1,this._$singleWinLimit=$("#cp_auto_single_win_limit"),this._$totalWinLimit=$("#cp_auto_total_win_limit"),this._$lossLimit=$("#cp_auto_loss_limit"),this._$stopOnFeatureWin=$("#cp_auto_stop_on_feature_win"),this._$stopOnAnyWin=$("#cp_auto_stop_on_any_win"),this._$startButton=$("#cp_auto_start_button"),this._$toggleContainer=$(".cp_auto_toggle_container"),this._$advancedInputs=$("#cp_auto_advanced");var e=a.Common.Server.UKGC;e&&(this._state=x.EXPANDED,this.updateToggleButton(!0)),this._state==x.COLLAPSED?(this._$advancedInputs.css("height","0"),$("#cp_auto_toggle_button").addClass("down")):this._$toggleContainer.on("click",function(a){a.stopImmediatePropagation(),a.preventDefault(),d._state=d.isChecked?x.EXPANDED:x.COLLAPSED,d._$advancedInputs.css("height",d.isChecked?"0":""),d.updateToggleButton()}),this._$singleWinLimit.attr("placeholder","0"),this._$totalWinLimit.attr("placeholder","0"),this._$lossLimit.attr("placeholder","0"),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,this.changeAutoPlayButtonState,this),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,this.changeAutoPlayButtonState,this),h.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,this.changeAutoPlayButtonState,this),this._singleWinLimit=new z(this._$singleWinLimit,function(b){d.changeAutoPlayButtonState(),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,b)}),this._totalWinLimit=new z(this._$totalWinLimit,function(b){d.changeAutoPlayButtonState(),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,b)}),this._lossLimit=new z(this._$lossLimit,function(c){b._lossLimitValue=isNaN(c)?0:c,(Number(d._noOfAutoPlaySpin)>0||"∞"==d._noOfAutoPlaySpin)&&(c>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$lossLimit.removeClass("flash-item"),d.changeAutoPlayButtonState(),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,c),d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):isNaN(c)||c<a.Slots.SettingsPages.BettingSetup.getTotalBetCash()/100?(d._$startButton.addClass("disabled"),d._$lossLimit.addClass("flash-item")):d._$lossLimit.addClass("flash-item"))}),this._spinMultiselect=new y($("#spin_count_chooser"),this.AUTO_SPIN_VALUES,function(b){b>0?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):"∞"==b?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):d._$startButton.addClass("disabled"),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,a.Common.Server.server.isCheck),(d._spinMultiselect.value()+"").localeCompare("∞")||(a.Common.Server._autoSpinsInfinite=!0)}),this._$stopOnAnyWin.on("click",function(b){var c=this.checked;a.Common.Server.server.isCheck=c,o.setWinStop(c),h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,c)}),this._$startButton.on("click",function(b){return h.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,{autoSpins:d._spinMultiselect.value()})})}return Object.defineProperty(b.prototype,"isChecked",{get:function(){return this._state==x.COLLAPSED},enumerable:!0,configurable:!0}),b.prototype.reset=function(){this._$lossLimit.removeClass("flash-item"),this._spinMultiselect.reset(),this._lossLimit.reset(),this._singleWinLimit.reset(),this._totalWinLimit.reset(),this._$stopOnAnyWin.attr("checked",!1),this._$stopOnFeatureWin.attr("checked",!1),a.Common.Server.server.isCheck=!1},b}();c.AutoSettingsPanel=w;var x;!function(a){a[a.COLLAPSED=0]="COLLAPSED",a[a.EXPANDED=1]="EXPANDED"}(x=c.AutoSettingsPanelState||(c.AutoSettingsPanelState={}));var y=function(){function a(a,b,c){void 0===c&&(c=null);var d=this;this._$div=a,this._values=b,this._changeHandler=c,this._idx=0,this._maxIdx=0,this._selectedIdx=-1,this._$prevBtn=a.find(".button_arrow.left"),this._$nextBtn=a.find(".button_arrow.right"),this._$items=a.find(".multiselect-items .panel_icon").toArray().map(function(a){return $(a)}),this._maxIdx=Math.floor((this._values.length-1)/this._$items.length),this._$prevBtn.on("click",function(a){l.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx-1)}),this._$nextBtn.on("click",function(a){l.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx+1)});var e=this;a.find(".multiselect-items .panel_icon").on("click",function(a){l.globalSounds.playCue("GENERIC_CLICK"),e._selectedIdx=e.getIdx(e._idx,$(this).index()),e.updateItems(),c&&c(e._values[e._selectedIdx])}),this.updatePage(this._idx)}return a.prototype.value=function(){return this._selectedIdx>-1?this._values[this._selectedIdx]:0},a.prototype.reset=function(){this._selectedIdx=-1,this.updatePage(0),this._changeHandler&&this._changeHandler(0)},a.prototype.updatePage=function(a){this._idx=Math.max(Math.min(a,this._maxIdx),0),this.updateButtons(),this.updateItems()},a.prototype.updateButtons=function(){0==this._idx?this._$prevBtn.addClass("disabled"):this._$prevBtn.removeClass("disabled"),this._idx==this._maxIdx?this._$nextBtn.addClass("disabled"):this._$nextBtn.removeClass("disabled")},a.prototype.updateItems=function(){var a=this;this._$items.forEach(function(b,c){var d=a.getIdx(a._idx,c),e=a._values[d],f=d==a._selectedIdx;f?b.addClass("selected"):b.removeClass("selected"),b.val(e),b.find("span").text(""+e),b.find("radio").prop("checked",f)})},a.prototype.getIdx=function(a,b){return Math.max(Math.min(a*this._$items.length,this._values.length-this._$items.length),0)+b},a.prototype.getValue=function(a,b){return this._values[this.getIdx(a,b)]},a}();c.Multiselect=y;var z=function(){function a(a,b){void 0===b&&(b=null);var c=this;this._$div=a,this._changeHandler=b,this._$div.keydown(function(a){if(-1!==$.inArray(a.keyCode,[46,8,9,27,13,110,190])||65==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||67==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||88==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||a.keyCode>=35&&a.keyCode<=39){if(190==a.keyCode){var b=c._$div.val()+".",d=b.indexOf(".");if(0==d||d!=b.lastIndexOf("."))return a.preventDefault(),!1}return void c.callChangeHandler()}if((a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105))return a.preventDefault(),!1;var b=c._$div.val(),d=b.indexOf(".");if(-1!=d&&b.length-d>2)return a.preventDefault(),!1;c.callChangeHandler()})}return a.prototype.reset=function(){this._changeHandler&&this._changeHandler(0),this._$div.val("")},a.prototype.callChangeHandler=function(){var a=this;setTimeout(function(){if(a._changeHandler){var b=parseFloat(a._$div.val());a._changeHandler(b)}},1)},a}();c.MoneyInput=z}(b.ControlPanel||(b.ControlPanel={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){var b=a.Core.HTML,c=a.Core.Renderer.SceneManager,d=a.Common.Server,e=a.Common.GameProfile,f=a.Core.AssetManager,g=a.Common.Server.ResponseAlert,h=a.Core.Utils,i=a.Core.Environment,j=a.Core.Lang,k=a.Common.GameEvents,l=a.Core.SoundManager,m=a.Core.HTML.PageManager,n=a.Common.Currency,o=a.Common.PlayerMonitoring,p=a.Common.ApplicationBase,q=a.Core.Events,r=a.Slots.SettingsPages.Settings,s=a.Slots.ControlPanel,t=function(t){function u(){var a=null!==t&&t.apply(this,arguments)||this;return a._gameLogic={},a._isFirstLoad=!0,a._isAutoPlay=!1,a}return __extends(u,t),u.prototype.onAppInit=function(){t.prototype.onAppInit.call(this),f.optimizeLoading=!1,f.forceHD=!0,q.coreEvents.on(m.EVENT_ON_PAGE_LOADED,function(a){"loader"==a.id&&($("#logo_holder").hide(),$("#loader").hide(),b.getPageManager("MAIN").showPage("loader"),a.changeParent("body"),$("#remove_after_load").css("display","none"))});var c=new a.Core.Utils.Queue;c.add(function(b){a.getConfig().languages.indexOf(i.launchVariables.language)<0&&(i.launchVariables.language="eng"),j.loadDictionary(i.launchVariables.language||"eng",b)}),c.add(function(a,b){p.instance.emit(d.REQUEST_PRELOAD_STARTED,this),a()}),c.add(function(a){$("body").append("<div id='game_wrapper'></div>"),window.vex.registerPlugin(window.vexDialog),window.vex.defaultOptions.className="vex-theme-plain",a()}),c.add(function(b){window.WebFont.load({custom:{families:a.getConfig().fonts}}),b()}),c.add(function(a){i.setVariant([i.DEVICE_MOBILE,i.DEVICE_DESKTOP],i.launchVariables.variant),a()}),c.add(function(c){b.getPageManager("MAIN").loadPages(a.getConfig().html_pages,function(a,b){},function(){c()})}),c.add(function(a){r.loadGameRules(a)}),c.add(function(b){a.Core.Renderer.SceneManager.init(a.getConfig().scenes),b()}),c.add(function(b){for(var c in a.getConfig().logic)this._gameLogic[c]=a.getConfig().logic[c];b()}.bind(this)),c.add(function(a){p.instance.on(d.RESPONSE_ERROR,this.onServerError,this),p.instance.on(d.RESPONSE_AUTH,this.onServerAuthenticate,this),p.instance.on(d.RESPONSE_ALERT,this.onServerAlert,this),p.instance.on(d.RESPONSE_USER,this.onServerUser,this),p.instance.on(d.RESPONSE_RESULTS,this.onServerResults,this),p.instance.on(d.RESPONSE_STATE,this.onServerState,this),p.instance.on(d.RESPONSE_OPEN,this.onServerOpen,this),p.instance.on(s.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart,this),p.instance.on(s.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd,this),p.instance.on(k.ON_GET_GAME_RESULTS,this.onGetGameResults,this),p.instance.on(k.ON_PLAYER_PROMPT,this.onGamePlayerPrompt,this),p.instance.on(k.ON_RESULTS_DISPLAYED,this.onGameResultsDisplayed,this),p.instance.on(k.ON_GAME_READY,this.onGameReady,this),a()}.bind(this)),c.add(function(b){i.launchVariables.operator=i.launchVariables.operator||"rfg",a.getConfig().server[i.launchVariables.operator]?d.createInstance(a.getConfig().server[i.launchVariables.operator],p.instance,b):d.createInstance(a.getConfig().server.rfg,p.instance,b)}),c.add(function(a,b){p.instance.emit(d.REQUEST_PRELOAD_STARTED,this),a()}),c.add(function(b){var c=a.getConfig().preload_manifests;p.instance.emit(k.ON_LOAD_PROGRESS,0),c.forEach(function(a){f.get(a).load(a,function(){"./assets/renderer/big_win/manifest.json"!==a&&(p.instance.emit(d.REQUEST_PROGRESS_UPDATED,this),b())},function(b){"./assets/renderer/big_win/manifest.json"!==a&&p.instance.emit(k.ON_LOAD_PROGRESS,b)}.bind(this))})}),c.add(function(a){setTimeout(function(){p.instance.emit(d.REQUEST_AUTH,this),a()},2e3)}),c.start()},u.prototype.onGetGameResults=function(a){this._currentGame.getResults(a)},u.prototype.onGameReady=function(b,d){if(b.isBaseGame())if(!this._previousGame||this._previousGame.isBaseGame()||this._previousGame.isRespin())this._previousGame||p.instance.emit(k.ON_CONTINUE_GAME,this._currentGame,d);else if(0===a.RendererScenes.Scene_FreeSpins.totalWin)p.instance.emit(k.ON_CONTINUE_GAME,this._currentGame);else{var e=$("#cp_balance");e.text(n.format(a.RendererScenes.Scene_FreeSpins.balanceBeforeWin)),c.showSceneAsOverlay("FREE_SPINS_SUMMARY",{callback:function(){e.text(n.format(a.Common.Server.ResponseUser.current.getBalance())),p.instance.emit(k.ON_CONTINUE_GAME,this._currentGame)}.bind(this)})}},u.prototype.onGameResultsDisplayed=function(){p.instance.emit(d.REQUEST_OPEN)},u.prototype.onGamePlayerPrompt=function(a){},u.prototype.onServerOpen=function(b){var c=this,d=a.Core.Utils.getUrlVar("regulation")||"uk",e=this,f=0;"uk"===d.toLowerCase()&&(f=500),this._currentGame&&this._currentGame.end(),this._previousGame=this._currentGame;var g=this.getGameLogic(b.getGameId(),b.getGameState());this._currentGame&&this._currentGame.getGameId()==g.getGameId()||this._isAutoPlay&&this._currentGame.getGameId()==g.getGameId()?(this._currentGame.setState(b.getGameState()),setTimeout(function(){p.instance.emit(k.ON_CONTINUE_GAME,c._currentGame)},f)):a.Common.Server.StopCallonFreeSpin||(a.RendererScenes.Scene_FreeSpins.previousMultiplier!=a.RendererScenes.Scene_FreeSpins.multiplier?a.Core.Time.juggler.setTimeout(function(){e.changeGame(g,!1)}.bind(this),1200):e.changeGame(g,!1))},u.prototype.onServerBaseBrokenOpen=function(a,b){var c=this.getGameLogic(a.getGameId(),a.getGameState());this.changeGame(c,!0,b)},u.prototype.onServerState=function(a){p.instance.emit(k.ON_STATE_READY,a)},u.prototype.onServerResults=function(a){if(this._currentGame.getGameId()!=a.getGameId())throw"[App] Game results mismatch.  Current game id : "+this._currentGame.getGameId()+", results game id : "+a.getGameId();a.getEvaluatedResults()?(this._currentGame.setState(a.getState()),p.instance.emit(k.ON_RESULTS_READY,this._currentGame,a,!1)):p.instance.emit(d.REQUEST_OPEN)},u.prototype.onServerUser=function(a){},u.prototype.onServerAlert=function(a){a.isFatal||window.vex.dialog.alert(a.getPlayerMessage())},u.prototype.onServerAuthenticate=function(b){e.init(a.getConfig().profile),n.isoCode=b.getPlayerCurrency(),n.prefixCurrency=b.getPrefixCurrency(),n.suffixCurrency=b.getSuffixCurrency(),n.currencyDecimalPlaces=Number(b.getCurrencyDecimalPlaces()),n.localeId="en","pt_br"==n.localeId.toLowerCase()&&(n.localeId="pt-BR"),o.init(),j.scanDOM(),p.instance.emit(d.REQUEST_OPEN)},u.prototype.onServerError=function(a){},u.prototype.getGameLogic=function(a,b){if(!this._gameLogic[a])throw"Game logic module not defined : "+a;return new(h.getReference(this._gameLogic[a]))(b)},u.prototype.changeGame=function(d,e,g){var h=($("#loader"),function(){c.showScene(d.getGameId(),{gameLogic:d},function(c,f){if(d.isGame("$FREE_SPINS")&&f){a.Common.Server.server.freeSpinsLoad=!0;var h=0;a.Common.Server.free_game_name&&(h=200),setTimeout(function(){b.getPageManager("MAIN").showPage("main"),$("#remove_after_load_free").css("display","none"),$(".loadingText").css("display","none"),$(".start_Load").css("display","none"),$(".start_spinner_free").css("display","none"),$("#logo_holder").hide(),$("#loader").hide()},h*a.Common.Server.count)}clearInterval(this.interval),console.log("[App] Game scene loaded! :",d.getGameId()),this._currentGame=d,p.instance.emit(k.ON_GAME_CHANGED,d,e),p.instance.emit(k.ON_GAME_READY,d,e),"$FREE_SPINS"===d.getGameId()?p.instance.emit(k.ON_PLAYER_PROMPT,j.getPhrase(""),500):f&&d.isRespin()&&p.instance.emit(k.ON_PLAYER_PROMPT,j.getPhrase(" ")),this._isFirstLoad&&(this._isFirstLoad=!1,setTimeout(function(){b.getPageManager("MAIN").showPage("main")},1e3),p.instance.emit(k.ON_GAME_INITIALIZED),a.Common.SwipeForFullScreen.init(),1==e?setTimeout(function(){p.instance.emit(k.ON_RESULTS_READY,this._currentGame,g,!0)}.bind(this),1e3):d.isBaseGame()&&p.getAppValue("splashScreen"))}.bind(this))}.bind(this)),m=c.getSceneData(d.getGameId()),n=f.get(m.manifestFilename);if(void 0!=a.Common.Server.free_game_name){if("$FREE_SPINS"==m.id){var o=0;$("#loader_progress_bar1").val(""),i.isDesktop()?this.interval=setInterval(function(){$("#test").text(o++),p.instance.emit(k.ON_LOAD_PROGRESS_FREE,o),o>80&&clearInterval(this.interval)},500):!i.isDesktop()&&i.isMobile&&(i.isLandscape()||i.isPortrait())&&(this.interval=setInterval(function(){$("#test").text(o++),p.instance.emit(k.ON_LOAD_PROGRESS_FREE,o),o>50&&clearInterval(this.interval)},100)),a.Common.Server.server.freeSpinsLoad=!1,$("#remove_after_load_free").css("display","none"),setTimeout(function(){$(".loadingText").css("display","none"),$(".start_spinner_free").css("display","block"),$("#loader").css("display","block"),$(".start_Load").css("display","none")},50),$("#logo_holder").fadeIn(),$("#loader").fadeIn();var q=$("#loader_progress_bar1");!i.isDesktop()&&i.isPortrait()&&$("#loader_progress_bar1").css("bottom","-31%"),a.Core.HTML.getPageManager("MAIN").showPage("loader"),$("#remove_after_load").css("display","none"),p.instance.on(k.ON_LOAD_PROGRESS_FREE,function(a){a<100?TweenLite.to(q,.8,{value:100*a,ease:Linear.easeNone}):TweenLite.to(q,1,{value:100*a,ease:Linear.easeNone})},this)}l.globalSounds.fadeMusicOut(0,1e3);var r=setInterval(function(){p.instance.emit(k.ON_LOAD_PROGRESS,n.loadProgress);var a=n.loadProgress;n.isLoaded()&&(a=1,console.log("[App] Polling complete - scene ready! :",d.getGameId())),p.instance.emit(k.ON_LOAD_PROGRESS,a),clearInterval(r),setTimeout(h,500)}.bind(this),1)}else setTimeout(h,this._currentGame&&this._currentGame.isBaseGame()?500:0)},u.prototype.onAutoSpinsStart=function(){this._isAutoPlay=!0},u.prototype.onAutoSpinsEnd=function(){this._isAutoPlay=!1},u.prototype.onAppResize=function(a,b){t.prototype.onAppResize.call(this,a,b),i.isDeviceMobile()&&($("#rotate_mask").remove(),$("body").append("<div id='rotate_mask' style='z-index:999999999; width:500%; height:500%;position: fixed; left:0; top:0;background-color: black'></div>"),setTimeout(function(){$("#rotate_mask").animate({opacity:0},250,function(){$("#rotate_mask").remove()})},250))},u.prototype.onAppExit=function(){t.prototype.onAppExit.call(this),b.getPageManager("MAIN").showPage("game_over"),b.getPageManager("MAIN").getPage("game_over").changeParent("body")},u.prototype.onAppLoseFocus=function(a,b){t.prototype.onAppLoseFocus.call(this,a,b)},u.prototype.onAppGetFocus=function(a,b){t.prototype.onAppGetFocus.call(this,a,b),p.instance.emit(d.REQUEST_USER)},u.prototype.onAppException=function(a){t.prototype.onAppException.call(this,a);new g({lang:"err_server_generic",err:{msg:a},fatal:!0})},u}(p);a.App=t}(DO||(DO={}));var DO;!function(a){function b(){return{profile:{games:{$BASE:{aperture:{viewport:{width:3,height:3,hidden_positions:null}},allow_bets:!0,paytable:{W1:{name:"Wild",rule:"$LINE_LEFT",oak:{x3:{multiplier:1e3,feature:null}},substitutes:["H1","H2","H3","L1","L2","L3","M1"]},B1:{name:"SCATTER",rule:"$SCATTER",oak:{x3:{multiplier:0,feature:null}}},H1:{name:"Game Logo",rule:"$LINE_LEFT",oak:{x3:{multiplier:200,feature:null}}},H2:{name:"Queen",rule:"$LINE_LEFT",oak:{x3:{multiplier:40,feature:null}}},H3:{name:"Montage Postcard",rule:"$LINE_LEFT",oak:{x3:{multiplier:12,feature:null}}},L1:{name:"Ace",rule:"$LINE_LEFT",oak:{x3:{multiplier:8,feature:null}}},L2:{name:"King",rule:"$LINE_LEFT",oak:{x3:{multiplier:5,feature:null}}},L3:{name:"Queen",rule:"$LINE_LEFT",oak:{x3:{multiplier:3,feature:null}}},M1:{name:"Jack",rule:"$LINE_LEFT",oak:{x3:{multiplier:0,feature:null}}}},game_id:"$BASE",shawPayline:!1,paylines:[[2,5,8,11,14],[1,4,7,10,13],[3,6,9,12,15],[1,5,9,11,13],[3,5,7,11,15],[2,4,8,12,14],[2,6,8,10,14],[1,4,8,12,15],[3,6,8,10,13],[1,6,9,12,13],[2,4,7,10,14],[2,6,9,12,14],[1,5,8,11,13],[3,5,8,11,15],[2,5,7,11,14],[2,5,9,11,14],[3,4,9,10,15],[1,6,7,12,13],[3,4,8,10,15],[1,4,8,12,15]],symbolMask:{x:60,y:55,w:120,h:110,color:594196,alpha:1}},$FREE_SPINS:{aperture:{viewport:{width:3,height:3,hidden_positions:null}},game_id:"$FREE_SPINS",shawPayline:!0,paylines:[[2,5,8,11,14],[1,4,7,10,13],[3,6,9,12,15],[1,5,9,11,13],[3,5,7,11,15],[2,4,8,12,14],[2,6,8,10,14],[1,4,8,12,15],[3,6,8,10,13],[1,6,9,12,13],[2,4,7,10,14],[2,6,9,12,14],[1,5,8,11,13],[3,5,8,11,15],[2,5,7,11,14],[2,5,9,11,14],[3,4,9,10,15],[1,6,7,12,13],[3,4,8,10,15],[1,4,8,12,15]],symbolMask:{x:40,y:40,w:90,h:80,color:2103569,alpha:0}}}},server:{rfg:{game_id:c.launchVariables.gameId,url:c.launchVariables.gameURL,history_url:"",timeout:3e3,platform:"DO.Common.Server.Interface_RGS"}},preload_manifests:["./assets/renderer/base/manifest.json","./assets/renderer/big_win/manifest.json"],postload_manifeasts:["./assets/renderer/big_win/manifest.json"],fonts:["roboto","Roboto-Bold","immortal","Berlin-Sans-FB-Demi-Bold","ELEPHNT","feastofflesh","BELLB","troika","Copperplate-Gothic-Regular","BD_Cartoon_Shout"],languages:["eng"],html_pages:[{id:"loader",html:a.Core.Environment.launchVariables.branding?"./assets/html/loader.html":"./assets/html/loader-plain.html",module:"DO.HTMLPageClasses.Loader",variants_css:{default:"./assets/html/loader-default.css",mobile:{landscape:"./assets/html/loader-mobile-landscape.css",portrait:"./assets/html/loader-mobile-portrait.css"},mini:null}},{id:"error",html:"./assets/html/error.html",module:"DO.HTMLPageClasses.Error",variants_css:{default:"./assets/html/error-default.css",mobile:{landscape:null,portrait:null},mini:null}},{id:"dialog",html:"./assets/html/dialog.html",module:"DO.HTMLPageClasses.Dialog",variants_css:{default:"./assets/html/dialog-default.css",mobile:{landscape:null,portrait:null},mini:null}},{id:"main",html:"./assets/html/main.html",module:"DO.HTMLPageClasses.Main",variants_css:{default:"./assets/html/main-default.css",mobile:{landscape:"./assets/html/main-mobile-landscape.css",portrait:"./assets/html/main-mobile-portrait.css"},mini:null}},{id:"settings",html:{desktop:"./assets/html/settings-desktop.html",mobile:"./assets/html/settings-mobile.html"},module:"DO.Slots.SettingsPages.Settings",variants_css:{default:"./assets/html/settings-default.css",desktop:"./assets/html/settings-desktop.css",mobile:{landscape:"./assets/html/settings-mobile-landscape.css",portrait:"./assets/html/settings-mobile-portrait.css"},mini:null}},{id:"panel",html:{desktop:"./assets/html/panel-desktop.html",mobile:"./assets/html/panel-mobile.html"},module:"DO.Slots.ControlPanel.ControlPanel_HTML5",variants_css:{default:"./assets/html/panel-default.css",desktop:"./assets/html/panel-desktop.css",mobile:{landscape:"./assets/html/panel-mobile-landscape.css",portrait:"./assets/html/panel-mobile-portrait.css"},mini:null}},{id:"game_over",html:"./assets/html/game-over.html",module:"DO.HTMLPageClasses.GameOver",variants_css:{default:"./assets/html/game-over.css",mobile:{landscape:null,portrait:null},mini:null}}],scenes:{$BASE:{layout_id:"layout",module:"DO.RendererScenes.Scene_Base",asset_manifest:"./assets/renderer/base/manifest.json"},$FREE_SPINS:{layout_id:"layout",module:"DO.RendererScenes.Scene_FreeSpins",asset_manifest:"./assets/renderer/free_spins/manifest.json"},FREE_SPINS_SUMMARY:{layout_id:"layout_summary",module:"DO.RendererScenes.Scene_FreeSpins_Summary",asset_manifest:"./assets/renderer/free_spins/manifest.json"},BIG_WIN:{layout_id:"layout_big-win",module:"DO.RendererScenes.BigWin",asset_manifest:"./assets/renderer/big_win/manifest.json"},MEGA_WIN:{layout_id:"layout_mega-win",module:"DO.RendererScenes.BigWin",asset_manifest:"./assets/renderer/big_win/manifest.json"},SUPER_MEGA_WIN:{layout_id:"layout_super-mega-win",module:"DO.RendererScenes.BigWin",asset_manifest:"./assets/renderer/big_win/manifest.json"}},logic:{$BASE:"DO.RendererScenes.Logic_Base",$FREE_SPINS:"DO.RendererScenes.Logic_FreeSpins"}}}var c=a.Core.Environment;a.getConfig=b}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=a.Common.ApplicationBase,e=a.Common.GameEvents,f=a.Common.Server,g=a.Core.Lang,h=function(b){function c(c,h){var i=b.call(this,c,h)||this;return i.on(a.Core.Events.ON_SHOWN,function(){if(void 0==a.Common.Server.free_game_name){$("#loading_txt").text(g.getPhrase("loading_txt")),$("#loader").css("background-image","url('./assets/html/images/settings/Loading_Screen.png')"),$("#logo_holder").fadeIn();var b=$("#loader_progress_bar");d.instance.on(e.ON_LOAD_PROGRESS,function(c){void 0==a.Common.Server.free_game_name&&($("#progressMeter").text(Math.round(100*c)+"%"),d.instance.emit(f.LEANDER_REQUEST_PRELOAD_UPDATE,c),c<1?TweenLite.to(b,.5,{value:100*c,ease:Linear.easeNone}):TweenLite.to(b,.4,{value:100*c,ease:Linear.easeNone}))},this),d.instance.emit(e.ON_LOAD_PROGRESS,0)}}.bind(i)),i.on(a.Core.Events.ON_HIDDEN,function(){$("#control_panel").show(),$("#loading_txt").css("display","none"),$("#progressMeter").css("display","none"),$("#loader_progress_bar").css("display","none")}.bind(i)),i}return __extends(c,b),c}(c);b.Loader=h}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.StageSetup,d=a.Core.Events,e=a.Core.HTML.Page,f=a.Core.Environment,g=a.Common.ApplicationBase,h=a.Common.GameEvents,i=function(b){function e(e,i){var j=b.call(this,e,i)||this;j.once(a.Core.Events.ON_CREATE,function(){this._stageSetup=new c,this._stageSetup.width=960,this._stageSetup.height=540,this._stageSetup.isTransparent=!0,this._stageSetup.resolution=2,this._stageSetup.divId="renderer_canvas",this._stage=new a.Core.Renderer.Stage,this._stage.init(this._stageSetup),f.isDeviceMobile(),this._stageSetup.fps=30,this.resizeGameWrapper(this._stageSetup)}.bind(j)),d.coreEvents.on(d.ON_APP_RESIZE,function(){this.resizeGameWrapper(this._stageSetup)},j);var k=function(a){$(a.target).hasClass("no_fullscreen")||(f.goFullScreen(),$("body").off("mouseup",k))};return g.instance.on(h.ON_GAME_INITIALIZED,function(){f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),d.coreEvents.on(f.EVENT_FULL_SCREEN,function(a){!a&&f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),j}return __extends(e,b),e.prototype.resizeGameWrapper=function(a){var b=$("#game_wrapper"),c=a.width/a.height,d=window.innerWidth,e=window.innerHeight;if(d/e>c?(d=e*c,b.css("height",e+"px"),b.css("width",d+"px")):(e=f.isPortrait()&&!f.isDesktop()?d/c+105:d/c,b.css("height",e+"px"),b.css("width",d+"px")),b.css("marginLeft",-d/2+"px"),b.css("position","absolute"),b.css("left","50%"),$("#renderer_canvas").css("transform","scaleX(1.24)"),f.isPortrait()&&!f.isDesktop())b.css("top","0px"),b.css("marginTop","0px");else if("4:3"==f.getAspectRatio()){b.css("top","0px"),b.css("height","100%"),b.css("marginTop","0");var g=$("#renderer_canvas");g.css("transform","translateX(-50%) scaleX(1.3)"),g.css("left","50%")}else{var h=$("#renderer_canvas");h.css("transform","translateX(0) scaleX(1)"),h.css("left","0%"),b.css("top","50%"),b.css("marginTop",-e/2+"px")}window.scroll(0,1)},e}(e);b.Main=i}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.GameEvents,e=a.Core.HTML.Page,f=a.Core.Lang,g=function(b){function e(e,g){var h=b.call(this,e,g)||this;return h.on(a.Core.Events.ON_SHOWN,function(a){c.instance.emit(d.ON_FATAL_ERROR,a),$("#control_panel").remove(),window.vex.dialog.buttons.YES.text=f.getPhrase("reload_caps"),window.vex.dialog.alert({message:a.getPlayerMessage(),callback:function(a){window.location.reload()}})}.bind(h)),h}return __extends(e,b),e}(e);b.Error=g}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){alert("DIALOG")}.bind(e)),e}return __extends(c,b),c}(c);b.Dialog=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.exit_url);b&&("close"===b?window.close():window.location.replace(b))}.bind(e)),e}return __extends(c,b),c}(c);b.GameOver=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.SubGame,e=a.Common.GameSceneBase,f=a.Slots.Aperture,g=a.Slots.WinManager,h=a.Common.GameEvents,i=a.Slots.SpinResults,j=a.Core.Utils.Queue,k=a.Core.SoundManager,l=a.Slots.ControlPanel,m=a.Common.Currency,n=a.Common.Server,o=a.Core.Lang,p=a.Slots.SettingsPages.BettingSetup,q=a.Core.Environment,r=function(b){function d(a){var c=b.call(this,a)||this;return c.addForce(),c}return __extends(d,b),d.prototype.addForce=function(){},d.prototype.end=function(){b.prototype.end.call(this)},d.prototype.getResults=function(b){var d=a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),e={stake:{amount:d.valueOf()},type:"$BASE"};c.instance.emit(n.REQUEST_RESULTS,e)},d}(d);b.Logic_Base=r;var s=function(d){function e(){var b=null!==d&&d.apply(this,arguments)||this;return b._scattterNumCount=0,b._isAutoPlay=!1,b._autoSpinCount=0,b.AudioProfile=null,b.reelcount=-1,b.scatterIndexes=[],b.showWinTextAnimation=function(c){var d=b._layout.getComponent("win_amount"),f=b;if(d.visible=!0,b.addChild(d),c.totalWinCash>0&&"B1"==e.symbol)d.setText(a.Common.Currency.format(c.totalWinCash,!0));else if(c.totalWinCash>0&&"B1"!=e.symbol){if(q.isDesktop()){var g=b._layout.getComponent("banner");g.visible=!0,c.totalWinCash/100>=20?a.Common.ApplicationBase.instance.emit(l.EVENT_START_LOGO_ANIM):a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM)}d.setText(a.Common.Currency.format(c.totalWinCash,!0))}else 0==c.totalWinCash&&"B1"!=e.symbol?(q.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM),d.setText(a.Common.Currency.format(c.totalWinCash,!0))):0==c.totalWinCash&&"B1"==e.symbol&&(d.visible=!1);var h=new PIXI.Point(d.position.x,d.position.y),i=new TimelineLite;if(d.scale.x=.2,d.scale.y=.2,q.isDesktop())i.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),i.add([TweenLite.to(d.position,.4,{x:640,y:535,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=h,d.visible=!1,c.totalWinCash>0&&k.globalSounds.playCue("WIN_COUNT")}})]);else if(q.isPortrait()){var j=b._layout.getComponent("total_win_potrait_value"),m=new PIXI.Point(j.position.x,j.position.y);i.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),i.add([TweenLite.to(d.position,.4,{x:537.6,y:529.2,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=h,d.visible=!1}}),TweenLite.to(j.position,.4,{x:537.6,y:529.2,ease:Cubic.easeIn}),TweenLite.to(j.scale,.4,{ease:Cubic.easeOut,onComplete:function(){if(j.position=m,0==c.totalWinCash&&"B1"==e.symbol)f._layout.getComponent("total_win_potrait_value").visible=!1;else{var b={win:0};TweenLite.to(b,1,{win:c.totalWinCash,
onUpdate:function(){j.setText(a.Common.Currency.format(b.win))}.bind(this),onComplete:function(){}.bind(this)}),k.globalSounds.playCue("WIN_COUNT"),j.setText(a.Common.Currency.format(c.totalWinCash)),j.visible=!0}}})])}else q.isLandscape()&&(i.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),i.add([TweenLite.to(d.position,.4,{x:640,y:35,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=h,d.visible=!1,c.totalWinCash>0&&k.globalSounds.playCue("WIN_COUNT")}})]))},b}return __extends(e,d),e.prototype.onResize=function(f,g){d.prototype.onResize.call(this,f,g),q.isFullScreenAvailable()&&q.isMobile()&&q.goFullScreen(),q.isMobile()&&q.isLandscape()?(this._layout.getComponent("UI_Base").visible=!1,this._layout.getComponent("win_text").visible=!1,this._layout.getComponent("total_win_potrait_value").visible=!1,this._layout.getComponent("banner").visible=!0):q.isMobile()&&q.isPortrait()&&(e.isResizeGame=!0,this._layout.getComponent("UI_Base").visible=!0,this._layout.getComponent("win_text").visible=!0,this._layout.getComponent("total_win_potrait_value").visible=!0,this._layout.getComponent("banner").visible=!1),q.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM),c.instance.emit(h.ON_PLAYER_PROMPT,o.getPhrase("@footer_no_win")),q.isMobile()&&0==b.Scene_FreeSpins.totalWin&&($("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()),$("html").css("background-image","url('./assets/renderer/base/BG_background.jpg')"),$("html").css("background-size"," cover"),q.isMobile()?q.isPortrait()?(a.Core.Renderer.Stage.scaleStage(1.1,-100,-50),a.Core.Renderer.Stage.scaleStageBoth(1.1,.9,-45),this.setHTMLBackground("./assets/renderer/base/mobile/Basegame_Mobile_Portrait.jpg"),$("#banner1").css("backgound-image","url('./assets/renderer/base/mobile/Logo.png')"),$("#banner1").css("visibility","visible"),this._layout.getComponent("background").visible=!1):q.isLandscape()&&(a.Core.Renderer.Stage.scaleStageBoth(1,.97,0,15),this.setHTMLBackground("./assets/renderer/base/mobile/background.jpg"),this._layout.getComponent("background").visible=!0):q.isDesktop()&&!0===a.Common.Server.promotionalFreePlaysBoolean&&($("#panel_background").css("transform","scale(0.92)").css("bottom","20px"),this._layout.getComponent("player_prompt").scale=new PIXI.Point(.9,.9),this._layout.getComponent("player_prompt").x=265,this._layout.getComponent("player_prompt").y=485,q.isDesktop()&&(this._layout.getComponent("UI_Base").y=500))},e.prototype.onGameReady=function(b){d.prototype.onGameReady.call(this,b);var c=q.launchVariables.language.toLowerCase();if(a.Common.Server.server.RTP=m.format(100*a.Common.Server.server.RTP,!0)+"%",q.launchVariables.rm&&"dk"===q.launchVariables.rm.toLowerCase()&&$("#quick_spin").css("display","none"),q.launchVariables.language)$("#"+c).html(function(){return $(this).html().replace("demo",a.Common.Server.server.RTP)});else{this.stopAnim(),$("#banner1").css("visibility","visible"),!q.isDesktop()&&q.isLandscape();var f=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500);void 0!=f&&f.volume(.3),e.lastResults&&this._aperture.restoreAperture(e.lastResults.aperture.getAperture())}},e.prototype.onCreate=function(){var i=this;d.prototype.onCreate.call(this),$("#banner1").css("background-image","url('./assets/renderer/base/mobile/Logo.png')"),e.symbol="",q.isMobile()&&q.isLandscape()&&(this.setHTMLBackground("./assets/renderer/base/mobile/background.jpg"),this._layout.getComponent("banner").visible=!0),q.isDesktop()&&(a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM),this._layout.getComponent("UI_Base").visible=!0),q.isMobile()&&q.isLandscape()?(this._layout.getComponent("UI_Base").visible=!1,this._layout.getComponent("win_text").visible=!1,this._layout.getComponent("total_win_potrait_value").visible=!1,this._layout.getComponent("banner").visible=!0):q.isMobile()&&q.isPortrait()&&(this._layout.getComponent("UI_Base").visible=!0,this._layout.getComponent("win_text").visible=!0,this._layout.getComponent("total_win_potrait_value").visible=!0,this._layout.getComponent("banner").visible=!1),k.globalSounds.stopMusic(),a.Common.Server.free_game_name=void 0,c.instance.emit(h.ON_PLAYER_PROMPT,o.getPhrase("@footer_no_win")),q.isMobile()&&0==b.Scene_FreeSpins.totalWin&&($("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this._fxLayer=new PIXI.Container,this._fxLayer1=new PIXI.Container,this.addChild(this._fxLayer),this._aperture.addChild(this._fxLayer1),this._movieLayer=new PIXI.Container,this.addChild(this._movieLayer),c.instance.on(f.EVENT_REELS_SPIN_START,this.onSpinStart,this),c.instance.on(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),c.instance.on(f.EVENT_REEL_DROPPED,this.onReelDropped,this),c.instance.on(f.EVENT_REELS_DROPPED,this.onReelsDropped,this),c.instance.on(f.EVENT_TEASE_REEL,this.onReelTease,this),c.instance.on(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),c.instance.on(g.EVENT_FREE_GAME_INTRO,this.showFreeSpinsIntro,this),c.instance.on(l.EVENT_STOP_LOGO_ANIM,this.onLogoAnimOff,this),c.instance.on(l.EVENT_START_LOGO_ANIM,this.onLogoAnimOn,this),c.instance.on(l.EVENT_SCATTER_LOGO_ANIM,this.onLogoAnimTrigger,this),c.instance.on(g.EVENT_HIDE_LOGO,this.onLogoHideDisplay,this),c.instance.on(g.EVENT_SHOW_WIN,this.onShowWin,this),c.instance.on(g.EVENT_WIN_PRESENTATION_END,this.onWinsShown,this),c.instance.on(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),c.instance.once(g.EVENT_SHOW_WIN_TEXT_ANIMATION,function(a){return i.showWinTextAnimation(a)}),c.instance.on(l.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart,this),c.instance.on(l.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd,this),c.instance.on(l.EVENT_AUTO_SPIN,this.onAutoSpin,this),c.instance.on(l.EVENT_INTERRUPT_SPIN,this.onInterruptSpin,this),c.instance.on(l.EVENT_STOP_SPIN,this.onInterruptSpinInError,this),c.instance.on(h.ON_PLAYER_PROMPT,this.onPlayerPrompt,this),c.instance.on(g.STOP_FRAME_ANIM,this.stopFrameAnim,this),c.instance.on(h.ON_PLAYER_PROMPT_IDLE,this.idleMessages,this),c.instance.on(h.ON_PLAYER_PROMPT_IDLE_KILL,this.killIdleMsgTween,this),c.instance.on(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn,this),c.instance.on(g.MOBILE_WIN_VALUE_HIDE,this.onMobileWinHide,this),c.instance.on(g.MOBILE_WIN_VALUE_UPDATE,this.onMobileWinUpdate,this),this._isAutoPlay||this.idleMessages(),this._layout.triggerFX("scene_start")},e.prototype.onMobileWinHide=function(){if(q.isMobile()){var a=this._layout.getComponent("total_win_potrait_value");a.visible=!1,a.setText("")}},e.prototype.onMobileWinUpdate=function(b){var c=this;if(q.isMobile()&&q.isPortrait()&&0!=e.lastResults.totalWinCash){var d=c._layout.getComponent("total_win_potrait_value"),f={win:0};TweenLite.to(f,1,{win:e.lastResults.totalWinCash,onUpdate:function(){d.setText(a.Common.Currency.format(f.win))}.bind(this),onComplete:function(){}.bind(this)}),k.globalSounds.playCue("WIN_COUNT"),d.setText(a.Common.Currency.format(e.lastResults.totalWinCash)),d.visible=!0}},e.prototype.onExpandColumn=function(b){console.log("[ExpandingSymbols] ",b);var d=this._assets.getMovieClip("Expanding_Wild");d.scale=new PIXI.Point(.52,.5);var e=this._winManager.getAperture().getReel(b-1),f=e.getCentroid(this._movieLayer);q.isMobile()?(d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-40,d.position.y=f.y-93.5):(d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-38.5,d.position.y=f.y-95),this._movieLayer.addChild(d),d.loop=!1,d.play(),d.onComplete=function(){},a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_MODIFY_APERTURE_END)},1e3)},e.prototype.shiftPanel=function(){$("#panel_background").css("transform","scale(1)"),$("#panel_background").css("bottom","0px"),this._layout.getComponent("player_prompt").scale=new PIXI.Point(1,1),this._layout.getComponent("player_prompt").x=238.07999999999998,this._layout.getComponent("player_prompt").y=496.8,q.isDesktop()&&(this._layout.getComponent("UI_Base").y=513)},e.prototype.animation=function(){},e.prototype.stopFrameAnim=function(){this._aperture._juggler.timeMultiplier=1;var a=this._layout.getComponent("Centre_Frame");a.visible=!0,a.clip.loop=!1,a.clip.gotoAndStop(0)},e.prototype.onInteraction=function(b,e){d.prototype.onInteraction.call(this,b,e),a.Common.Server.StopCallonFreeSpin=!1,k.globalSounds.playCue("GENERIC_CLICK"),this._announcer.visible=!1,c.instance.emit(h.ON_RESULTS_DISPLAYED,this.result)},e.prototype.onInterruptSpin=function(){a.Common.Server.interruptSpinBool=!0,this._isAutoPlay?a.Common.Server.varForDisableSpin=!0:a.Common.Server.varForDisableSpin=!1,this._teaseAudio&&(this._teaseAudio=null),k.globalSounds.playCue("REEL_DROP")},e.prototype.onInterruptSpinInError=function(){this._aperture.onStopReelSpinning()},e.prototype.onResultsRequested=function(){(d.prototype.onResultsRequested.call(this),this._layout.getComponent("win_amount").visible=!1,q.isMobile())&&(this._layout.getComponent("total_win_potrait_value").visible=!1);null!==this.AudioProfile&&(k.globalSounds.stopCue(this.AudioProfile),this.AudioProfile=null),a.Common.Server.gameBalance>=p.getTotalBetCash()||a.Common.Server.promotionalFreePlaysBoolean?(this._subGame.isBaseGame()&&(this.killIdleMsgTween(),c.instance.emit(h.ON_PLAYER_PROMPT,o.getPhrase("@footer_no_win"))),this._aperture.startSpin(!1,this._subGame)):(a.Common.ApplicationBase.instance.emit(l.PROMOTIONAL_BUTTON_ENABLE),this._isAutoPlay&&a.Common.ApplicationBase.instance.emit(l.EVENT_AUTO_SPIN_STOP))},e.prototype.onResultsReady=function(a,b){d.prototype.onResultsReady.call(this,a,b);var c=new i(a.getRaw());e.lastResults=c,console.log(e.lastResults.getRaw()),c.getState().featureName.match("PUMPKIN")||this.dropSymbols(c);try{window.hasOwnProperty("gameWrapper")&&window.gameWrapper.setIdle()}catch(a){}},e.prototype.dropSymbols=function(b){var d=this,f=new j;f.add(function(a){""!=b.getState().featureName?d.mysterySymbolTransition(b,a):1===parseInt((5*Math.random()).toString())?(d.isMysterySymbol=!0,d.mysterySymbolTransition(b,a)):a()}),f.add(function(a){this._aperture.dropSymbols(b,a)}.bind(this)),f.add(function(a){""!=b.getState().featureName?this.mysterySymbol(b,a):a()}.bind(this)),f.add(function(c){this._winManager.displaySpinResults(b,c),q.isDesktop()&&a.Core.Time.juggler.setTimeout(function(){b.totalWinCash/100>=20&&a.Common.ApplicationBase.instance.emit(l.EVENT_START_LOGO_ANIM)},200)}.bind(this)),1==e.isResizeGame&&f.add(function(a){1==e.isStartGame&&this.onMobileWinUpdate(a)}.bind(this)),void 0!=a.Common.Server.free_game_name&&f.add(function(d){a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.WinManager.EVENT_FREE_GAME_INTRO,b)}.bind(this),2200)}.bind(this)),f.start(function(){void 0==a.Common.Server.free_game_name&&c.instance.emit(h.ON_RESULTS_DISPLAYED,b)}.bind(this))},e.prototype.fadeIn=function(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=.5,b.visible=!0,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1})},c)},e.prototype.fadeOut=function(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=1,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1,onComplete:function(){b.alpha=.5}})},c)},e.prototype.onDestroy=function(){d.prototype.onDestroy.call(this),c.instance.off(f.EVENT_REELS_SPIN_START,this.onSpinStart),c.instance.off(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),c.instance.off(f.EVENT_REEL_DROPPED,this.onReelDropped),c.instance.off(f.EVENT_REELS_DROPPED,this.onReelsDropped),c.instance.off(f.EVENT_TEASE_REEL,this.onReelTease),c.instance.off(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),c.instance.off(g.EVENT_FREE_GAME_INTRO,this.showFreeSpinsIntro),c.instance.off(l.EVENT_STOP_LOGO_ANIM,this.onLogoAnimOff),c.instance.off(l.EVENT_START_LOGO_ANIM,this.onLogoAnimOn),c.instance.off(l.EVENT_SCATTER_LOGO_ANIM,this.onLogoAnimTrigger),c.instance.off(g.EVENT_HIDE_LOGO,this.onLogoHideDisplay),c.instance.off(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),c.instance.off(g.EVENT_SHOW_WIN,this.onShowWin),c.instance.off(g.EVENT_WIN_PRESENTATION_END,this.onWinsShown),c.instance.removeAllListeners(g.EVENT_SHOW_WIN_TEXT_ANIMATION),c.instance.off(l.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart),c.instance.off(l.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd),c.instance.off(l.EVENT_AUTO_SPIN,this.onAutoSpin),c.instance.off(h.ON_PLAYER_PROMPT,this.onPlayerPrompt),c.instance.off(h.ON_PLAYER_PROMPT_IDLE,this.idleMessages),c.instance.off(h.ON_PLAYER_PROMPT_IDLE_KILL,this.killIdleMsgTween),c.instance.off(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn),c.instance.off(g.MOBILE_WIN_VALUE_HIDE,this.onMobileWinHide),c.instance.off(g.MOBILE_WIN_VALUE_UPDATE,this.onMobileWinUpdate)},e.prototype.onReelsDropped=function(b){a.Common.Server.server.stopWinTogglingInPopUp=!1,k.globalSounds.stopCue("ReeL_spin"),k.globalSounds.stopCue("RESPIN_SPIN"),a.Common.Server.server.History_LogoFlag=!1},e.prototype.onPlayerPrompt=function(a){var b=this._layout.getComponent("player_prompt");a.length?(b.alpha=1,this._layout.setComponentText("player_prompt_text",a.toUpperCase())):TweenLite.to(b,.75,{alpha:0})},e.prototype.scatterFeature=function(b,c){"B1"==b.symbolId&&(e.symbol=b.symbolId,this._scattterNumCount++,a.Common.Server.StopCallonFreeSpin=!0,this._scattterNumCount<=1&&(q.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_SCATTER_LOGO_ANIM),"iOS"!==a.Core.Environment.getPlatformData().os.family&&q.isMobile()&&navigator.vibrate([100])))},e.prototype.idleMessages=function(){var a=this._layout.getComponent("player_prompt");this._tweenRollUp=new TimelineLite({onComplete:function(){a.visible=!0,this.restart()}}),this._tweenRollUp.to(a.position,5,{onComplete:function(){}}).to(a.position,5,{onComplete:function(){}}).to(a.position,5,{onComplete:function(){}}).to(a.position,5,{onComplete:function(){}}).to(a.position,5,{onComplete:function(){}})},e.prototype.killIdleMsgTween=function(){this._tweenRollUp.kill()},e.prototype.mysterySymbolTransition=function(a,b){function d(a,c){if("2x2"===a){var d=new PIXI.Sprite(this._assets.getPIXITexture("STATIC-SYMBOLS:Mystery"));d.x="left"===c[c.length-1]?this._aperture.getReel(0).getLocalCoords(this._aperture).x-95:this._aperture.getReel(1).getLocalCoords(this._aperture).x-95,d.visible=!0,q.isMobile()&&!q.isDesktop()?d.scale=new PIXI.Point(1.1,1.1):d.scale=new PIXI.Point(1,1),this._aperture.addChild(d),TweenLite.to(d,1.2,{y:800,onComplete:function(){d.y=-400,b()}})}else if("3x3"===a){var e=new PIXI.Sprite(this._assets.getPIXITexture("STATIC-SYMBOLS:Mystery"));q.isMobile()&&!q.isDesktop()?(e.scale=new PIXI.Point(1.72,1.72),e.x=this._aperture.getReel(0).getLocalCoords(this._aperture).x-120):(e.x=this._aperture.getReel(0).getLocalCoords(this._aperture).x-105,e.scale=new PIXI.Point(1.5,1.5)),e.y=-800,this._aperture.addChild(e),TweenLite.to(e,1.5,{y:800,onComplete:function(){e.y=-800,b()}})}}var e=this;this._aperture._juggler.timeMultiplier=1,c.instance.once(l.EVENT_INTERRUPT_SPIN,function(){e._aperture._juggler.timeMultiplier=1});var f,g=[];if(this.isMysterySymbol&&"1x1"!==a.getState().featureName.split("_")[0]){this.isMysterySymbol=!1;var h=parseInt((2*Math.random()).toString()),i=["2x2","3x3"],j=[[[0,3,1,4]],[0,3,6,1,4,7,2,5,8]];f=i[h],a.getState().featureOffset=j[h]}else f=a.getState().featureName.split("_")[0];if("2x2"===f){var k=a.getState().featureOffset,m={left:[0,1,2,3,4,5],right:[6,7,8]};for(var n in m){m[n].filter(function(a){return-1!==k.indexOf(a)}).length>0&&g.push(n)}d.call(this,f,g)}else if("3x3"===f)d.call(this,f);else if("1x1"===f){var o=0;a.getState().featureOffset.forEach(function(c){e._aperture.getReel(parseInt((c/3).toString())).getSymbol(c%3).setSymbol("M1"),o++,a.getState().featureOffset.length===o&&b()})}},e.prototype.onSpinStart=function(){var b=this._layout.getComponent("Centre_Frame");b.clip.loop=!0,b.clip.gotoAndPlay(0),this._movieLayer.removeChildren(),a.Common.Server.interruptSpinBool=!1;try{window.hasOwnProperty("gameWrapper")&&window.gameWrapper.setBusy()}catch(a){}c.instance.emit(h.ON_PLAYER_PROMPT_IDLE_KILL),k.globalSounds.playCue(this._layout.getLayoutParams().audio.music.spin,void 0,!0,.4),e.isStartGame=!0,e.isResizeGame=!1,this._teaseCount=0,this._scatterCount=0,q.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM)},e.prototype.onContinueGame=function(a,b){var c=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500);void 0!=c&&c.volume(.3),1==b&&this._aperture.startSpin(!0,a)},e.prototype.mysterySymbol=function(a,b){function c(a,b,c,d,e,f){var g=this,h=[],i=b.shift();if(i.forEach(function(a){var b=a%3+1,c=parseInt((a/3).toString());g._aperture.getReel(c).getSymbol(b).visible=!1}),"2x2"===a){var j=this._assets.getMovieClip("mysterysymbolanim",!0);j.loop=!1,j.scale=new PIXI.Point(.3,.3);var l=this._aperture.getSymbolAtPosition(c.shift()).getLocalCoords(this._aperture);l.x=l.x-80,l.y=l.y-65,j.position=l,h.push(j),this._aperture.addChild(j)}else if("3x3"===a){var j=this._assets.getMovieClip("mysterysymbolanim",!0);j.loop=!1,j.scale=new PIXI.Point(.5,.5),j.position=this._aperture.getSymbolAtPosition(5).getLocalCoords(this._aperture),h.push(j),this._aperture.addChild(j)}else"1x1"===a&&i.forEach(function(a){var b=g._assets.getMovieClip("mysterysymbolanim",!0);b.loop=!1,b.scale=new PIXI.Point(.15,.15),b.position=g._aperture.getSymbolAtPosition(c.shift()).getLocalCoords(g._aperture),h.push(b),g._aperture.addChild(b)});var m=0;h.forEach(function(a){a.visible=!0,a.play(),a.onComplete=function(){if(a.visible=!1,++m===h.length){for(var b=0;b<i.length;b++){var c=i[b],d=c%3+1,j=parseInt((c/3).toString());g._aperture.getReel(j).getSymbol(d).setSymbol(e)}i.forEach(function(a){var b=a%3+1,c=parseInt((a/3).toString());g._aperture.getReel(c).getSymbol(b).visible=!0}),f();g._layout.getComponent("Centre_Frame").visible=!0,k.globalSounds.stopCue("M1:WIN")}}})}k.globalSounds.playCue("M1:WIN",void 0,!1,.9);var d=[],e=[],f=[],g=a.getState().featureOffset,h=a.getState().replacemetSymbol;this._layout.getComponent("Centre_Frame").visible=!1;var i=a.getState().featureName.split("_")[0];if("2x2"===i){var j=0,l={top_left:[0,1,3,4],bottom_left:[1,4,2,5],top_right:[3,4,6,7],bottom_right:[4,5,7,8]},m={top_left:5,bottom_left:6,top_right:8,bottom_right:9};for(var n in l){var o=l[n].filter(function(a){return-1!=g.indexOf(a)});o.length>=4&&(f[j]=o,d[j]=l[n],e[j]=m[n],j++)}d.length>0&&c.call(this,i,d,e,f,h,b)}else"3x3"===i?(e.push(5),d[0]=[0,1,2,3,4,5,6,7,8],f[0]=a.getState().featureOffset,c.call(this,i,d,e,f,h,b)):"1x1"===i&&(d[0]=a.getState().featureOffset,f[0]=a.getState().featureOffset,a.getState().featureOffset.forEach(function(a){e.push(a+1)}),c.call(this,i,d,e,f,h,b))},e.prototype.onReelDropped=function(a,b){b||k.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],void 0,!1,.6),2==a.reelIndex&&(this.stopFrameAnim(),k.globalSounds.stopCue("ReeL_spin"))},e.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();this._layout.getLayoutParams().scatters.indexOf(c.getId())>-1?k.globalSounds.playCue(c.getAudioDropId(),this._scatterCount++):k.globalSounds.playCue(c.getAudioDropId()),console.log(e.lastResults,"beat"),"$FREE_SPINS"==e.lastResults.getRaw().next_game&&this.scatterFeature(a,b)},e.prototype.onReelTease=function(a,b){this._teaseAudio=k.globalSounds.playCue(b.getTeaseAudioId(this._teaseCount++))},e.prototype.onReelTeaseEnd=function(a,b){k.globalSounds.stopCue("TEASE")},e.prototype.showFreeSpinsIntro=function(b){this._$buttonOk=$(".button_ok"),k.globalSounds.stopMusic();var d=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient1,1500,!1,!1);void 0!=d&&d.volume(.5),q.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM),1==a.Common.Server.free_game_name?this._layout.setComponentText("spin_count_tilt",this._subGame.getState().remain.toString()):2==a.Common.Server.free_game_name?this._layout.setComponentText("spin_count_multiplier",this._subGame.getState().remain.toString()):3==a.Common.Server.free_game_name&&this._layout.setComponentText("spin_count_rapid",this._subGame.getState().remain.toString()),c.instance.emit(h.ON_PLAYER_PROMPT,o.getPhrase("")),k.globalSounds.playCue("FREESPINS:INTRO",0,!0),this._layout.getComponent("Centre_Frame").visible=!1,1==a.Common.Server.free_game_name?this.showAnnouncer("announcer_tilt"):2==a.Common.Server.free_game_name?this.showAnnouncer("announcer_multiplier"):3==a.Common.Server.free_game_name&&this.showAnnouncer("announcer_rapid"),this.result=b},e.prototype.onWinSummary=function(b){this._fxLayer1.removeChildren(),a.Common.Server.server.LogoFlag=!1,!q.isDesktop()&&q.isPortrait()?($("#banner1_Rainbow").css("visibility","hidden"),$("#banner1").css("visibility","visible")):(this._layout.getComponent("banner").visible=!0,$("#banner1_Rainbow").css("visibility","hidden"),"hidden"===$("#banner1_Rainbow").css("visibility")&&$("#banner1").css("visibility","visible")),1===b.getWinCount()&&k.globalSounds.playCue(this._aperture.getSymbolProfile(b.getSingleWin().getSymbolId()).getAudioWinId(),void 0,!0,.3),a.Core.Time.juggler.setTimeout(function(){k.globalSounds.playCue("WIN_SUMMARY")},50),this.showWinTextAnimation(b)},e.prototype.onShowWin=function(b,c,d,e){if(c){if(this.killIdleMsgTween(),e?k.globalSounds.playCue(d.getAudioWinId(),void 0,!1,.9):(this.AudioProfile=d.getAudioWinId(),k.globalSounds.playCue(d.getAudioWinId(),void 0,!1,.9)),b.getWinCash()>0){var f=this._layout.getComponent("win_amount");f.setText(a.Common.Currency.format(b.getWinCash(),!0)),f.visible=!0;var g=new j,h=new PIXI.Point(f.x,f.y);f.scale.x=.5,f.scale.y=.5,g.add(function(b){f.scale.x=.3,f.scale.y=.3,TweenLite.to(f.scale,.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){a.Core.Time.juggler.setTimeout(b,1e3)}})}),g.add(function(a){f.position=h,f.visible=!1,a()}),g.start()}}else{var i=this._layout.getComponent("win_amount");i.setText(a.Common.Currency.format(b.getWinCash())),i.visible=!0;var l=new PIXI.Point(i.x,i.y);i.scale.x=.5,i.scale.y=.5,TweenLite.to(i.scale,1,{x:.6,y:.6,ease:Cubic.easeOut}),a.Core.Time.juggler.setTimeout(function(){i.position=l,i.visible=!1},1500)}},e.prototype.onLogoAnimOff=function(){var a=this._layout.getComponent("banner");a.clip.loop=!1,a.clip.gotoAndStop(0)},e.prototype.onLogoAnimOn=function(){var a=this._layout.getComponent("banner");a.clip.loop=!0,a.clip.gotoAndPlay(0),k.globalSounds.playCue("GAME_LOGO",void 0,!0)},e.prototype.onLogoHideDisplay=function(){this._layout.getComponent("banner").visible=!1},e.prototype.onLogoAnimTrigger=function(){var a=this._layout.getComponent("banner");a.clip.loop=!1,a.clip.gotoAndPlay(0),k.globalSounds.playCue("GAME_LOGO",void 0,!0)},e.prototype.onWinsShown=function(){this._isAutoPlay||($("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()),d.prototype.onWinsShown.call(this)},e.prototype.onAutoSpinsEnd=function(){this._isAutoPlay=!1,a.Common.Server.server.isAutoPlay=!1,this._autoSpinCount=0,$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()},e.prototype.onAutoSpinsStart=function(){this._isAutoPlay=!0,c.instance.emit(h.ON_PLAYER_PROMPT_IDLE_KILL),this._autoSpinCount=0,k.globalSounds.setMusicRestorePoint(this._layout.getLayoutParams().audio.music.spin,0)},e.prototype.onAutoSpin=function(b){c.instance.emit(a.Slots.WinManager.EVENT_FREE_SPINS_END),this._isAutoPlay=!0,this._autoSpinCount++,1===b&&c.instance.emit(l.EVENT_AUTO_SPINS_ENDS)},e.prototype.stopAnim=function(){this._layout.getComponent("fx_container").removeChildren()},e.startReelsSpinning=!1,e.symbol=null,e.isStartGame=!1,e.isResizeGame=!1,e}(e);b.Scene_Base=s}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.ApplicationBase,d=a.Common.SubGame,e=a.Common.GameSceneBase,f=a.Slots.Aperture,g=a.Slots.WinManager,h=a.Common.GameEvents,i=a.Slots.SpinResults,j=a.Core.Utils.Queue,k=a.Core.SoundManager,l=a.Slots.ControlPanel,m=a.Common.Currency,n=a.Core.Utils,o=a.Common.Server,p=a.Common.Server.ResponseState,q=a.Common.Server.ResponseUser,r=a.Core.Renderer.Scene,s=a.Core.Lang,t=a.Core.Environment,u=function(a){function b(b){return a.call(this,b)||this}return __extends(b,a),b}(d);b.Logic_FreeSpins=u;var v=function(b){function d(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(d,b),d.prototype.onCreate=function(){b.prototype.onCreate.call(this),t.isMobile()&&($("html").css("background-image","url('./assets/renderer/free_spins/mobile/Freegame_Mobile_Portrait.jpg')").css("background-size"," cover").css(" background-repeat","no-repeat"),t.isPortrait()&&!t.isDesktop()?(this._layout.getComponent("banner").visible=!1,$("#banner1").css("backgound-image","url('./assets/renderer/base/mobile/Freegame_Mobile_Portrait.jpg')").css("visibility","visible").css("margin-top","14%").css("margin-left","1%")):t.isLandscape()&&!t.isDesktop()&&$("#banner1").css("visibility","hidden"));var d=this._layout.getComponent("button_collect");d._label.y-=5,d.x+=4;c.instance.emit(h.ON_PLAYER_PROMPT_IDLE_KILL),a.Common.Server.isWinSummary=!0,a.Common.Server.varForDisableSpin=!0,a.Common.Server.free_game_name=void 0,k.globalSounds.stopMusic(),k.globalSounds.playCue("FREE_SPINS:SUMMARY");var e=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500,!1,!1);void 0!=e&&e.volume(.5),this._layout.triggerFX("create"),this._aperture=this._layout.getComponent("aperture"),this._layout.setComponentText("win_amount",s.getPhrase("feature_pays_x_caps",{win:m.format(w.totalWin)})),c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),this.interactive=!0,this.interactiveChildren=!0,this.on(a.Core.Events.ON_INTERACTION,this.onContinue),w.previousMultiplier=1,w.multiplier=1,$("#main_button_wrapper").show().addClass("disabled"),$("#Autoplay_button_wrapper").hide(),$("#bet_button_wrapper").hide(),$("#cp_win").text(" "),setTimeout(function(){$("#button_spin").css("pointer-events","none")},400)},d.prototype.onResize=function(a,c){b.prototype.onResize.call(this,a,c),t.isPortrait()&&!t.isDesktop()?(this._layout.getComponent("banner").visible=!1,$("#banner1").css("backgound-image","url('./assets/renderer/base/mobile/Freegame_Mobile_Portrait.jpg')").css("visibility","visible").css("margin-top","14%").css("margin-left","1%")):t.isLandscape()&&!t.isDesktop()&&(this._layout.getComponent("banner").visible=!1,$("#banner1").css("visibility","hidden"))},d.prototype.onContinue=function(){var b=this;a.Common.Server.remain=-1;var d=new n.Queue(this._juggler);k.globalSounds.playCue("GENERIC_CLICK"),"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),this.interactive=!1,this.interactiveChildren=!1,this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.Server.isWinSummary=!1,a.Core.Renderer.SceneManager.closeOverlay(),a.Common.Server.varForDisableSpin=!1;var e=g.getWinBand(a.RendererScenes.Scene_FreeSpins.totalWin/100),f=50*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),i=100*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),j=a.RendererScenes.Scene_FreeSpins.totalWin,l={totalWinCash:a.RendererScenes.Scene_FreeSpins.totalWin};if(e){switch(e){case"BIG_WIN":d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,celebrationEnd:!0,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){$("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),c.instance.emit(g.EVENT_WIN_PRESENTATION_START,l),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,l),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},5)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}.bind(this));break;case"MEGA_WIN":d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:f,celebrationEnd:!1,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,Scene:"MEGA_WIN",tickupStart:f,celebrationEnd:!0,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){$("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),c.instance.emit(g.EVENT_WIN_PRESENTATION_START,l),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,l),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}.bind(this));break;case"SUPER_MEGA_WIN":d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("BIG_WIN",{win:f,celebrationEnd:!1,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay("MEGA_WIN",{win:i,celebrationEnd:!1,tickupStart:f,callback:function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}),d.add(function(b){a.Core.Renderer.SceneManager.showSceneAsOverlay(e,{win:j,celebrationEnd:!0,tickupStart:i,callback:function(){var b=this;a.Core.Time.juggler.setTimeout(function(){$("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),c.instance.emit(g.EVENT_WIN_PRESENTATION_START,l),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,l),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Common.Server.server.spinButtonBoolean=!1,a.Common.Server.server.FreeSpinsEnd=!1,a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback()}.bind(b),3e3)},500)}.bind(this),OnComplete:function(){"iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([1e3]),b()}})}.bind(this))}d.start(function(){c.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE)}.bind(this))}else{if($("#main_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),a.Common.Server.server.FreeSpinsEnd=!1,a.RendererScenes.Scene_FreeSpins.totalWin>0){var m={totalWinCash:a.RendererScenes.Scene_FreeSpins.totalWin};a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_WIN_PRESENTATION_START,m),c.instance.emit(g.EVENT_SHOW_WIN_TEXT_ANIMATION,m),c.instance.emit(h.ON_GAME_SUMMARY_ACCEPTED),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),b._data.callback(),a.Common.Server.server.spinButtonBoolean=!1},3e3)},100)}else c.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),this._data.callback();c.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE)}},d}(r)
;b.Scene_FreeSpins_Summary=v;var w=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;return a.AudioProfile=null,a.flagForFirstLoad=!1,a}return __extends(d,b),Object.defineProperty(d,"totalWin",{get:function(){return d._totalWin},set:function(a){isNaN(a)&&console.log("==>",(new Error).stack),d._totalWin=a},enumerable:!0,configurable:!0}),d.prototype.soundFreeGame=function(){var a=k.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500,!1,!1);void 0!=a&&a.volume(.5)},d.prototype.onResize=function(c,e){if(b.prototype.onResize.call(this,c,e),t.isFullScreenAvailable()&&t.isMobile()&&t.goFullScreen(),a.Common.Server.month,void 0!=this._layout){if(t.isMobile()&&t.isLandscape()){this._layout.getComponent("win_text").visible=!1,this._layout.getComponent("total_win_potrait_value").visible=!1,this._layout.getComponent("UI_Base").visible=!1,a.Common.Server.TotalFreeSpinsAwarded!==a.Common.Server.remain&&2==a.Common.Server.free_game_name&&void 0!=d.multiplier&&d.multiplier>1&&(this._layout.getComponent("overNumber_X"+d.multiplier).position.y=120,2==d.multiplier?this._layout.getComponent("overNumber_X2").position.x=737:4==d.multiplier?(this._layout.getComponent("overNumber_X2").position.y=120,this._layout.getComponent("overNumber_X2").position.x=737,this._layout.getComponent("overNumber_X4").position.x=784):8==d.multiplier?(this._layout.getComponent("overNumber_X4").position.y=120,this._layout.getComponent("overNumber_X4").position.x=784,this._layout.getComponent("overNumber_X8").position.x=831):16==d.multiplier&&(this._layout.getComponent("overNumber_X8").position.y=120,this._layout.getComponent("overNumber_X8").position.x=831,this._layout.getComponent("overNumber_X16").position.x=878),32==d.multiplier&&(this._layout.getComponent("overNumber_X16").position.y=120,this._layout.getComponent("overNumber_X16").position.x=878,this._layout.getComponent("overNumber_X32").position.x=923)),2==a.Common.Server.free_game_name?(this._layout.getComponent("FreeSpinsLeft_text").position.x=825.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=200,this._layout.getComponent("spins_Count").position.x=827.6,this._layout.getComponent("spins_Count").position.y=225,this._layout.getComponent("Fg_Meter").position.x=822.4,this._layout.getComponent("Fg_Meter").position.y=225,this._layout.getComponent("FreeSpinsWin_text").position.x=825.6,this._layout.getComponent("FreeSpinsWin_text").position.y=290,this._layout.getComponent("total_win_value").position.x=825.6,this._layout.getComponent("total_win_value").position.y=322,this._layout.getComponent("Total_Win_Meter").position.x=825.4,this._layout.getComponent("Total_Win_Meter").position.y=310):(this._layout.getComponent("FreeSpinsLeft_text").position.x=825.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=140,this._layout.getComponent("spins_Count").position.x=827.6,this._layout.getComponent("spins_Count").position.y=165,this._layout.getComponent("Fg_Meter").position.x=825.4,this._layout.getComponent("Fg_Meter").position.y=165,this._layout.getComponent("FreeSpinsWin_text").position.x=825.6,this._layout.getComponent("FreeSpinsWin_text").position.y=230,this._layout.getComponent("total_win_value").position.x=825.6,this._layout.getComponent("total_win_value").position.y=262,this._layout.getComponent("Total_Win_Meter").position.x=825.4,this._layout.getComponent("Total_Win_Meter").position.y=250),this._layout.getComponent("Multipliers_text").position.y=90,this._layout.getComponent("Multipliers_text").position.x=840;for(var f=1;f<=5;f++)this._layout.getComponent("numberBoxDisable_X"+Math.pow(2,f)).position.y=this._layout.getComponent("numberBoxOver_X"+Math.pow(2,f)).position.y=this._layout.getComponent("normalNumber_X"+Math.pow(2,f)).position.y=120;for(var f=1;f<=4;f++)this._layout.getComponent("NumberArrow_X"+Math.pow(2,f)).position.y=120;this._layout.getComponent("numberBoxDisable_X2").position.x=this._layout.getComponent("numberBoxOver_X2").position.x=this._layout.getComponent("normalNumber_X2").position.x=737,this._layout.getComponent("NumberArrow_X2").position.x=760,this._layout.getComponent("numberBoxDisable_X4").position.x=this._layout.getComponent("numberBoxOver_X4").position.x=this._layout.getComponent("normalNumber_X4").position.x=784,this._layout.getComponent("NumberArrow_X4").position.x=808,this._layout.getComponent("numberBoxDisable_X8").position.x=this._layout.getComponent("numberBoxOver_X8").position.x=this._layout.getComponent("normalNumber_X8").position.x=831,this._layout.getComponent("NumberArrow_X8").position.x=855,this._layout.getComponent("numberBoxDisable_X16").position.x=this._layout.getComponent("numberBoxOver_X16").position.x=this._layout.getComponent("normalNumber_X16").position.x=878,this._layout.getComponent("NumberArrow_X16").position.x=900,this._layout.getComponent("numberBoxDisable_X32").position.x=this._layout.getComponent("numberBoxOver_X32").position.x=this._layout.getComponent("normalNumber_X32").position.x=923}else if(t.isMobile()&&t.isPortrait()){(a.Common.Server.TotalFreeSpinsAwarded!==a.Common.Server.remain||"Base"==d.previousGame&&a.Common.Server.TotalFreeSpinsAwarded-1==a.Common.Server.remain)&&(this._layout.getComponent("win_text").visible=!0,this._layout.getComponent("total_win_potrait_value").visible=!0,this._layout.getComponent("UI_Base").visible=!0,d.isResizeGame=!0),a.Common.Server.TotalFreeSpinsAwarded!==a.Common.Server.remain&&2==a.Common.Server.free_game_name&&void 0!=d.multiplier&&d.multiplier>1&&(this._layout.getComponent("overNumber_X"+d.multiplier).position.y=26,2==d.multiplier?this._layout.getComponent("overNumber_X2").position.x=614.4:4==d.multiplier?(this._layout.getComponent("overNumber_X2").position.y=26,this._layout.getComponent("overNumber_X2").position.x=614.4,this._layout.getComponent("overNumber_X4").position.x=664.4):8==d.multiplier?(this._layout.getComponent("overNumber_X4").position.y=26,this._layout.getComponent("overNumber_X4").position.x=664.4,this._layout.getComponent("overNumber_X8").position.x=716.4):16==d.multiplier&&(this._layout.getComponent("overNumber_X8").position.y=26,this._layout.getComponent("overNumber_X8").position.x=716.4,this._layout.getComponent("overNumber_X16").position.x=766.4),32==d.multiplier&&(this._layout.getComponent("overNumber_X16").position.y=26,this._layout.getComponent("overNumber_X16").position.x=766.4,this._layout.getComponent("overNumber_X32").position.x=816.4)),1==a.Common.Server.free_game_name?(this._layout.getComponent("FreeSpinsLeft_text").position.x=662.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=70.69,this._layout.getComponent("spins_Count").position.x=670.19,this._layout.getComponent("spins_Count").position.y=95,this._layout.getComponent("Fg_Meter").position.x=662.6,this._layout.getComponent("Fg_Meter").position.y=95,this._layout.getComponent("FreeSpinsWin_text").position.x=667.4,this._layout.getComponent("FreeSpinsWin_text").position.y=151.7,this._layout.getComponent("total_win_value").position.x=667.4,this._layout.getComponent("total_win_value").position.y=189.5,this._layout.getComponent("Total_Win_Meter").position.x=668.4,this._layout.getComponent("Total_Win_Meter").position.y=176):(this._layout.getComponent("FreeSpinsLeft_text").position.x=782.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=110.69,this._layout.getComponent("spins_Count").position.x=792.19,this._layout.getComponent("spins_Count").position.y=135,this._layout.getComponent("Fg_Meter").position.x=782.6,this._layout.getComponent("Fg_Meter").position.y=135,this._layout.getComponent("FreeSpinsWin_text").position.x=787.4,this._layout.getComponent("FreeSpinsWin_text").position.y=191.7,this._layout.getComponent("total_win_value").position.x=787.4,this._layout.getComponent("total_win_value").position.y=229.5,this._layout.getComponent("Total_Win_Meter").position.x=787.4,this._layout.getComponent("Total_Win_Meter").position.y=216),this._layout.getComponent("Multipliers_text").position.y=-5,this._layout.getComponent("Multipliers_text").position.x=740;for(var f=1;f<=5;f++)this._layout.getComponent("numberBoxDisable_X"+Math.pow(2,f)).position.y=this._layout.getComponent("numberBoxOver_X"+Math.pow(2,f)).position.y=this._layout.getComponent("normalNumber_X"+Math.pow(2,f)).position.y=26;for(var f=1;f<=4;f++)this._layout.getComponent("NumberArrow_X"+Math.pow(2,f)).position.y=26;this._layout.getComponent("numberBoxDisable_X2").position.x=this._layout.getComponent("numberBoxOver_X2").position.x=this._layout.getComponent("normalNumber_X2").position.x=614.4,this._layout.getComponent("NumberArrow_X2").position.x=637.4,this._layout.getComponent("numberBoxDisable_X4").position.x=this._layout.getComponent("numberBoxOver_X4").position.x=this._layout.getComponent("normalNumber_X4").position.x=664.4,this._layout.getComponent("NumberArrow_X4").position.x=691.4,this._layout.getComponent("numberBoxDisable_X8").position.x=this._layout.getComponent("numberBoxOver_X8").position.x=this._layout.getComponent("normalNumber_X8").position.x=716.4,this._layout.getComponent("NumberArrow_X8").position.x=741.4,this._layout.getComponent("numberBoxDisable_X16").position.x=this._layout.getComponent("numberBoxOver_X16").position.x=this._layout.getComponent("normalNumber_X16").position.x=766.4,this._layout.getComponent("NumberArrow_X16").position.x=791.4,this._layout.getComponent("numberBoxDisable_X32").position.x=this._layout.getComponent("numberBoxOver_X32").position.x=this._layout.getComponent("normalNumber_X32").position.x=816.4}t.isMobile()&&t.isLandscape()?(1==a.Common.Server.free_game_name?a.Core.Renderer.Stage.scaleStage(1,22,4):a.Core.Renderer.Stage.scaleStageBoth(1,.9,0,30),this._layout.getComponent("banner").visible=!0):t.isMobile()&&t.isPortrait()&&(1==a.Common.Server.free_game_name?(a.Core.Renderer.Stage.scaleStage(1.4,-122,-53),a.Core.Renderer.Stage.scaleStageBoth(1.4,1.07,-167,-45),this._layout.getComponent("UI_Base").y=524,this._layout.getComponent("win_text").y=540,this._layout.getComponent("total_win_potrait_value").y=538,this._layout.getComponent("total_win_potrait_value").x=530,$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/easter_free_spins.png')").css(" background-repeat","no-repeat").css("margin-top","28%").css("margin-left","-30%")):(a.Core.Renderer.Stage.scaleStage(1.1,-170,40),a.Core.Renderer.Stage.scaleStageBoth(1.1,.9,-75,40),this._layout.getComponent("UI_Base").y=525,this._layout.getComponent("UI_Base").x=470,this._layout.getComponent("UI_Base").scale.x=.32,this._layout.getComponent("UI_Base").scale.y=.28,this._layout.getComponent("win_text").y=545,this._layout.getComponent("total_win_potrait_value").y=540,this._layout.getComponent("total_win_potrait_value").x=530,$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/easter_free_spins.png')").css(" background-repeat","no-repeat")),this._layout.getComponent("banner").visible=!1),t.isDesktop()?!0===a.Common.Server.promotionalFreePlaysBoolean&&($("#panel_background").css("transform","scale(0.92)").css("bottom","20px"),this._layout.getComponent("aperture_holder").y=280,this._layout.getComponent("player_prompt").scale=new PIXI.Point(.9,.9),this._layout.getComponent("player_prompt").x=265,this._layout.getComponent("player_prompt").y=485,t.isDesktop()&&(this._layout.getComponent("UI_Base").y=500)):t.isMobile()&&(t.isPortrait()||t.isLandscape()?(this._layout.getComponent("background").visible=!1,$("#cp_feature_spins").hide()):t.isLandscape()&&($("#cp_feature_spins").hide(),this.setHTMLBackground(""),this._layout.getComponent("total_win_value").visible=!0,this.flagForFirstLoad&&(this._layout.getComponent("FreeSpinsLeft_text").visible=!0,2==a.Common.Server.free_game_name&&(this._layout.getComponent("Multipliers_text").visible=!0),this._layout.getComponent("Fg_Meter").visible=!0,this._layout.getComponent("FreeSpinsWin_text").visible=!0,this._layout.getComponent("Total_Win_Meter").visible=!0,this._layout.getComponent("total_win_value").visible=!0,this._layout.getComponent("spins_Count").visible=!0)))}d.isStartGame=!1},d.prototype.onGameReady=function(e){b.prototype.onGameReady.call(this,e);var f=this;if(!a.Common.Server.server.historyDataBoolean||e.getSpinRemainCount()===e.getTotalFreespins()&&null!=e.getSpinRemainCount())if(c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{label:s.getPhrase("spins"),spins:this._subGame.getState().remain-1}),0==e.getRoundCount()){if(setTimeout(function(){d.totalWin=0,t.isDesktop()&&!t.isMobile()?(f._layout.getComponent("background").visible=!0,f._layout.getComponent("banner").visible=!0):t.isMobile()&&(t.isLandscape()?$("html").css("background-image","url('./assets/renderer/free_spins/mobile/Freegame_Mobile_Portrait.jpg')").css(" background-repeat","no-repeat"):($("html").css("background-image","url('./assets/renderer/free_spins/mobile/Freegame_Mobile_Portrait.jpg')").css(" background-repeat","no-repeat"),1==a.Common.Server.free_game_name?$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/easter_free_spins.png')").css(" background-repeat","no-repeat").css("margin-top","28%").css("margin-left","-30%"):$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/easter_free_spins.png')").css(" background-repeat","no-repeat"))),f._aperture.visible=!0}.bind(this),100),setTimeout(function(){},1200),t.isDesktop()){var g=f._layout.getComponent("banner");1!=a.Common.Server.free_game_name&&(g.scale.x=.45,g.scale.y=.45,g.position.x-=30,g.position.y+=85)}if(t.isMobile()&&t.isPortrait()&&1==a.Common.Server.free_game_name&&(this._layout.getComponent("UI_Base").y=524,this._layout.getComponent("win_text").y=540,this._layout.getComponent("total_win_potrait_value").y=538,this._layout.getComponent("total_win_potrait_value").x=530),t.isMobile()&&t.isLandscape()){this._layout.getComponent("win_text").visible=!1,this._layout.getComponent("total_win_potrait_value").visible=!1,this._layout.getComponent("UI_Base").visible=!1,2==a.Common.Server.free_game_name?(this._layout.getComponent("FreeSpinsLeft_text").position.x=825.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=200,this._layout.getComponent("spins_Count").position.x=827.6,this._layout.getComponent("spins_Count").position.y=225,this._layout.getComponent("Fg_Meter").position.x=822.4,this._layout.getComponent("Fg_Meter").position.y=225,this._layout.getComponent("FreeSpinsWin_text").position.x=825.6,this._layout.getComponent("FreeSpinsWin_text").position.y=290,this._layout.getComponent("total_win_value").position.x=825.6,this._layout.getComponent("total_win_value").position.y=322,this._layout.getComponent("Total_Win_Meter").position.x=825.4,this._layout.getComponent("Total_Win_Meter").position.y=310):(this._layout.getComponent("FreeSpinsLeft_text").position.x=830.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=140,this._layout.getComponent("spins_Count").position.x=832.6,this._layout.getComponent("spins_Count").position.y=165,this._layout.getComponent("Fg_Meter").position.x=830.4,this._layout.getComponent("Fg_Meter").position.y=165,this._layout.getComponent("FreeSpinsWin_text").position.x=830.6,this._layout.getComponent("FreeSpinsWin_text").position.y=230,this._layout.getComponent("total_win_value").position.x=830.6,this._layout.getComponent("total_win_value").position.y=262,this._layout.getComponent("Total_Win_Meter").position.x=830.4,this._layout.getComponent("Total_Win_Meter").position.y=250),this._layout.getComponent("Multipliers_text").position.y=90,this._layout.getComponent("Multipliers_text").position.x=840;for(var h=1;h<=5;h++)this._layout.getComponent("numberBoxDisable_X"+Math.pow(2,h)).position.y=this._layout.getComponent("numberBoxOver_X"+Math.pow(2,h)).position.y=this._layout.getComponent("normalNumber_X"+Math.pow(2,h)).position.y=120;for(var h=1;h<=4;h++)this._layout.getComponent("NumberArrow_X"+Math.pow(2,h)).position.y=120;this._layout.getComponent("numberBoxDisable_X2").position.x=this._layout.getComponent("numberBoxOver_X2").position.x=this._layout.getComponent("normalNumber_X2").position.x=737,this._layout.getComponent("NumberArrow_X2").position.x=760,this._layout.getComponent("numberBoxDisable_X4").position.x=this._layout.getComponent("numberBoxOver_X4").position.x=this._layout.getComponent("normalNumber_X4").position.x=784,this._layout.getComponent("NumberArrow_X4").position.x=808,this._layout.getComponent("numberBoxDisable_X8").position.x=this._layout.getComponent("numberBoxOver_X8").position.x=this._layout.getComponent("normalNumber_X8").position.x=831,this._layout.getComponent("NumberArrow_X8").position.x=855,this._layout.getComponent("numberBoxDisable_X16").position.x=this._layout.getComponent("numberBoxOver_X16").position.x=this._layout.getComponent("normalNumber_X16").position.x=878,this._layout.getComponent("NumberArrow_X16").position.x=900,this._layout.getComponent("numberBoxDisable_X32").position.x=this._layout.getComponent("numberBoxOver_X32").position.x=this._layout.getComponent("normalNumber_X32").position.x=923}else if(t.isMobile()&&t.isPortrait()){1==a.Common.Server.free_game_name?(this._layout.getComponent("FreeSpinsLeft_text").position.x=662.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=70.69,this._layout.getComponent("spins_Count").position.x=670.19,this._layout.getComponent("spins_Count").position.y=95,this._layout.getComponent("Fg_Meter").position.x=662.6,this._layout.getComponent("Fg_Meter").position.y=95,this._layout.getComponent("FreeSpinsWin_text").position.x=667.4,this._layout.getComponent("FreeSpinsWin_text").position.y=151.7,this._layout.getComponent("total_win_value").position.x=667.4,this._layout.getComponent("total_win_value").position.y=189.5,this._layout.getComponent("Total_Win_Meter").position.x=668.4,this._layout.getComponent("Total_Win_Meter").position.y=176):(this._layout.getComponent("FreeSpinsLeft_text").position.x=782.6,this._layout.getComponent("FreeSpinsLeft_text").position.y=110.69,this._layout.getComponent("spins_Count").position.x=792.19,this._layout.getComponent("spins_Count").position.y=135,this._layout.getComponent("Fg_Meter").position.x=782.6,this._layout.getComponent("Fg_Meter").position.y=135,this._layout.getComponent("FreeSpinsWin_text").position.x=787.4,this._layout.getComponent("FreeSpinsWin_text").position.y=191.7,this._layout.getComponent("total_win_value").position.x=787.4,this._layout.getComponent("total_win_value").position.y=229.5,this._layout.getComponent("Total_Win_Meter").position.x=787.4,this._layout.getComponent("Total_Win_Meter").position.y=216),this._layout.getComponent("Multipliers_text").position.y=-5,this._layout.getComponent("Multipliers_text").position.x=740;for(var h=1;h<=5;h++)this._layout.getComponent("numberBoxDisable_X"+Math.pow(2,h)).position.y=this._layout.getComponent("numberBoxOver_X"+Math.pow(2,h)).position.y=this._layout.getComponent("normalNumber_X"+Math.pow(2,h)).position.y=26;for(var h=1;h<=4;h++)this._layout.getComponent("NumberArrow_X"+Math.pow(2,h)).position.y=26;this._layout.getComponent("numberBoxDisable_X2").position.x=this._layout.getComponent("numberBoxOver_X2").position.x=this._layout.getComponent("normalNumber_X2").position.x=614.4,this._layout.getComponent("NumberArrow_X2").position.x=637.4,this._layout.getComponent("numberBoxDisable_X4").position.x=this._layout.getComponent("numberBoxOver_X4").position.x=this._layout.getComponent("normalNumber_X4").position.x=664.4,this._layout.getComponent("NumberArrow_X4").position.x=691.4,this._layout.getComponent("numberBoxDisable_X8").position.x=this._layout.getComponent("numberBoxOver_X8").position.x=this._layout.getComponent("normalNumber_X8").position.x=716.4,this._layout.getComponent("NumberArrow_X8").position.x=741.4,this._layout.getComponent("numberBoxDisable_X16").position.x=this._layout.getComponent("numberBoxOver_X16").position.x=this._layout.getComponent("normalNumber_X16").position.x=766.4,this._layout.getComponent("NumberArrow_X16").position.x=791.4,this._layout.getComponent("numberBoxDisable_X32").position.x=this._layout.getComponent("numberBoxOver_X32").position.x=this._layout.getComponent("normalNumber_X32").position.x=816.4}t.isMobile()&&t.isLandscape()?this._layout.getComponent("banner").visible=!0:t.isMobile()&&t.isPortrait()&&(this._layout.getComponent("banner").visible=!1),a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM),t.isMobile()&&t.isLandscape()&&(this._layout.getComponent("FreeSpinsLeft_text").visible=!1,this._layout.getComponent("Multipliers_text").visible=!1,this._layout.getComponent("Total_Win_Meter").visible=!1,this._layout.getComponent("Fg_Meter").visible=!1,this._layout.getComponent("FreeSpinsWin_text").visible=!1,this._layout.getComponent("spins_Count").visible=!1,this._layout.getComponent("UI_Base").visible=!1,this._layout.getComponent("win_text").visible=!1,this._layout.getComponent("total_win_potrait_value").visible=!1)}else $("#feature_spins_wrapper").show(),$("#feature_win_wrapper").show(),$("#cp_feature_win").show();else(t.isDesktop()||t.isLandscape())&&(this._layout.getComponent("FreeSpinsLeft_text").visible=!0,2==a.Common.Server.free_game_name&&(this._layout.getComponent("Multipliers_text").visible=!0),this._layout.getComponent("FreeSpinsWin_text").visible=!0,this._layout.getComponent("Total_Win_Meter").visible=!0,this._layout.getComponent("Fg_Meter").visible=!0,this._layout.getComponent("spins_Count").visible=!0)},d.prototype.afterGameaccepted=function(){var b=this;if(b.soundFreeGame(),t.isDesktop()&&!t.isMobile()&&b.bgAnimation(),2==a.Common.Server.free_game_name&&(b._layout.getComponent("Centre_Frame").visible=!0),1==a.Common.Server.free_game_name&&(b._layout.getComponent("Centre_Frame").rotation=Math.PI/180*-45,b._layout.getComponent("Centre_Frame").visible=!0,b._layout.getComponent("Centre_Frame").scale=new PIXI.Point(.36,.39),t.isMobile()&&(b._layout.getComponent("Centre_Frame").scale=new PIXI.Point(.36,.39),b._layout.getComponent("Centre_Frame").position.x=458,b._layout.getComponent("Centre_Frame").position.y=270)),t.isDesktop()&&b.animation(),t.isMobile()&&t.isPortrait()&&(b._layout.getComponent("win_text").visible=!0,b._layout.getComponent("UI_Base").visible=!0),2==a.Common.Server.free_game_name){t.isDesktop()&&!t.isMobile()&&(b._layout.getComponent("FreeSpinsLeft_text").position.y+=17,b._layout.getComponent("FreeSpinsWin_text").position.y+=17,b._layout.getComponent("total_win_value").position.y+=17,b._layout.getComponent("spins_Count").position.y+=17,b._layout.getComponent("Fg_Meter").position.y+=17,b._layout.getComponent("Total_Win_Meter").position.y+=17),2==a.Common.Server.free_game_name&&(b._layout.getComponent("Multipliers_text").visible=!0);for(var c=1;c<=5;c++)b._layout.getComponent("numberBoxDisable_X"+Math.pow(2,c)).visible=!0,b._layout.getComponent("normalNumber_X"+Math.pow(2,c)).visible=!0;for(var c=1;c<=4;c++)b._layout.getComponent("NumberArrow_X"+Math.pow(2,c)).visible=!0;a.Common.Server.multiplier>1&&(d.multiplier=a.Common.Server.multiplier,void 0!=d.multiplier&&(b._layout.getComponent("overNumber_X"+d.multiplier).visible=!0))}else t.isMobile()&&t.isLandscape()&&(b._layout.getComponent("banner").visible=!0);b._layout.getComponent("Total_Win_Meter").visible=!0,b._layout.getComponent("FreeSpinsLeft_text").visible=!0,b._layout.getComponent("FreeSpinsWin_text").visible=!0,b._layout.getComponent("total_win_value").visible=!0,b._layout.getComponent("Fg_Meter").visible=!0},d.prototype.onCreate=function(){b.prototype.onCreate.call(this);var e=this;d.previousMultiplier=1,t.isMobile()&&t.isLandscape()&&(this._layout.getComponent("banner").visible=!0),t.isMobile()&&t.isPortrait()&&(1==a.Common.Server.free_game_name?(this._layout.getComponent("background").visible=!1,$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/easter_free_spins.png')").css(" background-repeat","no-repeat").css("margin-top","28%").css("margin-left","-30%")):"symbolreveal"==a.Common.Server.free_game_name&&$("#banner1").css("background-image","url('./assets/renderer/free_spins/mobile/chirstmas_free_spins.png')").css(" background-repeat","no-repeat")),c.instance.emit(h.ON_PLAYER_PROMPT_IDLE_KILL),$("html").css("background-image","url('./assets/renderer/free_spins/FG_background.jpg')"),$("html").css("background-size"," cover"),d.balanceBeforeWin=q.current.getBalance(),1==a.Common.Server.free_game_name?this._aperture=this._layout.getComponent("aperture"):this._aperture=this._layout.getComponent("aperture1"),1==a.Common.Server.free_game_name?this._winManager=this._layout.getComponent("win_manager"):this._winManager=this._layout.getComponent("win_manager1"),this._fxLayer=new PIXI.Container,this._fxLayer1=new PIXI.Container,this.addChild(this._fxLayer),this._aperture.addChild(this._fxLayer1),this._movieLayer=new PIXI.Container,this.addChild(this._movieLayer),1==a.Common.Server.free_game_name&&(this._aperture.rotation=Math.PI/180*-45),c.instance.on(f.EVENT_REELS_SPIN_START,this.onSpinStart,this),c.instance.on(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),c.instance.on(f.PROMOTIONAL_PANEL_CHANGE,this.shiftPanel,this),c.instance.on(f.EVENT_REEL_DROPPED,this.onReelDropped,this),c.instance.on(f.EVENT_TEASE_REEL,this.onReelTease,this),c.instance.on(l.EVENT_STOP_LOGO_ANIM,this.onLogoAnimOff,this),c.instance.on(l.EVENT_SCATTER_LOGO_ANIM,this.onLogoAnimTrigger,this),c.instance.on(l.EVENT_START_LOGO_ANIM,this.onLogoAnimOn,this),c.instance.on(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),c.instance.on(f.EVENT_REELS_DROPPED,this.onReelsDropped,this),c.instance.on(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),c.instance.on(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn,this),c.instance.on(g.STOP_FRAME_ANIM,this.stopFrameAnim,this),c.instance.on(h.ON_PLAYER_PROMPT,this.onPlayerPrompt,this),c.instance.on(g.MOBILE_WIN_VALUE_HIDE,this.onMobileWinHide,this),c.instance.on(g.MOBILE_WIN_VALUE_UPDATE,this.onMobileWinUpdate,this),c.instance.on(g.SHOW_WIN_MARKER,this.showMarker,this),this._layout.triggerFX("create"),this._bonusSymbolContainer=new PIXI.Container,this._aperture.addChild(this._bonusSymbolContainer),d.startReelsSpinning&&(this._sounds.stopCue("WIN_COUNT"),this._aperture.startSpin(!0,this._subGame),d.startReelsSpinning=!1),p.current&&(this.onStateReady(p.current),p.current=void 0),a.Core.Time.juggler.setTimeout(function(){e.soundFreeGame(),1!=a.Common.Server.free_game_name&&(e._layout.getComponent("aperture_frame").visible=!0),e.onGameAccepted(),k.globalSounds.playCue("TRANSITION");var b=e._layout.getComponent("BG_Particles");b.visible=!0,b.clip.loop=!1,b.clip.gotoAndPlay(0);var c=e._layout.getComponent("Overlay_Effect");c.visible=!0,c.clip.loop=!1,c.clip.gotoAndPlay(0),c.clip.onComplete=function(){e._layout.getComponent("BG_Particles").visible=!1,e._layout.getComponent("Overlay_Effect").visible=!1,3==a.Common.Server.free_game_name&&e.showMarker()},3==a.Common.Server.free_game_name&&e._aperture.getReel(1).getSymbol(2).setSymbol("B1"),e.afterGameaccepted()}.bind(this),200*a.Common.Server.count)},d.prototype.showMarker=function(){var a=this,b=this,c=new PIXI.Sprite(this._assets.getPIXITexture("STATIC-SYMBOLS1:scatter")),d=new PIXI.Sprite(this._assets.getPIXITexture("STATIC-SYMBOLS1:scatter"));d.position=this._aperture.getSymbolAtPosition(5).getLocalCoords(this._aperture),d.position.x-=80,d.position.y-=80,c.position=d.position,d.scale=c.scale=new PIXI.Point(.45,.45),this._bonusSymbolContainer.addChild(c),this._bonusSymbolContainer.addChild(d),this._layout.getComponent("Centre_Frame").visible=!1;var e=b._layout.getComponent("Frame_BG_to_FG");e.visible=!0,e.clip.loop=!1,e.clip.gotoAndPlay(0),e.clip.onComplete=function(){TweenLite.to(d,1,{x:b._aperture.getSymbolAtPosition(3).getLocalCoords(a._aperture).x-80,y:b._aperture.getSymbolAtPosition(3).getLocalCoords(a._aperture).y-80}),TweenLite.to(c,1,{x:b._aperture.getSymbolAtPosition(9).getLocalCoords(a._aperture).x-80,y:b._aperture.getSymbolAtPosition(9).getLocalCoords(a._aperture).y-80})}},d.prototype.stopFrameAnim=function(){if(this._aperture._juggler.timeMultiplier=1,3!=a.Common.Server.free_game_name){var b=this._layout.getComponent("Centre_Frame");b.visible=!0,b.clip.loop=!1,b.clip.gotoAndStop(0)}if(3==a.Common.Server.free_game_name){var c=this._layout.getComponent("Centre_Frame#3");c.visible=!0,c.clip.loop=!1,c.clip.gotoAndStop(0)}},d.prototype.onMobileWinHide=function(){if(t.isMobile()){var a=this._layout.getComponent("total_win_potrait_value");a.visible=!1,a.setText("")}},d.prototype.onMobileWinUpdate=function(b){if(t.isMobile()&&t.isPortrait()&&0!=d.lastResults.totalWinCash){var c=this._layout.getComponent("total_win_potrait_value"),e={win:0};TweenLite.to(e,1,{win:d.lastResults.totalWinCash,onUpdate:function(){c.setText(a.Common.Currency.format(e.win))}.bind(this),onComplete:function(){}.bind(this)}),k.globalSounds.playCue("WIN_COUNT"),c.setText(a.Common.Currency.format(d.lastResults.totalWinCash)),c.visible=!0}},d.prototype.showIntro=function(a){this._layout.triggerFX("accept_game"),(new j).start(function(){a()}.bind(this))},d.prototype.animation=function(){var b=this._layout.getComponent("Beetle_centre"),c=this._layout.getComponent("Cat_centre"),d=this._layout.getComponent("Dream_Catcher_centre"),e=this._layout.getComponent("Hand_centre"),f=this._layout.getComponent("Horse_Shoe_centre"),g=this._layout.getComponent("Lady_bug_centre"),h=this._layout.getComponent("Lucky_Irish_Clover_centre"),i=new PIXI.Point(b.position.x,b.position.y),j=new PIXI.Point(c.position.x,c.position.y),k=new PIXI.Point(d.position.x,d.position.y),l=new PIXI.Point(e.position.x,e.position.y),m=new PIXI.Point(f.position.x,f.position.y),n=new PIXI.Point(g.position.x,g.position.y),o=new PIXI.Point(h.position.x,h.position.y);b.rotation=0,c.rotation=0,d.rotation=0,e.rotation=0,f.rotation=0,g.rotation=0,h.rotation=0;var p=new TimelineLite({onComplete:function(){this.restart(!0)}}),q=new TimelineLite({onComplete:function(){this.restart(!0)}}),r=new TimelineLite({onComplete:function(){this.restart(!0)}}),s=new TimelineLite({onComplete:function(){this.restart(!0)}}),t=new TimelineLite({onComplete:function(){this.restart(!0)}}),u=new TimelineLite({onComplete:function(){this.restart(!0)}}),v=new TimelineLite({onComplete:function(){this.restart(!0)}});a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(b,100,10),a.Core.Renderer.UI.FX.fadeOut(b,1e3,8),p.add(TweenLite.to(b.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),p.add([TweenLite.to(b.position,10,{x:-500,y:150,ease:Quad.easeInOut}),TweenLite.to(b,8,{rotation:3}),TweenLite.to(b.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(b,100,10),a.Core.Renderer.UI.FX.fadeOut(b,1e3,8),b.position.x=i.x,b.position.y=i.y,b.rotation=0}})])},0),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(c,100,10),a.Core.Renderer.UI.FX.fadeOut(c,1e3,8),q.add(TweenLite.to(c.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),q.add([TweenLite.to(c.position,10,{x:-500,y:-200,ease:Quad.easeInOut}),TweenLite.to(c,8,{rotation:3}),TweenLite.to(c.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(c,100,10),a.Core.Renderer.UI.FX.fadeOut(c,1e3,8),c.position.x=j.x,c.position.y=j.y,c.rotation=0}})])},3e3),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(d,100,10),a.Core.Renderer.UI.FX.fadeOut(d,1e3,8),r.add(TweenLite.to(d.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),r.add([TweenLite.to(d.position,10,{x:1500,y:-100,ease:Quad.easeInOut}),TweenLite.to(d,8,{rotation:3}),TweenLite.to(d.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(d,100,10),a.Core.Renderer.UI.FX.fadeOut(d,1e3,8),d.position.x=k.x,d.position.y=k.y,d.rotation=0}})])},0),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(e,100,10),a.Core.Renderer.UI.FX.fadeOut(e,1e3,8),s.add(TweenLite.to(e.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),s.add([TweenLite.to(e.position,10,{x:-500,y:370,ease:Quad.easeInOut
}),TweenLite.to(e,8,{rotation:3}),TweenLite.to(e.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(e,100,10),a.Core.Renderer.UI.FX.fadeOut(e,1e3,8),e.position.x=l.x,e.position.y=l.y,e.rotation=0}})])},4e3),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(f,100,10),a.Core.Renderer.UI.FX.fadeOut(f,1e3,8),t.add(TweenLite.to(f.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),t.add([TweenLite.to(f.position,10,{x:1500,y:400,ease:Quad.easeInOut}),TweenLite.to(f,8,{rotation:3}),TweenLite.to(f.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(f,100,10),a.Core.Renderer.UI.FX.fadeOut(f,1e3,8),f.position.x=m.x,f.position.y=m.y,f.rotation=0}})])},4e3),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(g,100,10),a.Core.Renderer.UI.FX.fadeOut(g,1e3,8),u.add(TweenLite.to(g.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),u.add([TweenLite.to(g.position,10,{x:-200,y:600,ease:Quad.easeInOut}),TweenLite.to(g,8,{rotation:3}),TweenLite.to(g.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(g,100,10),a.Core.Renderer.UI.FX.fadeOut(g,1e3,8),g.position.x=n.x,g.position.y=n.y,g.rotation=0}})])},1500),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.UI.FX.fadeIn(h,100,10),a.Core.Renderer.UI.FX.fadeOut(h,1e3,8),v.add(TweenLite.to(h.scale,0,{x:.1,y:.1,ease:Quad.easeInOut})),v.add([TweenLite.to(h.position,10,{x:1500,y:600,ease:Quad.easeInOut}),TweenLite.to(h,8,{rotation:3}),TweenLite.to(h.scale,10,{x:.5,y:.5,ease:Quad.easeInOut,onComplete:function(){a.Core.Renderer.UI.FX.fadeIn(h,100,10),a.Core.Renderer.UI.FX.fadeOut(h,1e3,8),h.position.x=o.x,h.position.y=o.y,h.rotation=0}})])},1500)},d.prototype.bgAnimation=function(){var b=this;a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!0,c.clip.loop=!0,c.clip.gotoAndPlay(0),a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!1,c.clip.loop=!1,c.clip.gotoAndStop(0),a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!0,c.clip.loop=!0,c.clip.gotoAndPlay(0),a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!1,c.clip.loop=!1,c.clip.gotoAndStop(0),a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!0,c.clip.loop=!1,c.clip.gotoAndStop(0),a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!1,c.clip.loop=!1,c.clip.gotoAndStop(0),a.Core.Time.juggler.setTimeout(function(){var c=b._layout.getComponent("BgAnimation");c.visible=!0,c.clip.loop=!1,c.clip.gotoAndStop(0),a.Core.Time.juggler.setTimeout(function(){var a=b._layout.getComponent("BgAnimation");a.visible=!1,a.clip.loop=!1,a.clip.gotoAndStop(0)},0)},200)},500)},800)},1100)},1400)},1700)},2e3)},d.prototype.onExpandColumn=function(b){console.log("[ExpandingSymbols] ",b);var d=this._assets.getMovieClip("Expanding_Wild"),e=this._winManager.getAperture().getReel(b-1),f=e.getCentroid(this._movieLayer);t.isMobile()?(d.scale=new PIXI.Point(.51,.506),d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-40,d.position.y=f.y-92.8):(d.scale=new PIXI.Point(.53,.5),d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=f.x-40,d.position.y=f.y-98),this._movieLayer.addChild(d),d.loop=!1,d.play(),d.onComplete=function(){},a.Core.Time.juggler.setTimeout(function(){c.instance.emit(g.EVENT_MODIFY_APERTURE_END)},1e3)},d.prototype.onResultsRequested=function(){b.prototype.onResultsRequested.call(this);var e=this;o.server.historyDataBoolean&&(c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{win:this._subGame.getState().total_win_cash}),o.server.historyDataBoolean=!1),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase("@footer_no_win"))},200),c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{spins:this._subGame.getState().remain-1}),(t.isLandscape()||t.isDesktop()||t.isPortrait())&&this._layout.setComponentText("spins_Count",(this._subGame.getState().remain-1).toString()),this._aperture.isSpinning||(null!==this.AudioProfile&&(k.globalSounds.stopCue(this.AudioProfile),this.AudioProfile=null),2==a.Common.Server.free_game_name&&void 0!=d.multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier?a.Core.Time.juggler.setTimeout(function(){e._aperture.startSpin(!1,this._subGame)},1500):3==a.Common.Server.free_game_name&&a.Common.Server.TotalFreeSpinsAwarded-1==a.Common.Server.remain?a.Core.Time.juggler.setTimeout(function(){e._aperture.startSpin(!1,this._subGame)},3500):a.Core.Time.juggler.setTimeout(function(){e._aperture.startSpin(!1,this._subGame)},700))},d.prototype.onStateReady=function(e){b.prototype.onStateReady.call(this,e);var f=e.getState();f.month,d.totalWin=f.total_win_cash||0,a.Common.Server.server.historyDataBoolean&&f.remain!==f.total&&(c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{spins:f.remain-1}),this._layout.setComponentText("spins_Count",(f.remain-1).toString()))},d.prototype.onResultsReady=function(c,e){b.prototype.onResultsReady.call(this,c,e);var f=this,g=new i(c.getRaw());d.lastResults=g,d.totalWin=g.getState().total_win_cash,console.log("DS Total:",d.totalWin),2==a.Common.Server.free_game_name&&void 0!=d.multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier?a.Core.Time.juggler.setTimeout(function(){f.dropSymbols(g)},1500):3==a.Common.Server.free_game_name&&a.Common.Server.remain==a.Common.Server.TotalFreeSpinsAwarded-2?a.Core.Time.juggler.setTimeout(function(){f.dropSymbols(g)},3500):a.Core.Time.juggler.setTimeout(function(){f.dropSymbols(g)},700)},d.prototype.dropSymbols=function(b){var c=new j;c.add(function(a){this._aperture.dropSymbols(b,a)}.bind(this)),c.add(function(c){this._winManager.displaySpinResults(b,c),a.Core.Time.juggler.setTimeout(function(){b.totalWinCash/100>=20&&t.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_START_LOGO_ANIM)},200)}.bind(this)),1==d.isResizeGame&&c.add(function(a){1==d.isStartGame&&this.onMobileWinUpdate(a)}.bind(this)),3==a.Common.Server.free_game_name&&c.add(function(a){this.onMultiplierChange(a)}.bind(this)),c.start()},d.prototype.onInteraction=function(d,e){b.prototype.onInteraction.call(this,d,e),c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase(" ")),k.globalSounds.playCue("GENERIC_CLICK"),this._aperture.visible=!0,(t.isDesktop()||t.isLandscape())&&(a.Core.Time.juggler.setTimeout(function(){this._layout.getComponent("spins_Count").visible=!0,this._layout.getComponent("Total_Win_Meter").visible=!0,this._layout.getComponent("Fg_Meter").visible=!0,this._layout.getComponent("FreeSpinsLeft_text").visible=!0,2==a.Common.Server.free_game_name&&(this._layout.getComponent("Multipliers_text").visible=!0),this._layout.getComponent("FreeSpinsWin_text").visible=!0}.bind(this),500),this._layout.getComponent("FreeSpinsLeft_text").visible=!0,2==a.Common.Server.free_game_name&&(this._layout.getComponent("Multipliers_text").visible=!0),this._layout.getComponent("FreeSpinsWin_text").visible=!0,this._layout.getComponent("Total_Win_Meter").visible=!0,this._layout.getComponent("Fg_Meter").visible=!0),$("#feature_spins_wrapper").show(),$("#feature_win_wrapper").show(),$("#cp_feature_win").show(),k.globalSounds.stopMusic()},d.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),c.instance.off(f.EVENT_REELS_SPIN_START,this.onSpinStart),c.instance.off(f.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),c.instance.off(f.PROMOTIONAL_PANEL_CHANGE,this.shiftPanel),c.instance.off(f.EVENT_REEL_DROPPED,this.onReelDropped),c.instance.off(l.EVENT_STOP_LOGO_ANIM,this.onLogoAnimOff),c.instance.off(l.EVENT_SCATTER_LOGO_ANIM,this.onLogoAnimTrigger),c.instance.off(l.EVENT_START_LOGO_ANIM,this.onLogoAnimOn),c.instance.off(f.EVENT_TEASE_REEL,this.onReelTease),c.instance.off(f.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),c.instance.off(g.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),c.instance.off(g.EVENT_MODIFY_APERTURE_START,this.onExpandColumn),c.instance.off(h.ON_PLAYER_PROMPT,this.onPlayerPrompt),c.instance.off(f.EVENT_REELS_DROPPED,this.onReelsDropped),c.instance.off(g.MOBILE_WIN_VALUE_HIDE,this.onMobileWinHide),c.instance.off(g.MOBILE_WIN_VALUE_UPDATE,this.onMobileWinUpdate)},d.prototype.onReelsDropped=function(){a.Common.Server.server.stopWinTogglingInPopUp=!1,k.globalSounds.stopCue("ReeL_spin"),t.isDesktop()&&c.instance.emit(h.ON_PLAYER_PROMPT,s.getPhrase(" ")),d.multiplier>1&&(d.previousMultiplier=d.multiplier)},d.prototype.onGameAccepted=function(){try{window.hasOwnProperty("gameWrapper")&&window.gameWrapper.setBusy()}catch(a){}this._announcer&&(this._announcer.visible=!1),this._aperture.visible=!0,d.previousGame="Base",0==this._subGame.getRoundCount()?("iOS"!==a.Core.Environment.getPlatformData().os.family&&t.isMobile()&&navigator.vibrate([100]),this.showIntro(this.startGame.bind(this))):this.startGame()},d.prototype.startGame=function(){this._aperture.visible=!0,t.isDesktop()&&(this._layout.getComponent("player_prompt").visible=!0),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_GET_GAME_RESULTS)},1e3),c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{win:d.totalWin}),(t.isLandscape()||t.isDesktop())&&this._layout.setComponentText("spins_Count",(this._subGame.getState().remain-1).toString()),this._layout.setComponentText("total_win_value",m.format(d.totalWin))},d.prototype.onPlayerPrompt=function(a){var b=this._layout.getComponent("player_prompt");a.length?(b.alpha=1,this._layout.setComponentText("player_prompt_text",a.toUpperCase())):TweenLite.to(b,.75,{alpha:0})},d.prototype.onSummaryAccepted=function(){b.prototype.onSummaryAccepted.call(this)},d.prototype.onSpinStart=function(){var b=this;if(this._bonusSymbolContainer.removeChildren(0),this._layout.getComponent("Frame_BG_to_FG").visible=!1,3!=a.Common.Server.free_game_name){var c=b._layout.getComponent("Centre_Frame");c.visible=!0,c.clip.loop=!0,c.clip.gotoAndPlay(0)}else if(3==a.Common.Server.free_game_name){var e=b._layout.getComponent("Centre_Frame#3");e.visible=!0,e.clip.loop=!0,e.clip.gotoAndPlay(0)}t.isMobile()&&(this._layout.getComponent("total_win_potrait_value").visible=!1),this._teaseCount=0,this.flagForFirstLoad=!0,d.isStartGame=!0,d.isResizeGame=!1,k.globalSounds.playCue(this._layout.getLayoutParams().audio.music.spin,250,!1),t.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_STOP_LOGO_ANIM)},d.prototype.onMultiplierChange=function(b){var c=this;if(2==a.Common.Server.free_game_name&&this._subGame.getState().multiplier>1){if(d.multiplier=this._subGame.getState().multiplier,2==this._subGame.getState().multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier){var e=this._layout.getComponent("overNumber_X2"),f=(new PIXI.Point(e.position.x,e.position.y),new TimelineLite);e.scale.x=.4,e.scale.y=.4,t.isDesktop()?(f.add(TweenLite.to(e.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(e.position,.5,{x:738.24,y:70.2,ease:Cubic.easeIn}),TweenLite.to(e.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),e.position.x=738.24,e.position.y=70.2,c._layout.getComponent("numberBoxOver_X2").visible=!0,c._layout.getComponent("overNumber_X2").visible=!0}})])):t.isMobile()&&t.isPortrait()?(f.add(TweenLite.to(e.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(e.position,.5,{x:614.4,y:26,ease:Cubic.easeIn}),TweenLite.to(e.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isPortrait()?(e.position.x=614.4,e.position.y=26):(e.position.x=737,e.position.y=120),c._layout.getComponent("numberBoxOver_X2").visible=!0,c._layout.getComponent("overNumber_X2").visible=!0}})])):t.isMobile()&&t.isLandscape()&&(f.add(TweenLite.to(e.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(e.position,.5,{x:737,y:120,ease:Cubic.easeIn}),TweenLite.to(e.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isLandscape()?(e.position.x=737,e.position.y=120):(e.position.x=614.4,e.position.y=26),c._layout.getComponent("numberBoxOver_X2").visible=!0,c._layout.getComponent("overNumber_X2").visible=!0}})]))}if(4==this._subGame.getState().multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier){var g=this._layout.getComponent("overNumber_X4"),f=(new PIXI.Point(g.position.x,g.position.y),new TimelineLite);g.scale.x=.4,g.scale.y=.4,t.isDesktop()?(f.add(TweenLite.to(g.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(g.position,.5,{x:786.24,y:70.2,ease:Cubic.easeIn}),TweenLite.to(g.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),g.position.x=786.24,g.position.y=70.2,c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X4").visible=!0,c._layout.getComponent("overNumber_X4").visible=!0}})])):t.isMobile()&&t.isPortrait()?(f.add(TweenLite.to(g.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(g.position,.5,{x:664.4,y:26,ease:Cubic.easeIn}),TweenLite.to(g.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isPortrait()?(g.position.x=664.4,g.position.y=26):(g.position.x=784,g.position.y=120),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X4").visible=!0,c._layout.getComponent("overNumber_X4").visible=!0}})])):t.isMobile()&&t.isLandscape()&&(f.add(TweenLite.to(g.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(g.position,.5,{x:784,y:120,ease:Cubic.easeIn}),TweenLite.to(g.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isLandscape()?(g.position.x=784,g.position.y=120):(g.position.x=664.4,g.position.y=26),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X4").visible=!0,c._layout.getComponent("overNumber_X4").visible=!0}})]))}if(8==this._subGame.getState().multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier){var h=this._layout.getComponent("overNumber_X8"),f=(new PIXI.Point(h.position.x,h.position.y),new TimelineLite);h.scale.x=.4,h.scale.y=.4,t.isDesktop()?(f.add(TweenLite.to(h.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(h.position,.5,{x:834.2401,y:70.2,ease:Cubic.easeIn}),TweenLite.to(h.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),h.position.x=834.2401,h.position.y=70.2,c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X8").visible=!0,c._layout.getComponent("overNumber_X8").visible=!0}})])):t.isMobile()&&t.isPortrait()?(f.add(TweenLite.to(h.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(h.position,.5,{x:716.4,y:26,ease:Cubic.easeIn}),TweenLite.to(h.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isPortrait()?(h.position.x=716.4,h.position.y=26):(h.position.x=831,h.position.y=120),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X8").visible=!0,c._layout.getComponent("overNumber_X8").visible=!0}})])):t.isMobile()&&t.isLandscape()&&(f.add(TweenLite.to(h.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(h.position,.5,{x:831,y:120,ease:Cubic.easeIn}),TweenLite.to(h.scale,.5,{x:.4,y:.4,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isLandscape()?(h.position.x=831,h.position.y=120):(h.position.x=716.4,h.position.y=26),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X8").visible=!0,c._layout.getComponent("overNumber_X8").visible=!0}})]))}if(16==this._subGame.getState().multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier){var i=this._layout.getComponent("overNumber_X16"),f=(new PIXI.Point(i.position.x,i.position.y),new TimelineLite);i.scale.x=.35,i.scale.y=.35,t.isDesktop()?(f.add(TweenLite.to(i.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(i.position,.5,{x:882.24,y:70.2,ease:Cubic.easeIn}),TweenLite.to(i.scale,.5,{x:.35,y:.35,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),i.position.x=882.24,i.position.y=70.2,c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X16").visible=!0,c._layout.getComponent("overNumber_X16").visible=!0}})])):t.isMobile()&&t.isPortrait()?(f.add(TweenLite.to(i.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(i.position,.5,{x:766.4,y:26,ease:Cubic.easeIn}),TweenLite.to(i.scale,.5,{x:.35,y:.35,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isPortrait()?(i.position.x=766.4,i.position.y=26):(i.position.x=878,i.position.y=120),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X16").visible=!0,c._layout.getComponent("overNumber_X16").visible=!0}})])):t.isMobile()&&t.isLandscape()&&(f.add(TweenLite.to(i.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(i.position,.5,{x:878,y:120,ease:Cubic.easeIn}),TweenLite.to(i.scale,.5,{x:.35,y:.35,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isLandscape()?(i.position.x=878,i.position.y=120):(i.position.x=766.4,i.position.y=26),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X16").visible=!0,c._layout.getComponent("overNumber_X16").visible=!0}})]))}if(32==this._subGame.getState().multiplier&&d.previousMultiplier!=this._subGame.getState().multiplier){var j=this._layout.getComponent("overNumber_X32"),f=(new PIXI.Point(j.position.x,j.position.y),new TimelineLite);j.scale.x=.35,j.scale.y=.35,t.isDesktop()?(f.add(TweenLite.to(j.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(j.position,.5,{x:930.2401,y:70.2,ease:Cubic.easeIn}),TweenLite.to(j.scale,.5,{x:.35,y:.35,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),j.position.x=930.2401,j.position.y=70.2,c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X32").visible=!0,c._layout.getComponent("overNumber_X32").visible=!0}})])):t.isMobile()&&t.isPortrait()?(f.add(TweenLite.to(j.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(j.position,.5,{x:816.4,y:26,ease:Cubic.easeIn}),TweenLite.to(j.scale,.5,{x:.35,y:.35,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isPortrait()?(j.position.x=816.4,j.position.y=26):(j.position.x=923,j.position.y=120),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X32").visible=!0,c._layout.getComponent("overNumber_X32").visible=!0}})])):t.isMobile()&&t.isLandscape()&&(f.add(TweenLite.to(j.scale,1.75,{x:3,y:3,ease:Cubic.easeOut})),f.add([TweenLite.to(j.position,.5,{x:923,y:120,ease:Cubic.easeIn}),TweenLite.to(j.scale,.5,{x:.35,y:.35,ease:Cubic.easeOut,onComplete:function(){k.globalSounds.playCue("WIN_COUNT"),t.isLandscape()?(j.position.x=923,j.position.y=120):(j.position.x=816.4,j.position.y=26),c._layout.getComponent("numberBoxOver_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("overNumber_X"+d.previousMultiplier).visible=!1,c._layout.getComponent("numberBoxOver_X32").visible=!0,c._layout.getComponent("overNumber_X32").visible=!0}})]))}if(void 0!=d.multiplier){for(var l=1;l<=5;l++)this._layout.getComponent("numberBoxDisable_X"+Math.pow(2,l)).visible=!0,this._layout.getComponent("normalNumber_X"+Math.pow(2,l)).visible=!0;this._layout.getComponent("overNumber_X"+d.multiplier).visible=!0}}},d.prototype.onContinueGame=function(b){var d=this;t.isDesktop()&&!t.isMobile()&&d.bgAnimation(),a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_GET_GAME_RESULTS)},1e3),1==a.Common.Server.remain&&(a.Common.Server.varForDisableSpin=!0,a.Common.Server.count=5)},d.prototype.onReelDropped=function(a,b){k.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex]),2==a.reelIndex&&(this.stopFrameAnim(),k.globalSounds.stopCue("ReeL_spin"))},d.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();this._layout.getLayoutParams().scatters.indexOf(c.getId())>-1&&(k.globalSounds.stopCue(c.getAudioDropId()),k.globalSounds.playCue(c.getAudioDropId()))},d.prototype.onLogoAnimOff=function(){var a=this._layout.getComponent("banner");a.clip.loop=!1,a.clip.gotoAndStop(0)},d.prototype.onLogoAnimOn=function(){var a=this._layout.getComponent("banner");a.clip.loop=!0,a.clip.gotoAndPlay(0),k.globalSounds.playCue("GAME_LOGO",void 0,!0)},d.prototype.onLogoAnimTrigger=function(){var a=this._layout.getComponent("banner");a.clip.loop=!1,a.clip.gotoAndPlay(0),k.globalSounds.playCue("GAME_LOGO",void 0,!0)},d.prototype.onReelTease=function(a,b){k.globalSounds.playCue(b.getTeaseAudioId(this._teaseCount++))},d.prototype.onReelTeaseEnd=function(a,b){k.globalSounds.stopCue("TEASE")},d.prototype.onWinSummary=function(b){this.soundFreeGame(),this._layout.getComponent("fx_container").removeChildren(),1===b.getWinCount()&&k.globalSounds.playCue(this._aperture.getSymbolProfile(b.getSingleWin().getSymbolId()).getAudioWinId(),void 0,!0,.3),a.Core.Time.juggler.setTimeout(function(){k.globalSounds.playCue("WIN_SUMMARY")},250);var c=this,d=this._layout.getComponent("win_amount");b.totalWinCash>0?(d.visible=!0,this.addChild(d),d.setText(m.format(b.totalWinCash,!0))):d.visible=!1;var e=new PIXI.Point(d.position.x,d.position.y),f=new TimelineLite;if(d.scale.x=.2,d.scale.y=.2,t.isDesktop())f.add(TweenLite.to(d.scale,1.75,{x:.8,y:.8,ease:Cubic.easeOut})),f.add([TweenLite.to(d.position,.5,{x:640,y:535,ease:Cubic.easeIn}),TweenLite.to(d.scale,.5,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=e,d.visible=!1,b.totalWinCash>0&&k.globalSounds.playCue("WIN_COUNT")}})]);else if(t.isPortrait()){var g=this._layout.getComponent("total_win_potrait_value"),h=new PIXI.Point(g.position.x,g.position.y);f.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(d.position,.4,{x:537.6,y:529.2,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=e,d.visible=!1}}),TweenLite.to(g.position,.4,{x:537.6,y:529.2,ease:Cubic.easeIn}),TweenLite.to(g.scale,.4,{ease:Cubic.easeOut,onComplete:function(){if(g.position=h,0==b.totalWinCash)c._layout.getComponent("total_win_potrait_value").visible=!1;else if(t.isPortrait()){var d={win:0};TweenLite.to(d,1,{win:b.totalWinCash,onUpdate:function(){g.setText(a.Common.Currency.format(d.win))}.bind(this),onComplete:function(){}.bind(this)}),k.globalSounds.playCue("WIN_COUNT"),g.setText(a.Common.Currency.format(b.totalWinCash)),g.visible=!0}}})])}else t.isLandscape()&&(f.add(TweenLite.to(d.scale,1.75,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(d.position,.4,{x:640,y:35,ease:Cubic.easeIn}),TweenLite.to(d.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){d.position=e,d.visible=!1,b.totalWinCash>0&&k.globalSounds.playCue("WIN_COUNT"),c._layout.getComponent("total_win_potrait_value").visible=!1}})]))},d.prototype.onShowWin=function(b,c,d){if(c){this.AudioProfile=d.getAudioWinId(),k.globalSounds.playCue(d.getAudioWinId());var e=this._layout.getComponent("win_amount");e.setText(m.format(b.getWinCash(),!0)),e.visible=!0;var f=new j,g=new PIXI.Point(e.x,e.y);e.scale.x=.5,e.scale.y=.5,f.add(function(b){e.scale.x=.3,e.scale.y=.3,TweenLite.to(e.scale,.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){a.Core.Time.juggler.setTimeout(b,1e3)}})}),f.add(function(a){e.position=g,e.visible=!1,a()}),f.start()}},d.prototype.onWinsShown=function(){var b=this;c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{win:d.totalWin}),this._layout.setComponentText("total_win_value",m.format(d.totalWin)),this._lastResults&&this._lastResults.isGame("$FREE_SPINS")&&this._lastResults.isNextGame("$BASE")?a.Core.Time.juggler.setTimeout(function(){c.instance.emit(h.ON_RESULTS_DISPLAYED)}.bind(this),1500):a.Common.Server.retrigger>0?(3!=a.Common.Server.free_game_name&&(b._layout.getComponent("Centre_Frame").visible=!1),t.isDesktop()&&a.Common.ApplicationBase.instance.emit(l.EVENT_SCATTER_LOGO_ANIM),setTimeout(function(){var b=this._layout.getComponent("retrigger_announcer");b.visible=!0,b.alpha=1,k.globalSounds.playCue("FREE_SPINS:MORE",0,!0),this._layout.getComponent("retriggerNumber").setText("+"+a.Common.Server.retrigger),setTimeout(function(){c.instance.emit(l.EVENT_UPDATE_FEATURE_DISPLAY,{spins:this._subGame.getState().total-this._subGame.getState().spins})}.bind(this),2500),setTimeout(function(){c.instance.emit(h.ON_RESULTS_DISPLAYED),b.visible=!1,a.Common.Server.retrigger=0}.bind(this),3e3)}.bind(this),2e3)):c.instance.emit(h.ON_RESULTS_DISPLAYED)},d.prototype.shiftPanel=function(){$("#panel_background").css("transform","scale(1)"),$("#panel_background").css("bottom","0px"),this._layout.getComponent("aperture_holder").y=280,this._layout.getComponent("player_prompt").scale=new PIXI.Point(1,1),this._layout.getComponent("player_prompt").x=238.07999999999998,this._layout.getComponent("player_prompt").y=496.8,t.isDesktop()&&(this._layout.getComponent("UI_Base").y=513)},d.startReelsSpinning=!1,d._totalWin=null,d.multiplier=1,d.previousMultiplier=1,d.previousGame="FreeGame",d.isStartGame=!1,d.isResizeGame=!1,d}(e);b.Scene_FreeSpins=w}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Environment,g=a.Common.ApplicationBase,h=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.winTickUp=0,f}return __extends(c,b),c.prototype.onResize=function(a,c){b.prototype.onResize.call(this,a,c);this._layout.getComponent("TYPE_1")},c.prototype.onCreate=function(){this._layout.triggerFX("create");var b=this,c=d.globalSounds.startMusic(this._layout.getLayoutParams().audio,0,!1,!1);void 0!=c&&c.volume(.8),this._cancelSkip=a.Core.Utils.touchToSkip(function(){this.onSkipped()}.bind(this));var h=this._layout.getComponent("win_text");switch(this._sceneProfile.id){case"MEGA_WIN":case"SUPER_MEGA_WIN":this.winTickUp=this._data.tickupStart;break;default:this.winTickUp=0}var i={win:this.winTickUp};if(f.isDesktop()&&-1==a.Common.Server.remain){g.instance.emit(a.Slots.WinManager.EVENT_HIDE_LOGO);var j=b._layout.getComponent("banner");j.visible=!0,j.clip.loop=!0,j.clip.gotoAndPlay(0)}this._layout.getComponent("TYPE_1"),this._layout.getComponent("Rays");this._tweenRollUp=TweenLite.to(i,this._layout.getLayoutParams().rollup_duration,{win:this._data.win,ease:Cubic.easeOut,onUpdate:function(){h.setText(e.format(i.win,!0))},onComplete:function(){a.Core.Time.juggler.setTimeout(this.onSkipped.bind(this),0)}.bind(this)})},c.prototype.onSkipped=function(){this._cancelSkip(),d.globalSounds.stopMusic(),clearInterval(this._animInterval),this._tweenRollUp.kill(),a.Core.Renderer.SceneManager.closeOverlay(),this._data.OnComplete(),this._data.callback()},c}(c);b.BigWin=h}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.ApplicationBase,f=a.Common.GameProfile,g=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._lineSprites=[],e.drawLineMask=function(a){var b=this._winManager.getAperture().getPositionCentreList(a.getPositions(),this._winManager),c=b.slice(),d=new PIXI.Graphics;d.beginFill(this._gameProfile.get().symbolMask.color,0);for(var e=this._gameProfile.get().symbolMask.x,f=this._gameProfile.get().symbolMask.y,g=this._gameProfile.get().symbolMask.w,h=this._gameProfile.get().symbolMask.h,i=0;i<b.length;i++){var j=c.shift();d.drawRect(j.x-e,j.y-f,g,h)}d.endFill(),this._lineContainer.addChild(d)},e._winManager=a,e}return __extends(d,c),d.prototype.init=function(){if(this._gameProfile=f.getSubGameProfile(this._params.game_id),e.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),e.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary,this),e.instance.on(b.ControlPanel.EVENT_BET_CHANGE,this.onBetChanged,this),e.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete,this),this._lineContainer=new PIXI.Container,this._winManager.addChild(this._lineContainer),this._gameProfile.get().paylines&&this._gameProfile.get().shawPayline)for(var a=this._gameProfile.get().paylines,c=this,d=1;d<=a.length;d++)!function(b){if(c._params.lineImages){var d=c._winManager.getAperture().getPositionCentreList(a[b-1],c._winManager),e=d.slice(),f=(e.shift(),c._assets.getMovieClip(c._params.lineImages[b-1],!1));c._lineSprites.push(f)}else{var g=new PIXI.Graphics,h=c._winManager.getAperture().getPositionCentreList(a[b-1],c._winManager),i=function(a,b,c){var d=h.slice();a=a||5,g.lineStyle(a,b,c);var e=d.shift();for(g.moveTo(e.x,e.y);d.length;)e=d.shift(),g.lineTo(e.x-20,e.y),g.lineTo(e.x+20,e.y)};i(2.2*c._params.line_styling.width,0,.6),i(c._params.line_styling.width,16711680,1),c._lineSprites.push(g)}}(d)},d.prototype.drawLines=function(){},d.prototype.destroy=function(){e.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),e.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary),e.instance.off(b.ControlPanel.EVENT_BET_CHANGE,this.onBetChanged),e.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete)},d.prototype.validate=function(){if(c.prototype.validate.call(this),a.Core.isDebugMode()&&!this._params.game_id)throw"[PaylineRenderer] missing parameter : game_id"},d.prototype.onBetChanged=function(a){},d.prototype.onWinPresentationComplete=function(){this._lineContainer.removeChildren()},d.prototype.onShowWin=function(a,c,d){switch(this._lineContainer.removeChildren(),a.getType()){case b.SlotWin.TYPE_LINE:if(this._lineSprites&&this._lineSprites.length>0){var e=this._lineSprites[a.getLine()-1];this._lineContainer.addChild(e)}this.drawLineMask(a);break;case b.SlotWin.TYPE_SCATTER:case b.SlotWin.TYPE_WAY:}},d.prototype.onShowWinSummary=function(a){this._lineContainer.removeChildren(),a.applyToAllWins(function(a){switch(a.getType()){case b.SlotWin.TYPE_LINE:case b.SlotWin.TYPE_SCATTER:this.drawLineMask(a);break;case b.SlotWin.TYPE_WAY:}}.bind(this))},d}(d);c.PaylineRenderer=g}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))
}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.ApplicationBase,f=a.Common.GameProfile,g=a.Common.GameEvents,h=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._teaseCount=0,e._winManager=a,e._sounds=d.getSoundManager(),e}return __extends(d,c),d.prototype.init=function(){this._gameProfile=f.getSubGameProfile(this._params.game_id),e.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),e.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear,this),e.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),e.instance.on(g.ON_GET_GAME_RESULTS,this.onGetGameResults,this),e.instance.on(g.ON_GAME_CHANGED,this.clear,this),e.instance.on(b.Aperture.EVENT_TEASE_REEL,this.teaseReel,this),e.instance.on(b.Aperture.EVENT_TEASE_REEL_END,this.teaseReelEnd,this),e.instance.on(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop,this),e.instance.on(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped,this),e.instance.on(g.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults,this),e.instance.on(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim,this)},d.prototype.destroy=function(){e.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),e.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear),e.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),e.instance.off(g.ON_GET_GAME_RESULTS,this.onGetGameResults),e.instance.off(g.ON_GAME_CHANGED,this.clear),e.instance.off(b.Aperture.EVENT_TEASE_REEL,this.teaseReel),e.instance.off(b.Aperture.EVENT_TEASE_REEL_END,this.teaseReelEnd),e.instance.off(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop),e.instance.off(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped),e.instance.off(g.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults),e.instance.off(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim)},d.prototype.validate=function(){if(c.prototype.validate.call(this),a.Core.isDebugMode()&&!this._params.game_id)throw"[SymbolAnimator] missing parameter : game_id"},d.prototype.clear=function(){this._movieLayer&&this._movieLayer.removeChildren(),this._teaseBackground&&this._winManager.getAperture().getBackContainer().removeChild(this._teaseBackground),this._teaseCount=0},d.prototype.onGetGameResults=function(){this._movieLayer||(this._movieLayer=a.Core.Renderer.SceneManager.getCurrentScene().getLayout().getComponent(this._params.anim_container)),this._movieLayer.visible=!0,this.clear()},d.prototype.onReelsDropped=function(){this.clear()},d.prototype.onSymbolDrop=function(b){if(b.getSymbolProfile().getActiveClipId()){var c=this._assets.getMovieClip(b.getSymbolProfile().getActiveClipId(),!0);c.position=b.getLocalCoords(this._movieLayer),c.loop=!0,this._movieLayer.addChild(c),c.gotoAndPlay(a.Core.Maths.getRandomRange(0,c.totalFrames-1))}if(b.getSymbolProfile().getDropClipId()){var d=this._assets.getMovieClip(b.getSymbolProfile().getDropClipId(),!0);d.position=b.getLocalCoords(this._movieLayer),d.loop=!1,this._movieLayer.addChild(d),d.play(),d.onComplete=function(){this._movieLayer.removeChild(d)}.bind(this)}},d.prototype.teaseReel=function(b,c){if(this._params.tease){var d=this._params.tease[c.getId()];if(d){if(d.frame){this._teaseFrame=this._teaseFrame||this._assets.getMovieClip(d.frame.movieclip,!0),this._teaseFrame.visible=!0,this._teaseFrame.position=b.getCentroid(this._movieLayer);var e=d.frame.offsets;e&&(this._teaseFrame.position.x+=e.x||0,this._teaseFrame.position.y+=e.y||0),this._movieLayer.addChild(this._teaseFrame),1==a.Common.Server.free_game_name&&(this._teaseFrame.rotation=Math.PI/180*-45,this._teaseFrame.scale=new PIXI.Point(.7,.765)),this._teaseFrame.play()}if(d.background){this._teaseBackground=this._teaseBackground||this._assets.getMovieClip(d.background.movieclip,!0),this._teaseBackground.position=b.getCentroid(this._winManager.getAperture().getBackContainer());var e=d.background.offsets;e&&(this._teaseBackground.position.x+=e.x||0,this._teaseBackground.position.y+=e.y||0),this._winManager.getAperture().getBackContainer().addChild(this._teaseBackground),this._teaseBackground.play(),this._teaseBackground.visible=!0}this._teaseCount++}}},d.prototype.teaseReelEnd=function(a,b){},d.prototype.onWinSummary=function(a){var b=0;this._winManager.getAperture().getAllSymbols().forEach(function(a){a.alpha=.3,b++}),a.applyToAllWins(function(a){this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(b){this.animateSymbol(b,a)}.bind(this))}.bind(this))},d.prototype.animateSymbol=function(a,b){var c=a.animate(b);if(c.frameClip&&(c.frameClip.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c.frameClip),c.frameClip.play()),c.animationClip&&(c.animationClip.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c.animationClip),c.animationClip.loop=!1,c.animationClip.play(),c.animationClip.x+=a.getSymbolProfile().getMovieClipOffsets().x,c.animationClip.y+=a.getSymbolProfile().getMovieClipOffsets().y,c.animationClip.alpha=.5,TweenLite.to(c.animationClip,.25,{alpha:1}),this._params.popout)){var d=c.animationClip.position,e=c.animationClip.scale;TweenLite.to(c.animationClip,this._params.popout.duration||.5,{x:c.animationClip.x+this._params.popout.offsets.x||-5,y:c.animationClip.y+this._params.popout.offsets.y||-5,ease:Power1.easeInOut,onComplete:function(){c.animationClip.position=d,c.animationClip.scale=e}}),this._params.popout.scale&&TweenLite.to(c.animationClip.scale,this._params.popout.duration||.5,{x:this._params.popout.scale,y:this._params.popout.scale,ease:Power1.easeInOut,onComplete:function(){c.animationClip.position=d}})}},d.prototype.onShowWin=function(a,b,c){this._winManager.getAperture().getAllSymbols().forEach(function(a){a.stopAnimation(),a.alpha=.3}),this._movieLayer.removeChildren(),this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(b){this.animateSymbol(b,a)}.bind(this))},d.prototype.stopSymbolAnim=function(){this.clear()},d}(d);c.SymbolAnimator=h}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Core.Environment,f=a.Common.ApplicationBase,g=a.Common.Server,h=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._winManager=a,e}return __extends(d,c),d.prototype.destroy=function(){f.instance.off(b.WinManager.EVENT_MODIFY_APERTURE_START,this.onExpandColumn),f.instance.off(g.REQUEST_RESULTS,this.onResultsRequested)},d.prototype.onResultsRequested=function(a){this._movieLayer.removeChildren()},d.prototype.onModifierStart=function(a){},d.prototype.validate=function(){c.prototype.validate.call(this)},d.prototype.onExpandColumn=function(c){console.log("[ExpandingSymbols] ",c);var d=this._params.tease.SCATTER.background,g=this._assets.getMovieClip("Expanding_Wild");g.scale=new PIXI.Point(.52,.48);var h=this._winManager.getAperture().getReel(c-1),i=h.getCentroid(this._movieLayer);e.isMobile(),g.pivot.x=g.width/2,g.pivot.y=g.height/2,g.position.x=i.x-37,g.position.y=i.y-100,this._movieLayer.addChild(g),g.loop=!1,g.play(),g.onComplete=function(){},a.Core.Time.juggler.setTimeout(function(){f.instance.emit(b.WinManager.EVENT_MODIFY_APERTURE_END)},d.duration||1e3)},d}(d);c.ExpandingSymbols=h}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));